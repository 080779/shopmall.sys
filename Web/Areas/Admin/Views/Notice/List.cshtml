<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="~/assets/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/css/style.css" />
    <link href="~/assets/css/codemirror.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/assets/css/ace.min.css" />
    <link rel="stylesheet" href="~/assets/css/font-awesome.min.css" />
    <link href="~/css/my_pagination.css" rel="stylesheet" />
    <script src="~/assets/js/jquery.min.js"></script>
    <!--[if IE]>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <![endif]-->
    <!--[if !IE]> -->
    <script type="text/javascript">
        window.jQuery || document.write("<script src='/assets/js/jquery-2.0.3.min.js'>" + "<" + "/script>");
    </script>
    <!-- <![endif]-->
    <script type="text/javascript">
        if ("ontouchend" in document) document.write("<script src='/assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
    </script>
    <script type="text/javascript" src="~/js/vue.min2.5.16.js"></script>
    <script type="text/javascript" src="~/js/vue-resource.min1.5.0.js"></script>
    <script src="~/assets/js/bootstrap.min.js"></script>
    <script src="~/assets/js/typeahead-bs2.min.js"></script>
    <!-- page specific plugin scripts -->
    <script src="~/assets/js/jquery.dataTables.min.js"></script>
    <script src="~/assets/js/jquery.dataTables.bootstrap.js"></script>
    <script type="text/javascript" src="~/js/H-ui.js"></script>
    <script type="text/javascript" src="~/js/H-ui.admin.js"></script>
    <script src="~/assets/layer/layer.js" type="text/javascript"></script>
    <script src="~/assets/laydate/laydate.js" type="text/javascript"></script>
    <title>公告栏管理</title>
</head>

<body>
    <div id="app">
        <div class="table_menu_list">
            <table class="table table-striped table-bordered table-hover" id="sample-table">
                <thead>
                    <tr>
                        <th width="80">编号</th>
                        <th width="80">模块</th>
                        <th width="100">操作详情</th>
                        <th width="80">操作账号</th>
                        <th width="80">IP地址</th>
                        <th width="120">备注</th>
                        <th width="100">时间</th>
                    </tr>
                </thead>
                <tbody v-for="log in adminLogs">
                    <tr>
                        <td v-html="log.id"></td>
                        <td v-html="log.permissionTypeName"></td>
                        <td v-html="log.description"></td>
                        <td v-html="log.adminMobile"></td>
                        <td v-html="log.ipAddress"></td>
                        <td v-html="log.tip"></td>
                        <td v-html="log.createTime"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="nextpage">
            <ul id='page' class="pagination">
                <li><a href="javascript:;" v-on:click="getPage(1)">首页</a></li>
                <li><a href="javascript:;" v-on:click="getPage(pageResult.uppage)">上一页</a></li>
                <li v-for="page in pageResult.pages" v-on:click="getPage(page.pageIndex)" v-bind:class="page.current"><a href="javascript:;" v-html="page.pageIndex"></a></li>
                <li><a href="javascript:;" v-on:click="getPage(pageResult.nextpage)">下一页</a></li>
                <li><a href="javascript:;" v-on:click="getPage(pageResult.endpage)">尾页</a></li>
                <li><a>共<font v-html="pageResult.endpage"></font>页</a></li>
                @*<li><input style="width:25px" v-model="page" /></li>
                <li><a v-on:click="getPage(page)">转到</a></li>*@
            </ul>
        </div>
    </div>
</body>
</html>
<script type="text/javascript">
    var startTime;
    var endTime;
    var vue = new Vue({
        el: "#app",
        data: {
            notices: [], pageResult: "", page: ""
        },
        methods: {
            getPage: function (page) {
                this.$http.post('/admin/notice/list', { mobile: "", startTime: "", endTime: "", pageIndex: page }, { emulateJSON: true }).then(function (result) {
                    if (result.data.status == 1) {
                        this.notices = result.data.data.notices;
                        this.pageResult = result.data.data.pageResult;
                    }
                    else if (result.data.status == 302) {
                        window.location.href = result.data.data;
                    }
                });
            }
        },
        mounted: function () {
            this.$http.post('/admin/notice/list', { mobile: "", startTime: "", endTime: "", pageIndex: 1 }, { emulateJSON: true }).then(function (result) {
                if (result.data.status == 1) {
                    this.notices = result.data.data.notices;
                    this.pageResult = result.data.data.pageResult;
                }
                else if (result.data.status == 302) {
                    window.location.href = result.data.data;
                }
            });
        }
    });
</script>
