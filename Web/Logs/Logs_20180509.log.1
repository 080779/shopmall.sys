2018-05-09 21:54:57,249 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,252 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,255 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:57,255 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,255 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,255 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,255 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:57,255 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,255 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,255 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,256 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,256 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,256 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,379 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,379 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:57,379 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,379 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:57,379 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,380 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,380 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,380 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,380 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:57,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:57,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,382 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:57,382 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,382 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,382 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,382 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,382 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,382 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,382 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,382 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,382 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:57,382 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,382 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,383 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,383 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,383 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,383 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,383 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:57,383 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,383 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,383 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,383 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,383 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,383 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,384 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,384 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,384 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,384 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,384 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:57,384 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,384 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,384 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,384 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,384 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,384 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,384 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,384 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,385 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,385 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,385 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:57,385 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,385 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,385 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,385 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,386 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,386 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,386 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:57,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,386 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:57,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:57,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,387 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,388 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,388 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,388 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,531 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,531 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:57,531 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,531 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:57,531 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,532 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,532 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,532 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,532 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,532 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:57,532 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,533 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,533 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,533 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,533 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,534 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,534 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:57,534 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,534 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,534 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,534 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,534 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,534 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,535 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:57,535 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,535 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,535 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,535 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,535 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,535 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,535 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,535 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,536 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:57,536 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,536 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,536 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,536 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,536 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,536 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,537 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:57,537 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,537 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,537 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,537 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,537 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,537 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,537 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,537 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,537 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,537 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,537 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:57,537 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,538 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,538 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,538 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,538 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,538 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,538 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,538 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,538 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,538 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,539 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 7
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:57,539 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,539 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,539 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,539 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,539 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,539 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,539 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:57,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:57,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:57,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,544 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,544 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:57,544 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,544 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,544 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,544 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,545 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,545 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:58,025 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,025 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:58,025 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,025 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:58,025 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,027 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:58,027 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,028 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,028 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,028 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:58,028 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,029 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,029 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:58,029 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,030 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,030 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,030 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:58,030 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,030 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,030 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:58,030 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,031 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,031 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,031 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:58,031 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,031 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:58,031 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:58,031 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,032 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:58,032 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,032 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,032 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,032 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:58,032 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,033 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:58,033 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,034 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,034 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,034 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:58,034 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,034 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:58,034 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:58,034 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:58,034 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:58,034 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,035 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:58,035 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,035 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,036 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,036 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:58,036 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,036 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:58,036 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:58,036 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:58,036 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:58,036 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,037 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:58,037 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,037 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,037 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,038 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 8
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:58,038 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,038 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:58,038 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:58,038 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:58,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,041 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,041 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:58,041 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,041 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:58,041 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,041 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:58,041 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:58,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:58,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:58,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:58,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:54:58,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,053 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:54:58,053 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,053 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,830 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,831 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:58,831 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,831 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:58,831 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,832 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:58,832 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,833 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,833 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,834 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:58,834 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,834 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,834 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:58,834 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,834 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,835 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,835 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:58,835 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,835 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,836 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:58,836 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,836 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,836 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,837 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:58,837 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,837 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:58,837 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:58,837 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,838 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:58,838 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,838 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,838 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,838 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:58,838 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,838 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,840 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:58,840 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,840 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,840 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,841 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:58,841 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,841 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:58,841 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:58,841 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:58,841 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:58,841 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,842 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:58,842 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,842 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,842 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,843 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:58,843 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,843 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:58,843 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:58,843 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:58,843 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:58,843 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,844 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:58,844 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,844 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,844 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,845 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 9
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:58,845 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,845 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:58,845 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:58,845 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,846 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:58,846 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,847 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,847 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,847 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:58,847 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,847 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:58,847 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,848 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:58,848 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,848 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,848 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,848 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:58,848 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,848 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:58,848 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,848 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:58,848 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,849 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,849 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,849 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:58,849 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,849 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:58,849 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:58,849 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:58,849 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:58,849 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:58 +08:00

2018-05-09 21:54:59,011 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,012 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:59,012 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,012 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:59,012 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,013 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:59,013 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,013 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,014 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,014 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:59,014 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,014 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,014 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:59,014 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,014 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,015 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,015 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:59,015 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,015 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,015 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:59,015 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,015 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,015 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,015 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:59,015 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,015 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:59,015 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:59,015 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,016 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:59,016 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,016 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,016 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,016 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:59,016 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,016 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,017 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:59,017 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,017 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,017 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,017 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:59,017 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,017 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:59,017 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:59,017 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:59,017 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:59,017 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,018 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:59,018 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,018 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,018 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,018 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:59,018 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,018 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:59,018 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:59,018 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:59,018 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:59,018 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,019 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:59,019 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,019 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,019 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,019 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:59,019 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,019 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:59,020 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:59,020 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,020 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:59,020 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,020 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,020 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,020 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:59,020 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,020 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:59,020 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,021 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:59,021 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,021 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,021 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,021 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:59,021 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,021 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:59,021 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,022 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:59,022 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,022 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,022 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,022 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:59,022 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,022 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:59,022 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:59 +08:00

2018-05-09 21:54:59,023 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:59,023 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:59,023 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:59 +08:00

2018-05-09 21:55:00,015 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,015 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:00,015 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,015 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:00,015 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,016 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:00,016 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,017 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,017 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,018 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:00,018 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,018 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,019 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:00,019 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,019 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,019 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,020 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:00,020 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,020 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,020 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:00,020 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,020 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,021 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,021 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:00,021 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,021 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:00,021 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:00,021 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,025 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:55:00,025 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,025 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,026 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,026 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:00,026 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,026 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,029 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:00,029 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,030 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,030 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,030 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:00,031 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,031 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:00,031 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:00,031 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:00,031 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:00,031 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,032 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:00,032 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,032 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,032 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:00,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:00,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:00,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:00,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:00,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,033 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:00,033 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,033 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,033 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,034 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 12
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:00,034 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,034 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:00,034 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:00,034 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:00,039 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:55:00,039 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:00,039 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:00 +08:00

2018-05-09 21:55:01,055 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,055 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:01,055 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,055 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:01,055 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,057 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:01,057 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,057 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,057 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,058 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:01,058 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,058 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,060 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:01,060 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,060 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,060 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,061 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:01,061 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,061 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,061 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:01,061 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,061 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,061 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,062 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:01,062 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,062 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:01,062 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:01,062 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,063 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:01,063 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,063 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,063 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,063 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:01,063 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,064 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,064 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:01,064 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:01,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:01,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:01,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:01,066 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:01,066 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,070 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:55:01,070 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,070 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,070 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,071 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:01,071 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,071 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:01,071 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:01,071 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:01,071 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:01,071 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,081 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:55:01,081 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,082 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,082 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,083 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:01,083 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,083 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:01,083 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:01,083 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,084 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:01,084 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,084 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,084 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,084 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:01,084 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,084 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:01,084 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:01,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:01,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:01,087 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,094 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:55:01,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:01,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:01,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:01,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:01,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:01,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:01 +08:00

2018-05-09 21:55:02,163 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,164 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:02,164 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,164 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:02,164 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,165 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:02,165 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,166 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,167 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,167 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:02,168 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,168 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,169 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:02,169 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,169 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,170 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,170 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:02,170 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,170 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,171 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:02,171 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,171 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,172 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,173 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:02,173 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,173 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:02,173 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:02,173 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,174 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:02,174 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,175 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,175 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,177 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:02,177 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,177 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,178 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:02,178 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,179 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,179 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,180 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:02,180 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,180 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:02,180 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:02,180 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:02,180 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:02,180 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,182 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:02,182 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,182 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,182 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,183 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:02,183 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,183 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:02,183 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:02,183 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:02,183 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:02,183 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,185 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:02,185 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,185 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,185 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,186 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:02,186 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,186 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:02,186 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:02,186 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,193 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 21:55:02,193 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,193 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,193 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,193 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:02,193 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,194 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:02,194 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,195 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:02,195 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,195 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,195 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,195 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:02,195 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,195 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:02,195 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,210 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-09 21:55:02,210 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,210 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,210 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,210 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:02,210 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,210 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:02,210 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,210 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:02,210 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,211 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,808 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,809 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:02,809 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,809 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:02,809 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,811 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:02,811 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,811 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,812 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,812 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:02,812 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,812 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,816 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:55:02,816 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,816 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,816 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,816 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:02,817 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,817 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,818 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:02,818 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,818 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,818 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,819 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:02,819 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,819 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:02,819 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:02,819 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,819 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:02,819 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,820 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,820 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,820 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:02,820 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,820 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,822 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:02,822 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,822 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,822 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,822 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:02,822 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,822 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:02,822 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:02,822 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:02,822 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:02,822 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,823 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:02,823 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,823 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,823 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,824 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:02,824 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,824 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:02,824 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:02,824 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:02,824 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:02,824 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,824 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:02,824 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,824 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,824 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,825 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:02,825 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,825 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:02,825 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:02,825 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:55:02,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:02,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:02,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:02,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:02,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:02,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:02,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:02,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:02,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:02,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:02,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:02,837 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:02 +08:00

2018-05-09 21:55:03,379 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,380 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:03,380 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,380 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:03,380 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,382 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:03,383 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,383 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,385 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,385 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:03,385 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,385 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,389 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:55:03,389 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,389 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,390 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,390 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:03,390 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,390 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,393 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:03,393 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,393 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,393 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,393 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:03,393 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,393 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:03,393 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:03,393 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,405 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:55:03,405 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,405 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,405 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,405 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:03,405 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,405 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,412 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 21:55:03,412 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,413 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,413 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,413 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:03,413 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,413 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:03,413 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:03,413 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:03,413 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:03,413 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,414 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:03,414 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,414 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,414 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,415 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:03,415 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,415 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:03,415 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:03,415 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:03,415 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:03,415 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,415 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:03,415 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,415 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,416 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,416 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:03,416 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,416 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:03,416 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:03,416 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,419 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:55:03,419 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,420 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,420 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,420 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:03,420 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,420 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:03,420 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,422 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:03,422 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,422 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,422 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,423 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:03,423 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,423 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:03,423 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,423 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:03,423 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,423 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,423 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:03,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:03,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:03,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:03,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:03,425 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:03 +08:00

2018-05-09 21:55:04,637 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,637 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:04,637 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,637 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:04,637 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,638 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:04,638 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,638 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,639 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,639 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:04,639 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,639 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,639 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:04,639 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,640 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,640 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,640 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:04,640 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,640 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,641 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:04,641 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,641 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,642 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,642 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:04,642 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,642 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:04,642 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:04,642 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,643 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:04,643 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,643 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,643 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,643 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:04,643 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,643 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,644 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:04,644 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,644 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:04,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:04,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:04,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:04,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:04,645 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,646 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:04,646 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,646 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,647 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,647 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:04,647 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,647 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:04,647 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:04,647 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:04,647 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:04,647 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,648 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:04,648 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,648 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,648 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,648 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:04,648 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,648 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:04,648 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:04,648 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,649 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:04,649 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,650 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,650 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,650 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:04,650 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,650 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:04,650 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,664 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-09 21:55:04,664 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,664 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,664 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,664 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:04,664 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,664 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:04,664 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,670 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:55:04,670 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,670 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,670 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,670 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:04,670 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,670 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:04,670 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:04,672 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:04,672 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:04,672 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:04 +08:00

2018-05-09 21:55:05,657 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,658 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:05,658 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,658 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:05,658 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,662 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:55:05,662 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,663 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,664 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,665 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:05,665 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,665 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,666 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:05,667 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,667 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,667 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,668 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:05,668 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,668 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,668 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:05,669 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,669 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,669 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,670 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:05,670 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,670 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:05,670 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:05,670 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,672 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:05,672 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,672 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,672 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,673 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:05,673 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,673 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,673 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:05,673 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,673 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:05,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:05,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:05,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:05,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:05,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,675 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:05,675 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,675 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,675 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,676 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:05,676 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,676 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:05,676 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:05,676 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:05,676 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:05,676 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,676 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:05,676 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,676 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,676 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,676 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:05,677 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,677 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:05,677 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:05,677 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,677 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:05,677 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,677 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,677 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,677 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:05,677 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,677 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:05,678 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,678 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:05,678 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,678 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,678 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,678 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:05,678 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,678 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:05,678 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,678 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:05,678 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,679 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,679 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,679 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:05,679 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,679 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:05,679 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:05,680 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:05,680 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:05,680 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:05 +08:00

2018-05-09 21:55:06,333 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,333 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:06,333 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,333 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:06,333 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,334 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:06,334 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,334 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,335 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,336 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:06,336 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,336 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,338 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:06,338 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,338 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,339 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,339 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:06,339 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,339 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,340 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:06,340 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,340 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,340 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,340 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:06,341 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,341 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:06,341 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:06,341 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,341 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:06,341 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,341 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,341 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,342 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:06,342 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,342 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,343 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:06,343 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,343 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,343 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,343 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:06,343 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,344 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:06,344 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:06,344 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:06,344 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:06,344 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,345 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:06,345 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,345 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,345 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,345 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:06,345 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,346 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:06,346 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:06,346 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:06,346 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:06,346 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,346 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:06,347 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,347 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,347 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,347 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 9
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:06,347 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,347 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:06,347 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:06,347 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,348 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:06,348 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,349 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,349 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,349 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:06,349 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,349 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:06,349 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,360 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:55:06,361 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,361 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,361 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,361 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:06,361 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,361 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:06,361 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,361 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:06,361 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,362 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,362 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,362 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:06,362 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,362 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:06,362 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,362 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:06,362 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,362 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:06,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:06,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,934 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:55:06,935 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,935 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,935 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,936 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:06,936 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,936 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,936 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:06,936 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,936 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,936 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,937 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:06,937 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,937 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,937 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:06,937 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,937 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,937 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,938 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:06,938 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,938 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:06,938 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:06,938 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,946 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:55:06,946 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,946 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,946 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,946 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:06,946 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,946 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,951 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:55:06,951 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,951 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,951 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,952 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:06,952 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,952 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:06,952 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:06,952 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:06,952 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:06,952 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,953 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:06,953 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,953 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,953 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,954 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:06,955 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,955 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:06,955 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:06,955 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:06,955 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:06,955 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,965 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:55:06,965 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,965 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,965 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,966 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:06,966 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,966 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:06,966 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:06,966 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,978 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:55:06,978 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,978 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,978 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:06,978 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:06,978 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:06,978 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:06,978 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:06 +08:00

2018-05-09 21:55:07,013 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 34 ms with result: SqlDataReader

2018-05-09 21:55:07,013 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:07,014 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:07 +08:00

2018-05-09 21:55:07,014 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:07 +08:00

2018-05-09 21:55:07,014 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:07,014 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:07,014 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:07,014 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:07 +08:00

2018-05-09 21:55:07,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:07,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:07,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:07 +08:00

2018-05-09 21:55:07,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:07 +08:00

2018-05-09 21:55:07,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:07,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:07,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:07,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:07 +08:00

2018-05-09 21:55:07,020 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:07,020 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:07,020 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:07 +08:00

2018-05-09 21:55:08,055 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,055 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:08,055 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,055 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:08,055 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,056 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:08,056 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,056 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,057 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,057 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:08,057 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,057 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,057 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:08,057 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,057 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,058 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,058 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:08,058 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,058 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,059 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:08,059 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,059 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,059 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,060 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:08,060 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,060 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:08,060 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:08,060 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,060 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:08,060 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,060 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,061 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,061 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:08,061 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,061 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,061 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:08,061 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,062 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,062 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,062 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:08,062 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,062 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:08,062 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:08,062 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:08,062 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:08,062 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,063 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:08,063 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,063 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,063 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,063 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:08,063 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,063 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:08,063 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:08,063 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:08,063 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:08,063 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,072 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:55:08,072 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,072 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,072 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,072 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 12
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:08,073 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,073 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:08,073 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:08,073 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:08,078 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:55:08,078 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:08,078 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:08 +08:00

2018-05-09 21:55:10,560 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,561 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:10,561 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,561 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:10,561 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,563 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:10,563 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,564 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,565 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,565 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:10,565 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,565 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,566 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:10,566 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,567 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,567 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,567 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:10,567 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,567 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,568 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:10,568 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,568 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,569 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,569 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:10,569 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,569 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:10,569 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:10,569 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,570 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:10,570 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,570 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,571 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,571 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:10,571 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,571 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,575 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:55:10,575 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,576 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,576 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,577 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:10,577 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,577 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:10,577 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:10,577 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:10,577 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:10,577 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,579 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:10,579 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,579 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,580 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,580 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:10,580 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,580 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:10,580 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:10,580 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:10,580 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:10,580 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,582 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:10,582 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,583 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,583 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,584 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:10,584 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,584 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:10,584 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:10,584 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,619 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 34 ms with result: SqlDataReader

2018-05-09 21:55:10,619 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,619 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,619 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,619 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:10,619 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,619 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:10,619 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,619 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:10,619 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,619 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,619 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:10,620 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:10 +08:00

2018-05-09 21:55:11,824 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,824 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:11,824 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,824 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:11,824 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,827 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:11,827 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,827 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,827 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,828 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:11,828 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,828 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:11,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,830 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:11,830 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,830 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,832 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:11,832 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,832 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,832 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,833 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:11,833 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,833 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:11,833 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:11,833 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,833 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:11,833 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,833 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,833 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,834 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:11,834 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,834 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,834 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:11,834 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,835 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,835 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,835 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:11,835 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,835 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:11,835 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:11,835 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:11,835 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:11,835 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,856 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 19 ms with result: SqlDataReader

2018-05-09 21:55:11,857 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,857 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,857 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,857 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:11,857 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,857 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:11,857 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:11,857 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:11,858 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:11,858 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,858 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:11,858 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,858 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,858 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,859 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:11,859 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,859 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:11,859 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:11,859 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,859 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:11,859 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:11,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:11,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:11,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:11,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:11,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:11,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:11,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:11,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:11,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:11,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:11,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:11 +08:00

2018-05-09 21:55:12,387 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,388 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:12,388 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,388 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:12,388 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,388 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:12,388 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,389 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,389 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,389 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:12,389 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,389 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,390 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:12,390 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,390 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,390 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,390 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:12,390 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,390 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,390 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:12,390 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,390 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,391 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,391 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:12,391 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,391 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:12,391 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:12,391 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:12,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:12,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:12,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,395 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,395 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:12,395 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,395 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:12,395 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:12,395 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:12,395 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:12,395 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,419 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 23 ms with result: SqlDataReader

2018-05-09 21:55:12,419 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,419 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,419 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:12,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:12,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:12,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:12,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:12,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,420 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:12,420 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,420 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,420 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,421 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:12,421 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,421 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:12,421 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:12,421 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,421 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:12,421 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,422 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,422 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,422 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:12,422 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,422 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:12,422 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,422 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:12,422 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,422 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,422 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,423 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:12,423 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,423 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:12,423 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,423 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:12,423 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,423 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,423 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,423 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:12,423 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,423 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:12,423 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:12,424 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:12,424 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:12,424 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:12 +08:00

2018-05-09 21:55:13,333 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,333 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:13,333 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,333 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:13,333 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,334 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:13,334 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,334 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,335 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,335 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:13,335 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,335 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,336 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:13,336 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,336 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,336 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,336 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:13,336 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,336 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,337 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:13,337 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,337 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,337 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,338 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:13,338 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,338 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:13,338 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:13,338 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,338 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:13,338 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,338 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,339 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,339 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:13,339 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,339 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,340 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:13,340 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,340 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,340 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,341 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:13,341 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,341 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:13,341 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:13,341 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:13,341 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:13,341 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,341 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:13,341 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,341 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,342 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,342 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:13,342 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,342 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:13,342 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:13,342 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:13,342 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:13,342 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,343 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:13,343 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,343 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,343 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,344 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:13,344 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,344 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:13,344 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:13,344 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,345 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:13,345 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,345 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,345 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,345 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:13,345 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,345 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:13,345 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,355 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:55:13,355 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,355 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,355 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,355 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:13,355 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,355 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:13,355 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,355 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:13,355 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,355 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,355 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,355 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:13,355 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,356 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:13,356 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:13,356 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:13,356 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:13,356 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:13 +08:00

2018-05-09 21:55:15,303 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,303 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:15,303 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,303 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:15,303 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,304 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:15,304 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,304 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,305 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,305 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:15,305 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,305 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,307 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:15,307 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,307 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,307 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,307 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:15,307 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,307 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,308 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:15,308 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,308 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,308 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,309 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:15,309 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,309 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:15,309 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:15,309 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,310 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:15,310 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,310 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,311 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,311 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:15,311 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,311 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,311 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:15,312 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,312 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,312 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,313 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:15,313 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,313 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:15,313 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:15,313 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:15,313 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:15,313 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,314 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:15,314 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,314 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,315 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,315 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:15,315 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,315 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:15,315 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:15,315 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:15,315 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:15,315 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,320 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:55:15,320 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,320 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:15,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:15,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:15,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,322 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:15,322 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,322 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,322 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,322 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:15,322 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,322 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:15,322 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,322 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:15,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:15,324 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:15,324 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:15,324 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:15 +08:00

2018-05-09 21:55:16,245 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,245 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:16,245 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,246 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:16,246 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,248 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:16,248 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,248 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,249 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,249 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:16,249 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,249 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,250 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:16,250 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,250 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,250 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,251 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:16,251 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,251 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,251 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:16,251 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,251 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,252 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,252 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:16,252 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,252 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:16,252 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:16,252 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,253 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:16,253 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,253 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,253 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,253 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:16,253 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,254 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,254 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:16,254 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,255 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,255 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,256 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:16,256 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,256 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:16,256 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:16,256 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:16,256 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:16,256 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,258 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:16,258 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,258 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,258 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,259 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:16,259 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,259 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:16,259 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:16,259 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:16,259 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:16,259 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,262 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:16,262 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,262 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,262 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,263 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:16,263 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,263 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:16,263 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:16,263 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,270 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:55:16,270 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,270 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,270 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,270 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:16,270 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,270 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:16,270 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:16,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:16,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:16,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:16,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,273 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,273 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:16,273 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,273 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:16,273 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:16,273 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:16,273 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:16,273 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:16 +08:00

2018-05-09 21:55:17,332 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,332 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:17,332 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,332 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:17,332 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,339 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:55:17,339 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,340 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,340 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,340 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:17,340 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,340 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,342 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:17,342 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,342 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,342 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,343 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:17,343 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,343 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,369 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 26 ms with result: SqlDataReader

2018-05-09 21:55:17,369 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,369 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,369 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,370 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:17,370 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,370 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:17,370 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:17,370 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,370 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:17,370 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,371 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,371 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,371 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:17,371 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,371 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,371 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:17,372 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,372 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,372 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,373 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:17,373 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,373 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:17,373 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:17,373 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:17,373 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:17,373 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,373 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:17,373 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,373 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,374 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,374 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:17,374 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,374 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:17,374 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:17,374 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:17,374 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:17,374 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,375 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:17,375 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,376 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,376 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,377 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:17,377 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,377 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:17,377 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:17,377 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,380 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:17,380 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,380 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,380 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,380 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:17,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:17,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:17,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,382 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,382 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,382 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:17,382 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,382 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:17,382 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,384 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:17,385 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,385 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,385 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,385 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:17,385 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,385 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:17,385 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:17,386 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:17,386 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:17,386 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:17 +08:00

2018-05-09 21:55:18,837 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,837 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:18,837 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,837 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:18,837 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,841 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:55:18,841 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,841 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,841 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:18,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:18,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,842 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,843 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:18,843 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,843 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,844 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:18,844 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,844 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,844 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,844 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:18,844 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,844 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:18,844 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:18,844 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,845 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:18,845 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,845 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,845 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,845 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:18,845 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,845 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,859 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-09 21:55:18,859 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,859 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,859 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:18,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:18,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:18,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:18,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:18,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:18,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:18,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:18,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:18,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:18,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:18,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:18,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,862 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,863 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,863 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:18,863 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,863 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:18,863 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:18,863 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,864 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:18,864 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,864 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,864 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,864 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:18,865 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,865 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:18,865 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:18,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:18,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:18,867 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,869 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:55:18,869 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,870 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,870 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,870 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:55:18,870 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,870 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:18,870 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:18,871 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:18,871 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:18,871 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:18 +08:00

2018-05-09 21:55:20,032 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,033 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:55:20,033 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,033 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:55:20,033 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,034 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:20,034 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,034 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:55:20,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:20,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:55:20,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:20,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,041 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,041 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,041 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:55:20,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:20,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:20,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,043 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:55:20,043 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,043 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,044 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,044 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:55:20,044 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,044 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,045 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:20,045 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,045 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,045 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,046 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:20,046 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,046 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:20,046 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:20,046 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:55:20,046 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:20,046 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,047 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:20,047 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,047 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,047 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,047 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:55:20,047 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,048 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:20,048 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:20,048 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:55:20,048 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:55:20,048 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,048 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:20,048 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,048 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,049 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,049 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 12
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:55:20,049 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,049 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:55:20,049 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:55:20,049 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:55:20 +08:00

2018-05-09 21:55:20,050 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:55:20,050 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:55:20,050 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:55:20 +08:00

2018-05-09 21:56:46,231 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,231 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:56:46,231 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,231 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:56:46,231 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,237 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:56:46,237 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,237 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,237 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,238 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:56:46,238 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,238 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,239 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:46,239 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,239 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,239 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,240 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:56:46,240 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,240 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,241 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:46,241 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,241 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,241 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,241 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:56:46,241 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,242 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:46,242 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:46,242 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:46,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:56:46,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,244 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,245 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:46,245 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,245 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,245 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,246 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:46,246 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,246 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:46,246 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:46,246 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:46,246 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:46,246 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,247 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:46,247 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,247 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,247 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,247 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:46,247 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,247 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:46,248 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:46,248 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:46,248 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:46,248 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,248 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:46,248 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,248 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,249 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,249 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 8
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:56:46,249 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,249 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:46,249 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:46,249 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,276 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 27 ms with result: SqlDataReader

2018-05-09 21:56:46,277 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,277 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,277 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,277 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:46,277 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,277 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:46,277 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,278 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:46,278 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,278 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,278 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,278 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:46,278 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,278 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:46,278 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,278 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:46,278 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,278 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:46,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:56:46,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:46,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:46,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:46,279 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:46 +08:00

2018-05-09 21:56:47,969 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,969 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:56:47,969 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,969 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:56:47,970 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,971 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:47,971 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,971 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,972 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,973 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:56:47,973 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,973 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,974 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:47,974 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,974 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,974 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,975 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:56:47,975 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,975 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,976 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:47,976 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,977 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,977 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,977 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:56:47,977 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,977 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:47,977 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:47,977 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,978 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:47,978 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,978 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,979 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,979 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:56:47,979 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,979 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,980 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:47,980 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,981 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,981 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,981 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:47,982 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,982 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:47,982 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:47,982 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:47,982 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:47,982 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,983 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:47,983 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,983 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,984 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,984 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:47,984 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,984 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:47,984 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:47,984 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:47,984 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:47,984 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,986 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:47,986 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,986 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,986 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:47,987 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:56:47,987 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:47,987 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:47,987 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:47,987 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:47 +08:00

2018-05-09 21:56:48,005 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 17 ms with result: SqlDataReader

2018-05-09 21:56:48,005 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:48,005 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:48 +08:00

2018-05-09 21:56:48,006 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:48 +08:00

2018-05-09 21:56:48,006 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:48,006 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:48,006 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:48,006 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:48 +08:00

2018-05-09 21:56:48,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:56:48,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:48,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:48 +08:00

2018-05-09 21:56:48,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:48 +08:00

2018-05-09 21:56:48,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:48,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:48,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:48,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:48 +08:00

2018-05-09 21:56:48,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:48,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:48,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:48 +08:00

2018-05-09 21:56:48,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:48 +08:00

2018-05-09 21:56:48,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:48,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:48,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:56:48,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:48 +08:00

2018-05-09 21:56:48,026 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:56:48,026 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:48,026 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:48 +08:00

2018-05-09 21:56:49,203 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,203 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:56:49,203 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,203 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:56:49,203 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,204 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:49,204 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,204 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,204 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,205 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:56:49,205 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,205 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,205 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:49,205 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,205 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,205 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,205 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:56:49,205 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,205 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,206 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:49,206 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,206 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,206 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,206 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:56:49,206 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,206 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:49,206 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:49,206 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,208 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:49,208 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,208 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,208 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,208 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:56:49,208 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,208 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,209 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:49,209 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,209 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,209 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,209 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:49,210 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,210 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:49,210 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:49,210 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:49,210 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:49,210 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,210 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:49,210 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,210 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,211 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,211 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:49,211 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,211 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:49,211 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:49,211 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:49,211 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:49,211 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,212 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:49,212 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,212 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,212 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,212 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 5
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:56:49,212 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,212 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:49,212 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:49,212 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,213 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:49,213 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,213 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,213 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,213 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:49,213 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,213 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:49,213 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,214 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:49,214 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,214 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,214 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,214 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:49,214 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,214 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:49,214 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,222 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:56:49,222 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,223 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,223 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,223 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:49,223 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,223 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:56:49,223 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:49,235 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 21:56:49,236 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:49,236 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:49 +08:00

2018-05-09 21:56:50,478 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,478 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:56:50,479 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,479 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:56:50,479 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,481 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:50,481 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,481 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,482 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,482 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:56:50,482 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,482 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,483 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:50,483 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,483 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,483 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,484 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:56:50,484 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,484 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,484 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:50,484 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,484 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,484 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,485 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:56:50,485 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,485 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:50,485 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:50,485 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,488 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:56:50,488 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,488 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,489 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,489 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:56:50,489 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,489 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,514 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 24 ms with result: SqlDataReader

2018-05-09 21:56:50,514 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,514 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,514 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,514 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:50,514 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,514 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:50,514 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:50,514 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:50,515 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:50,515 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,515 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:50,515 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,515 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,515 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,515 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:50,515 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,515 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:50,515 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:50,515 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:50,515 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:50,515 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,516 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:50,516 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,516 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,516 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,516 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:56:50,516 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,516 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:50,516 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:50,516 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:50,517 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,518 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:50,518 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,518 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,518 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,518 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:50,518 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,518 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:50,518 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:50,518 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:50,518 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:50,518 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:50 +08:00

2018-05-09 21:56:51,819 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,820 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:56:51,820 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,820 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:56:51,820 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,822 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:56:51,822 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,822 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,823 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,824 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:56:51,824 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,824 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,826 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:56:51,826 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,827 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,827 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,827 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:56:51,827 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,827 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,843 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 16 ms with result: SqlDataReader

2018-05-09 21:56:51,843 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,844 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,844 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,844 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:56:51,844 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,844 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:51,844 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:51,844 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,855 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:56:51,855 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,855 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,855 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,856 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:56:51,856 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,856 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,856 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:51,856 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,857 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,857 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,857 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:51,857 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,857 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:51,857 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:51,857 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:51,857 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:51,857 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,858 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:51,858 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,859 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,859 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,859 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:51,859 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,859 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:51,859 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:51,859 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:51,859 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:51,859 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,860 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:51,860 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,860 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,860 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,860 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:56:51,860 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,860 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:51,860 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:51,861 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,861 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:51,861 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,861 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,861 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,861 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:51,861 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,861 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:51,861 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:51,862 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:51,863 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:51,863 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:51 +08:00

2018-05-09 21:56:52,950 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,951 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:56:52,951 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,951 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:56:52,951 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,952 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:52,952 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,953 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,953 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,954 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:56:52,954 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,954 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,955 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:52,955 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,956 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,956 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,956 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:56:52,956 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,956 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,957 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:52,957 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,957 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,957 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,957 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:56:52,957 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,957 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:52,958 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:52,958 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,959 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:52,959 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,959 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,959 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,960 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:56:52,960 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,960 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,961 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:52,961 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,961 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,961 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,962 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:52,962 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,962 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:52,962 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:52,962 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:52,962 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:52,962 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,970 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:56:52,970 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,970 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,971 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,971 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:52,971 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,971 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:52,971 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:52,971 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:52,971 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:52,971 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,973 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:52,973 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,973 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,973 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,974 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:56:52,974 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,974 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:52,974 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:52,974 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,982 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:56:52,982 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,982 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,983 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,983 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:52,983 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,983 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:52,983 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,991 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:56:52,991 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,992 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,992 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,992 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:52,992 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,992 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:52,992 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,993 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:52,993 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,993 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,993 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,993 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:52,993 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,993 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:52,993 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:52,994 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:52,994 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:52,994 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:52 +08:00

2018-05-09 21:56:53,958 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,959 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:56:53,959 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,959 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:56:53,959 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,960 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:53,960 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,961 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,961 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,962 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:56:53,962 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,962 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,963 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:53,963 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,964 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,964 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,964 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:56:53,964 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,964 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,965 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:53,966 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,966 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,966 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,966 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:56:53,967 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,967 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:53,967 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:53,967 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,967 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:53,967 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,968 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,968 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,968 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:56:53,968 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,968 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,969 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:53,969 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,971 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:53,971 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,971 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:53,971 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:53,971 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:53,971 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:53,971 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,977 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 21:56:53,977 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,977 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,978 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,978 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:53,978 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,978 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:53,978 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:53,978 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:53,978 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:53,978 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,980 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:53,980 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,980 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,980 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,981 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:56:53,981 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,981 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:53,981 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:53,981 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,981 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:53,982 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,982 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,982 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:53,982 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:53,982 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:53,982 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:53,982 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:53 +08:00

2018-05-09 21:56:54,002 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 19 ms with result: SqlDataReader

2018-05-09 21:56:54,002 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:54,002 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:54 +08:00

2018-05-09 21:56:54,002 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:54 +08:00

2018-05-09 21:56:54,002 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:54,002 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:54,002 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:54,002 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:54 +08:00

2018-05-09 21:56:54,004 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:56:54,004 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:54,004 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:54 +08:00

2018-05-09 21:56:54,005 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:54 +08:00

2018-05-09 21:56:54,005 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:54,005 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:54,005 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:54,005 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:54 +08:00

2018-05-09 21:56:54,005 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:54,005 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:54,005 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:54 +08:00

2018-05-09 21:56:57,128 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,128 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:56:57,128 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,128 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:56:57,128 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,129 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:57,129 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,129 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,129 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,130 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:56:57,130 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,130 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,130 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:57,130 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,130 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,130 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,130 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:56:57,130 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,130 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:57,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:56:57,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:57,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:57,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,131 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:57,131 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,132 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,132 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,132 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:56:57,132 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,132 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,132 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:57,132 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,133 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,133 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,133 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:57,133 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,133 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:57,133 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:57,133 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:57,133 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:57,133 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,134 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:57,134 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,134 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,134 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,134 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:56:57,134 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,134 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:57,134 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:57,134 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:57,134 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:56:57,134 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,135 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:57,135 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,135 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,135 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,136 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:56:57,136 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,136 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:56:57,136 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:56:57,136 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,136 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:57,136 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,137 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,137 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,137 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:57,137 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,137 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:56:57,137 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,137 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:57,137 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,138 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,138 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,138 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:57,138 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,138 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:57,138 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,138 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:57,138 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,139 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,139 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,139 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:56:57,139 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,139 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:56:57,139 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:56:57 +08:00

2018-05-09 21:56:57,139 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:56:57,139 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:56:57,139 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:56:57 +08:00

2018-05-09 21:57:06,374 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,374 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:57:06,374 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,374 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:57:06,374 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,375 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:06,375 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,375 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,376 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,377 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:57:06,377 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,377 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,379 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:57:06,379 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,379 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,379 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,380 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:57:06,380 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,380 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,380 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:06,380 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,381 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,381 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,381 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:57:06,381 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,381 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:06,381 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:06,381 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:57:06,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,386 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:57:06,386 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,386 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,387 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:06,387 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,387 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,387 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,388 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:06,388 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,388 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:06,388 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:06,388 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:06,388 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:06,388 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,389 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:06,389 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,389 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,390 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,390 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:06,390 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,390 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:06,390 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:06,390 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:06,390 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:06,390 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,392 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:06,392 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,392 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,392 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,393 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:57:06,393 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,393 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:06,393 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:06,393 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,394 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:06,394 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,394 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,394 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,394 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:06,394 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,394 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:06,394 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,395 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:06,395 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,395 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,395 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,395 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:06,395 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,395 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:06,395 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,396 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:06,396 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,396 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,396 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,396 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:06,396 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,396 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:06,396 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:06,396 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:06,396 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:06,396 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:06 +08:00

2018-05-09 21:57:52,755 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,756 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:57:52,756 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,756 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:57:52,756 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,757 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:52,757 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,757 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,757 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,758 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:57:52,758 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,758 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,758 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:52,758 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,758 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,759 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,759 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:57:52,759 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,759 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,759 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:52,759 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,759 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,760 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,760 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:57:52,760 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,760 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:52,760 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:52,760 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,761 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:52,761 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,761 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,761 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,761 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:57:52,761 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,761 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,762 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:52,762 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,762 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,763 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,763 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:52,763 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,763 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:52,763 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:52,763 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:52,763 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:52,763 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,764 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:52,764 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,764 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,765 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,765 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:52,765 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,765 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:52,765 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:52,765 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:52,765 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:52,765 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,766 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:52,766 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,766 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,766 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,767 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:57:52,767 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,767 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:52,767 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:52,767 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,768 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:52,768 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,768 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,768 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,768 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:52,768 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,768 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:52,768 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,769 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:52,769 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,769 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,769 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,769 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:52,769 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,769 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:52,769 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,769 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:52,769 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,770 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,770 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,770 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:52,770 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,770 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:52,770 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:52,770 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:52,770 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:52,770 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:52 +08:00

2018-05-09 21:57:54,319 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,321 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:57:54,321 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,321 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:57:54,321 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,324 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:57:54,324 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,324 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,326 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,326 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:57:54,326 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,326 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,328 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:54,328 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,328 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,328 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,329 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:57:54,329 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,329 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,330 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:54,330 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,330 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,330 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,331 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:57:54,331 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,331 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:54,331 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:54,331 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,332 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:54,332 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,332 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,332 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,332 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:57:54,332 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,332 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,333 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:54,333 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,333 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,333 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,333 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:54,333 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,333 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:54,333 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:54,333 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:54,333 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:54,333 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,334 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:54,334 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,334 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,334 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,334 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:54,334 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,334 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:54,334 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:54,334 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:54,334 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:54,334 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,335 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:54,335 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,335 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,335 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,335 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:57:54,335 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,335 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:54,335 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:54,335 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,336 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:54,336 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,336 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,336 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,336 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:54,336 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,336 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:54,336 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,336 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:54,336 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,336 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,336 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:54,337 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:54 +08:00

2018-05-09 21:57:56,372 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,372 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:57:56,372 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,373 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:57:56,373 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,373 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:56,373 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,373 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,374 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,374 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:57:56,374 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,374 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,375 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:56,375 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,375 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,375 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,376 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:57:56,376 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,376 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,376 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:56,376 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,376 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,376 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,377 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:57:56,377 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,377 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:56,377 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:56,377 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,377 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:56,377 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,377 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,377 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,378 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:57:56,378 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,378 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,378 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:56,378 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,378 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,379 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,379 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:56,379 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,379 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:56,379 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:56,379 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:56,379 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:56,379 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,380 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:56,380 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,381 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,381 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,381 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:56,381 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,381 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:56,381 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:56,381 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:56,381 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:56,381 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,382 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:56,382 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,382 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,382 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,382 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:57:56,383 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,383 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:56,383 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:56,383 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,383 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:56,384 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,384 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,384 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,384 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:56,384 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,384 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:56,384 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,384 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:56,384 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,384 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,385 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,385 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:56,385 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,385 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:56,385 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,400 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-09 21:57:56,400 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,400 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,400 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,400 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:56,400 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,400 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:56,400 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:56,402 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:56,402 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:56,402 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:56 +08:00

2018-05-09 21:57:57,348 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,348 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:57:57,348 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,348 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:57:57,348 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,350 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:57:57,350 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,351 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,351 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,352 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:57:57,352 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,352 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,353 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:57,353 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,353 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,353 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,354 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:57:57,354 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,354 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,354 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:57,354 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,354 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,354 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,355 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:57:57,355 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,355 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:57,355 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:57,355 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,357 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:57,357 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,357 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,357 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,358 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:57:57,358 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,358 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,358 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:57,358 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,359 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,359 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,360 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:57,360 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,360 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:57,360 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:57,360 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:57,360 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:57,360 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,361 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:57,361 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,361 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,361 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,362 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:57,362 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,362 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:57,362 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:57,362 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:57,362 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:57,362 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,365 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:57:57,365 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,366 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,366 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,367 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:57:57,368 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,368 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:57,368 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:57,368 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,371 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:57:57,371 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,371 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,371 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,371 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:57,371 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,371 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:57,371 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,372 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:57,372 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,372 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,372 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,372 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:57,372 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,372 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:57,372 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,372 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:57,372 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,372 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,372 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,372 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:57,372 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,373 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:57,373 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:57,373 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:57,373 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:57,373 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:57 +08:00

2018-05-09 21:57:58,260 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,261 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:57:58,261 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,262 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:57:58,262 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,263 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:58,263 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,263 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,264 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,264 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:57:58,264 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,264 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,266 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:58,266 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,266 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,266 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,267 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:57:58,267 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,267 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,267 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:58,267 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,267 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,267 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,268 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:57:58,268 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,268 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:58,268 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:58,268 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,271 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:57:58,271 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,271 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:57:58,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,272 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,274 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:57:58,274 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,274 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:58,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:58,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:58,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:58,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:58,275 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,276 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:58,276 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,276 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,276 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,277 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:58,277 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,277 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:58,277 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:58,277 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:58,277 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:58,277 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,288 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:57:58,288 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,289 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,289 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,289 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:57:58,289 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,290 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:58,290 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:58,290 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,292 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:57:58,292 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,292 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,293 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,293 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:58,293 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,293 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:58,293 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,294 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:58,294 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,294 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,294 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,294 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:58,294 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,294 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:58,294 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,294 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:58,294 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,294 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,295 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,295 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:58,295 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,295 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:58,295 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,295 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:58,295 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,295 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,837 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,837 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:57:58,837 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,837 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:57:58,837 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,841 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:57:58,841 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,842 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,842 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,843 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:57:58,843 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,843 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,843 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:58,844 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,844 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,844 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,844 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:57:58,844 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,844 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,845 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:58,845 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,845 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,845 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,846 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:57:58,846 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,846 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:58,846 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:58,846 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,847 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:58,847 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,847 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,848 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,848 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:57:58,848 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,848 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,849 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:58,849 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,849 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,850 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,850 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:58,850 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,850 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:58,850 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:58,850 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:58,850 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:58,851 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,852 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:58,852 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,853 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,853 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,853 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:58,853 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,854 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:58,854 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:58,854 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:58,854 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:58,854 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,855 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:58,855 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,855 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,856 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,856 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:57:58,856 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,856 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:58,856 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:58,856 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,867 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:57:58,867 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,867 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,867 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,867 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:58,867 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,868 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:58,868 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,868 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:58,868 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,869 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,869 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,869 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:58,869 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,869 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:58,869 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,869 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:58,869 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,870 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,870 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,870 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:58,870 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,870 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:58,870 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:58,870 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:58,871 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:58,871 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:58 +08:00

2018-05-09 21:57:59,317 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,317 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:57:59,317 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,317 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:57:59,317 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,320 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:57:59,320 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,320 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,321 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,321 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:57:59,321 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,321 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,322 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:59,322 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,322 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,322 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,323 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:57:59,323 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,323 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,323 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:59,323 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,324 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,324 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,324 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:57:59,324 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,324 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:59,324 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:59,324 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,325 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:59,325 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,325 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,326 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,326 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:57:59,326 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,326 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,330 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:57:59,330 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,331 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,331 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,332 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:59,332 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,332 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:59,332 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:59,332 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:59,332 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:59,332 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,343 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:57:59,344 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,344 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,344 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,344 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:59,344 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,344 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:59,344 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:59,344 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:59,344 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:59,344 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,345 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:59,345 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,345 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,345 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,345 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 4
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:57:59,345 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,345 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:59,345 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:59,345 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,346 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:59,346 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,346 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,346 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,346 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:59,346 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,346 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:59,346 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,346 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:59,346 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,346 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,347 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,347 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:59,347 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,347 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:59,347 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,347 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:59,347 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,347 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,347 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,347 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:59,347 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,347 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:59,347 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,348 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:59,348 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,348 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,753 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,754 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:57:59,754 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,754 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:57:59,754 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,764 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:57:59,764 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,765 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,765 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,765 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:57:59,765 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,765 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,767 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:59,767 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,767 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,768 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,768 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:57:59,768 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,768 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,768 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:59,768 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,768 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,768 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,769 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:57:59,769 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,769 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:59,769 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:59,769 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,770 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:59,770 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,770 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,771 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,771 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:57:59,771 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,771 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,772 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:59,772 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,772 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,772 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,773 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:59,773 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,773 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:59,773 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:59,773 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:59,773 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:59,773 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,776 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:57:59,776 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,776 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,776 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,776 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:57:59,776 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,776 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:59,776 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:59,776 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:59,776 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:57:59,776 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,788 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:57:59,788 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,788 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,788 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,789 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 5
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:57:59,789 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,789 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:57:59,789 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:57:59,789 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,792 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:57:59,792 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,792 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,793 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,793 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:59,793 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,793 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:57:59,793 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,794 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:59,794 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,794 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,794 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,794 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:59,794 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,794 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:57:59,794 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:57:59,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:57:59,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:57:59,795 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:57:59 +08:00

2018-05-09 21:57:59,797 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:57:59,797 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:57:59,797 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:57:59 +08:00

2018-05-09 21:58:00,160 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,161 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:00,161 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,161 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:00,161 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,163 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:00,163 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,163 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,164 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,164 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:00,164 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,164 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,165 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:00,165 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,166 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,166 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,166 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:00,166 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,166 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:00,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:00,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:00,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,169 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,169 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,169 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,169 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,170 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:00,170 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,170 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,172 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:58:00,172 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,172 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,173 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,173 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:00,173 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,173 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:00,173 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:00,173 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,173 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,174 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,177 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:58:00,177 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,177 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,178 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,179 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:00,179 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,179 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:00,179 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:00,179 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,179 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,179 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,180 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:00,180 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,180 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,181 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,181 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:00,181 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,181 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:00,181 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:00,181 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,182 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,182 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,182 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,183 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,184 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,184 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,184 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:00,184 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,184 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,184 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,184 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,184 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,184 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,560 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,563 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:00,563 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,563 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:00,563 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,566 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:58:00,567 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,567 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,569 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,569 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:00,569 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,569 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,572 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:58:00,572 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,573 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,573 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,573 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:00,573 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,573 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,573 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,573 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,573 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,574 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,574 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:00,574 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,574 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:00,574 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:00,574 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,575 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,575 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,575 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,575 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,575 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:00,575 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,575 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,576 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,576 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,577 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,577 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,577 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:00,577 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,577 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:00,577 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:00,577 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,577 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,577 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,578 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,578 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,578 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,578 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,579 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:00,579 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,579 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:00,579 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:00,579 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,579 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,579 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,579 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,579 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,579 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,580 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,580 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 7
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:00,580 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,580 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:00,580 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:00,580 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,581 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,581 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,581 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,581 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,581 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:00,581 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,581 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,581 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,582 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,582 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,582 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,582 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,582 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:00,582 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,582 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,582 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,582 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,582 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,583 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,583 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,583 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:00,583 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,583 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,583 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,583 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,583 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,583 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,981 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,981 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:00,981 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,981 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:00,981 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,982 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,982 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,982 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,983 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,983 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:00,983 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,983 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:00,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,985 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,985 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:00,985 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,985 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:00,985 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:00,985 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,985 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,985 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,985 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,986 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,986 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:00,986 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,986 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,987 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:00,987 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,987 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,988 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,988 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:00,988 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,988 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:00,988 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:00,988 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,988 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,988 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,988 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:00,988 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,989 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,989 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:00,989 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:00,989 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:00,989 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:00,989 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:00,989 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,989 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:00,989 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:00 +08:00

2018-05-09 21:58:01,012 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 23 ms with result: SqlDataReader

2018-05-09 21:58:01,012 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:01,012 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:01 +08:00

2018-05-09 21:58:01,013 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:01 +08:00

2018-05-09 21:58:01,013 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 8
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:01,013 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:01,013 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:01,013 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:01,013 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:01 +08:00

2018-05-09 21:58:01,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:01,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:01,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:01 +08:00

2018-05-09 21:58:01,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:01 +08:00

2018-05-09 21:58:01,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:01,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:01,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:01,014 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:01 +08:00

2018-05-09 21:58:01,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:01,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:01,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:01 +08:00

2018-05-09 21:58:01,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:01 +08:00

2018-05-09 21:58:01,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:01,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:01,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:01,015 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:01 +08:00

2018-05-09 21:58:01,016 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:01,016 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:01,016 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:01 +08:00

2018-05-09 21:58:01,016 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:01 +08:00

2018-05-09 21:58:01,016 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:01,016 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:01,016 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:58:01,016 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:01 +08:00

2018-05-09 21:58:01,017 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:01,017 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:01,017 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:01 +08:00

2018-05-09 21:58:02,024 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,025 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:02,025 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,025 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:02,025 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,028 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:58:02,028 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,028 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,029 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,029 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:02,029 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,029 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,035 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:58:02,035 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,035 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,035 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,036 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:02,036 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,036 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,041 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:58:02,041 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,041 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,041 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,041 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:02,041 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,041 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:02,042 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:02,042 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,043 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:02,043 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,043 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,043 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,043 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:02,043 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,043 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,044 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:02,044 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,044 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,044 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,044 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:02,044 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,044 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:02,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:02,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:02,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:02,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,045 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:02,045 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,045 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:02,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:02,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:02,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:02,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:02,046 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,046 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:02,046 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,046 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,046 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,047 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 9
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:02,047 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,047 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:02,047 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:02,047 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,053 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 21:58:02,053 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,054 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,054 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,054 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:02,054 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,054 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:02,054 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,055 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:02,055 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,055 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,055 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,055 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:02,055 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,055 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:02,055 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,056 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:02,056 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,056 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,056 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,056 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:02,056 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,056 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:02,056 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,057 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:02,057 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,057 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,462 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,462 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:02,462 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,462 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:02,463 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,465 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:58:02,466 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,466 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,467 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,467 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:02,467 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,467 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,469 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:58:02,470 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,470 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,470 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,470 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:02,470 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,470 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,471 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:02,471 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,471 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,471 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,472 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:02,472 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,472 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:02,472 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:02,472 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,473 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:02,473 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,473 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,474 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,474 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:02,474 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,474 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,477 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:58:02,477 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,478 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,478 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,480 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:02,480 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,481 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:02,481 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:02,481 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:02,481 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:02,481 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,482 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:02,482 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,483 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,483 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,484 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:02,484 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,484 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:02,484 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:02,484 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:02,484 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:02,484 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,485 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:02,485 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,485 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,485 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,486 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:02,486 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,486 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:02,486 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:02,486 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,488 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:58:02,488 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,489 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,489 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,489 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:02,489 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,489 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:02,489 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,498 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:58:02,498 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,499 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,499 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,499 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:02,499 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,499 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:02,499 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,501 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:02,501 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,501 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,501 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,501 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:02,501 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,501 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:02,501 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:02,502 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:02,502 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:02,502 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:02 +08:00

2018-05-09 21:58:03,280 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,280 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:03,280 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,280 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:03,280 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,281 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:03,281 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,282 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,282 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,283 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:03,283 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,283 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,284 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:03,284 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,284 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,284 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,284 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:03,284 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,284 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,285 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:03,285 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,285 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,285 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,286 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:03,286 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,286 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:03,286 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:03,286 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,287 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:03,288 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,288 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,288 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,288 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:03,288 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,288 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,302 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-09 21:58:03,302 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,302 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,303 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,303 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:03,303 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,303 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:03,303 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:03,303 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:03,303 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:03,303 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,304 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:03,304 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,304 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,304 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,305 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:03,305 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,305 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:03,305 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:03,305 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:03,305 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:03,305 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,311 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 21:58:03,311 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,312 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,312 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,312 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:03,312 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,312 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:03,312 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:03,312 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:03,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:03,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:03,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:03,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,315 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:03,315 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,315 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,959 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,960 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:03,960 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,960 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:03,960 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,962 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:03,962 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,962 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,963 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,963 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:03,963 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,963 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,964 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:03,964 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,964 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,965 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,965 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:03,965 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,965 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,965 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:03,965 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,966 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,966 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,966 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:03,966 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,966 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:03,966 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:03,966 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,969 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:58:03,969 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,969 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:03,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,970 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,971 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:03,971 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,971 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,972 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,972 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:03,972 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,972 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:03,972 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:03,973 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:03,973 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:03,973 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,974 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:03,974 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,975 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,975 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,976 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:03,976 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,976 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:03,976 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:03,976 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:03,976 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:03,976 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,977 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:03,977 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,977 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,977 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,978 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:03,978 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,978 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:03,978 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:03,978 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,982 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:58:03,982 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,982 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,982 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,982 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:03,982 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,982 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:03,983 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,983 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:03,983 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:03,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:03,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:03,984 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,985 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,985 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:03,985 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:03,985 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:03,985 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:03,985 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:03 +08:00

2018-05-09 21:58:04,008 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 22 ms with result: SqlDataReader

2018-05-09 21:58:04,008 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,008 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,718 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,718 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:04,718 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,718 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:04,718 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,719 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:04,719 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,719 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,720 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,720 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:04,720 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,720 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,720 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:04,720 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,721 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,721 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,721 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:04,721 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,721 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,722 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:04,722 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,722 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,722 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,722 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:04,723 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,723 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:04,723 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:04,723 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,724 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:04,724 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,724 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,725 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,725 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:04,725 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,725 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,725 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:04,725 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,726 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,726 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,726 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:04,726 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,727 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:04,727 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:04,727 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:04,727 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:04,727 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,737 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:58:04,737 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,737 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,738 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,738 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:04,738 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,738 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:04,738 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:04,738 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:04,738 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:04,738 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,743 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:58:04,743 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,743 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,743 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,744 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:04,744 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,744 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:04,744 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:04,744 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,746 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:58:04,746 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,747 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,747 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,747 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:04,747 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,747 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:04,747 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,747 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:04,747 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,747 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,747 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,747 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:04,748 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,748 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:04,748 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,748 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:04,748 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,748 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,748 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,748 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:04,748 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,748 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:04,748 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:04,748 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:04,748 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:04,749 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:04 +08:00

2018-05-09 21:58:05,126 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,126 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:05,126 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,127 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:05,127 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,129 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:58:05,129 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,129 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,130 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,130 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:05,131 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,131 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,131 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:05,132 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,132 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,132 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,132 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:05,132 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,132 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,134 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:05,134 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,134 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,134 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,135 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:05,135 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,135 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:05,135 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:05,135 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,136 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:05,136 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,136 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,136 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,137 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:05,137 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,137 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,138 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:05,138 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,139 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,139 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,140 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:05,140 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,140 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:05,140 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:05,140 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:05,140 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:05,140 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,142 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:58:05,142 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,142 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,143 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,144 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:05,144 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,144 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:05,144 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:05,144 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:05,144 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:05,144 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,145 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:05,145 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,145 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,145 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,146 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:05,146 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,146 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:05,146 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:05,146 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,163 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 16 ms with result: SqlDataReader

2018-05-09 21:58:05,163 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,163 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,163 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,163 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:05,163 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,163 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:05,163 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:05,164 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:05,165 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:05,165 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:05,165 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:05 +08:00

2018-05-09 21:58:06,208 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,209 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:06,209 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,209 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:06,209 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,212 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:58:06,212 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,213 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,214 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,214 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:06,214 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,214 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,217 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:58:06,217 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,217 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,217 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,217 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:06,217 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,217 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,218 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:06,218 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,218 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,218 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,218 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:06,219 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,219 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:06,219 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:06,219 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,219 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:06,219 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,219 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,219 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,220 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:06,220 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,220 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,220 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:06,220 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,220 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,221 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,221 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:06,221 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,221 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:06,221 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:06,221 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:06,221 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:06,221 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,222 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:06,222 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,222 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,223 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,224 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:06,224 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,224 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:06,224 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:06,224 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:06,224 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:06,224 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,243 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 18 ms with result: SqlDataReader

2018-05-09 21:58:06,243 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,243 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,243 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,244 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 10
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:06,244 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,244 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:06,244 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:06,244 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,245 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:06,245 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,246 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,246 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,246 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:06,246 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,246 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:06,246 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,247 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:06,247 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,247 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,247 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,247 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:06,247 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,247 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:06,247 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,247 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:06,247 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,248 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,248 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,248 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:06,248 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,248 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:06,248 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:06,248 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:06,248 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:06,248 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:06 +08:00

2018-05-09 21:58:07,395 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,396 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:07,396 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,396 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:07,397 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,414 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 17 ms with result: SqlDataReader

2018-05-09 21:58:07,414 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,414 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,415 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,415 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:07,415 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,415 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,420 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:58:07,420 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,420 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,420 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,420 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:07,420 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,420 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,421 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:07,421 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,421 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,421 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,422 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:07,422 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,422 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:07,422 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:07,422 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,423 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:07,423 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,423 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:07,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,425 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:07,426 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,426 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,426 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,426 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:07,426 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,426 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:07,426 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:07,426 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:07,427 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:07,427 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,427 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:07,427 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,427 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,427 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:07,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:07,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:07,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:07,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:07,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,434 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:58:07,434 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,434 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,435 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,435 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 9
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:07,436 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,436 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:07,436 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:07,436 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,437 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:07,438 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,438 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,438 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,439 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:07,439 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,439 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:07,439 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,442 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:58:07,442 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,442 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,442 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,442 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:07,442 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,442 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:07,442 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,443 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:07,443 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,443 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,443 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,443 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:07,443 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,443 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:07,443 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:07,443 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:07,443 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:07,443 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:07 +08:00

2018-05-09 21:58:13,375 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,375 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:13,375 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,375 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:13,375 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,375 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:13,375 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,375 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,376 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,376 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:13,376 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,376 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,376 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:13,376 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,376 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,377 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,377 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:13,377 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,377 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,377 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:13,377 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,377 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,378 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,378 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:13,378 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,378 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:13,378 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:13,378 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,379 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:13,379 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,379 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,379 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,379 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:13,379 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,379 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,380 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:13,380 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,380 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,380 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:13,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:13,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:13,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:13,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:13,381 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,381 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:13,381 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,381 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,381 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,382 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:13,382 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,382 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:13,382 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:13,382 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:13,382 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:13,382 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,382 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:13,382 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,382 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,383 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,383 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:13,383 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,383 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:13,383 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:13,383 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,383 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:13,383 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,384 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,384 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,384 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:13,384 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,384 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:13,384 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,384 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:13,384 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,384 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:13,385 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:13,386 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:13 +08:00

2018-05-09 21:58:16,419 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,419 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:16,420 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,420 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:16,420 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,421 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:16,421 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,422 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,422 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,422 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:16,422 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,423 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,423 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:16,423 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:16,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:16,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,424 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,425 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:16,425 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,425 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:16,425 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:16,425 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,425 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:16,426 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,426 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,427 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,427 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:16,427 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,427 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,427 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:16,427 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,427 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,428 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,428 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:16,428 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,428 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:16,428 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:16,428 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:16,428 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:16,428 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,428 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:16,428 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,429 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,429 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,429 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:16,429 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,429 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:16,429 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:16,429 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:16,429 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:16,429 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,430 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:16,430 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,430 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,430 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,430 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:16,430 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,430 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:16,430 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:16,430 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,431 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:16,431 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,431 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,431 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,431 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:16,431 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,431 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:16,431 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:16,432 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:16,433 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:16,433 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:16,433 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:16 +08:00

2018-05-09 21:58:17,028 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,028 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:17,028 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,028 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:17,028 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,030 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:17,030 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,030 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,032 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,032 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:17,032 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,032 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,033 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:17,033 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,033 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,034 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,034 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:17,034 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,034 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,035 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:17,035 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,035 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,035 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,036 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:17,036 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,036 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:17,036 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:17,036 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,037 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:17,037 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,038 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,038 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,039 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:17,039 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,039 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,040 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:17,041 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,041 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,042 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,042 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:17,042 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,042 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:17,042 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:17,042 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:17,042 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:17,042 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,043 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:17,043 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,043 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,043 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,043 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:17,043 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,043 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:17,043 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:17,043 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:17,043 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:17,044 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,044 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:17,044 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,044 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,044 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,045 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:17,045 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,045 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:17,045 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:17,045 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:17,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,045 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,046 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:17,046 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,046 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:17,046 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,046 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:17,046 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,046 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,046 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,046 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:17,046 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,046 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:17,046 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,047 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:17,047 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,047 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,047 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,047 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:17,047 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,047 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:17,047 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:17,047 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:17,047 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:17,048 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:17 +08:00

2018-05-09 21:58:18,207 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,207 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:18,207 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,207 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:18,207 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,209 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:18,209 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,209 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,210 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,210 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:18,210 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,210 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,211 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:18,211 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,211 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,211 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,211 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:18,212 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,212 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,212 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:18,212 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,212 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,212 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,212 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:18,212 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,212 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:18,212 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:18,212 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,213 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:18,213 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,213 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,213 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,213 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:18,213 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,213 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,214 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:18,214 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,214 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,214 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,214 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:18,214 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,214 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:18,214 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:18,214 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:18,214 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:18,214 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,215 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:18,215 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,215 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,215 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,215 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:18,215 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,215 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:18,215 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:18,215 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:18,215 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:18,215 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,216 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:18,216 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,216 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,216 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,216 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 9
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:18,216 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,216 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:18,216 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:18,216 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,217 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:18,217 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,217 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,217 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,217 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:18,217 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,217 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:18,217 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,217 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:18,217 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,217 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,217 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:18,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:18,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:18,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:18,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:18,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:18,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:18,218 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:18,219 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:18 +08:00

2018-05-09 21:58:19,281 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,283 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:19,283 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,283 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:19,283 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,287 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:58:19,287 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,288 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,289 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,290 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:19,290 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,290 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,291 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:19,291 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,291 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,292 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,292 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:19,292 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,292 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,292 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:19,292 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,292 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,292 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,293 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:19,293 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,293 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:19,293 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:19,293 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,293 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:19,293 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,294 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,294 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,294 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:19,294 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,294 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,295 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:19,295 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,295 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,296 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,296 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:19,296 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,296 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:19,296 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:19,296 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:19,296 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:19,296 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,297 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:19,297 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,297 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,297 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,298 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:19,298 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,298 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:19,298 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:19,298 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:19,298 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:19,298 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,301 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:58:19,301 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,301 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,302 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,302 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 10
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:19,302 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,302 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:19,302 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:19,302 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,303 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:19,303 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,303 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,303 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,303 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:19,303 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,303 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:19,303 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,304 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:19,304 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,304 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,304 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,304 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:19,304 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,304 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:19,304 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,304 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:19,305 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,305 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,305 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,305 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:19,305 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,305 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:19,305 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:19,305 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:19,305 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:19,305 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:19 +08:00

2018-05-09 21:58:20,026 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,027 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:20,027 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,027 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:20,027 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,033 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 21:58:20,033 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,034 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,035 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,035 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:20,036 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,036 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,037 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:20,038 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,038 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,038 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,039 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:20,039 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,039 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,041 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:58:20,041 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,041 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,041 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:20,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:20,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:20,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,042 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:20,042 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,042 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,043 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,043 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:20,043 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,043 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,043 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:20,043 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,044 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,044 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,044 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:20,044 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,044 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:20,044 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:20,044 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:20,044 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:20,044 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,045 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:20,045 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,045 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,045 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,045 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:20,045 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,045 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:20,045 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:20,045 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:20,045 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:20,045 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,046 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:20,046 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,046 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,046 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,046 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:20,047 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,047 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:20,047 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:20,047 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,047 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:20,047 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,047 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,047 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,048 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:20,048 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,048 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:20,048 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,048 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:20,048 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,048 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,048 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,048 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:20,048 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,048 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:20,048 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,048 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:20,049 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,049 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,049 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,049 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:20,049 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,049 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:20,049 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:20,049 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:20,049 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:20,049 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:20 +08:00

2018-05-09 21:58:21,228 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,228 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:21,228 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,229 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:21,229 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,229 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:21,229 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,229 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,230 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,230 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:21,230 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,230 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,230 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:21,230 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,230 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,231 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,231 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:21,231 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,231 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,232 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:21,232 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,232 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,232 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,232 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:21,232 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,232 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:21,232 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:21,232 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,233 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:21,233 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,233 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,233 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,233 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:21,233 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,233 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,234 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:21,234 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,234 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,234 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,234 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:21,234 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,234 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:21,234 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:21,234 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:21,234 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:21,234 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,235 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:21,235 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,235 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,235 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,236 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:21,236 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,236 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:21,236 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:21,236 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:21,236 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:21,236 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,236 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:21,236 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,236 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,236 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,237 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 10
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:58:21,237 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,237 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:21,237 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:21,237 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,237 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:21,237 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,238 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,238 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,238 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:21,238 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,238 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:21,238 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,238 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:21,238 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,238 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,238 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,238 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:21,238 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,238 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:21,238 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,239 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:21,239 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,239 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,239 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,239 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:58:21,239 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,239 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:21,239 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:21,240 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:21,240 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:21,240 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:21 +08:00

2018-05-09 21:58:22,084 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,084 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:58:22,084 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:22,084 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:58:22,084 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,085 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:22,085 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:22,085 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,086 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,086 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:58:22,086 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:22,086 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,086 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:22,086 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:22,086 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,086 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,087 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:58:22,087 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:22,087 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,087 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:22,087 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:22,087 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,087 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,088 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:58:22,088 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:22,088 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:22,088 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:22,088 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,088 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:22,088 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:22,088 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,089 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,089 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:58:22,089 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:22,089 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,090 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:22,090 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:22,090 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,090 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,091 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:22,091 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:22,091 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:22,091 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:22,091 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:58:22,091 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:22,091 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,092 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:22,092 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:22,092 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,092 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,092 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:58:22,093 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:22,093 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:58:22,093 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:58:22,093 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:58:22,093 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:58:22,093 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,093 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:58:22,093 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:58:22,093 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,094 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:58:22 +08:00

2018-05-09 21:58:22,094 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
