2018-05-09 21:51:51,979 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,985 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:51,985 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,993 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:51:51,993 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,994 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,994 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,994 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:51,994 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,994 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:51,994 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,995 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:51,995 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,995 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,996 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,996 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:51,996 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,996 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:51,996 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,997 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:51,997 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,997 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:52,647 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,647 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:52,648 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,648 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:52,648 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,651 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:51:52,651 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,652 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,653 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,653 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:52,653 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,653 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,654 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:52,654 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,655 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,655 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,655 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:52,655 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,655 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,656 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:52,656 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,656 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,656 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,657 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:52,657 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,657 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:52,657 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:52,657 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,657 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:52,657 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,658 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,658 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,659 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:52,659 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,659 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,660 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:52,660 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,660 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,660 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,661 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:52,661 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,661 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:52,661 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:52,661 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:52,661 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:52,661 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,662 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:52,662 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,662 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,663 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,663 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:52,664 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,664 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:52,664 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:52,664 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:52,664 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:52,664 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,666 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:51:52,666 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,666 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,667 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,670 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:52,670 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,670 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:52,670 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:52,670 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,671 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:52,671 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,672 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,672 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,672 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:52,672 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,672 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:52,672 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,673 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:52,673 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,673 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,673 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,674 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:52,674 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,674 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:52,674 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,689 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-09 21:51:52,689 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,689 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,689 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,689 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:52,689 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,689 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:52,689 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:52,689 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:52,689 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:52,689 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:52 +08:00

2018-05-09 21:51:53,202 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,202 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:53,202 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,202 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:53,202 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,224 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 21 ms with result: SqlDataReader

2018-05-09 21:51:53,224 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,224 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,225 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,225 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:53,225 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,225 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,228 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:51:53,228 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,228 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,228 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,228 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:53,228 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,228 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,229 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,229 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,229 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,229 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,230 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:53,230 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,230 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:53,230 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:53,230 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,230 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,230 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,230 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,231 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,231 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:53,231 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,231 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,232 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,232 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,232 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,233 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,233 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:53,233 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,233 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:53,233 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:53,233 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,233 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,233 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,237 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:51:53,237 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,237 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,238 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,238 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:53,238 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,238 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:53,238 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:53,238 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,238 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,238 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,247 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:51:53,247 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,247 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,248 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,250 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:53,250 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,250 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:53,250 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:53,250 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,251 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:53,251 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,252 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,252 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,252 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:53,252 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,252 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,252 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,252 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,252 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,252 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,253 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,253 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:53,253 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,253 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,253 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,253 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,253 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,253 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,253 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,253 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:53,254 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,254 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,254 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,254 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,254 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,254 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,539 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,539 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:53,539 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,539 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:53,539 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,540 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,540 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,540 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,540 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,540 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:53,540 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,540 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,541 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,541 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,541 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,541 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,541 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:53,541 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,541 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,542 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,542 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,542 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,542 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,542 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:53,542 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,542 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:53,542 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:53,542 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,543 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,543 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,543 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,543 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,543 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:53,543 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,543 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,543 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,543 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,544 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,544 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,544 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:53,544 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,544 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:53,544 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:53,544 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,544 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,544 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,545 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,545 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,545 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,545 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,545 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:53,545 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,545 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:53,545 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:53,545 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,545 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,545 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,546 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,546 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,546 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,546 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,547 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:53,548 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,548 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:53,548 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:53,548 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,548 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,548 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,548 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,549 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,549 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:53,549 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,549 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,549 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,550 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,550 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,550 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,550 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,550 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:53,550 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,550 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,550 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,551 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,551 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,551 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,551 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,551 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:53,551 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,551 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,551 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,552 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,552 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,553 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,830 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,831 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:53,831 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,831 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:53,831 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,837 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:51:53,837 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,838 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,839 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,839 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:53,839 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,839 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,841 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:53,841 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,841 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,842 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,842 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:53,842 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,842 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,843 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,843 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,844 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,844 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,845 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:53,845 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,845 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:53,845 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:53,845 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,846 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,846 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,846 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,847 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,847 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:53,847 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,848 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,850 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:51:53,850 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,850 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,851 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,852 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:53,852 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,852 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:53,852 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:53,852 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,852 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,852 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,853 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,853 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,853 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,853 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,853 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:53,853 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,853 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:53,853 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:53,853 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,853 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,853 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,854 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,854 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,854 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,854 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,855 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:53,855 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,855 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:53,855 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:53,855 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,856 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,856 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,856 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,856 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,856 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:53,856 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,856 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,856 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,857 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,857 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,857 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,857 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,857 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:53,857 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,857 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,857 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,857 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:53,857 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,858 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,858 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,858 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:53,858 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,858 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:53,858 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:53,862 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:51:53,862 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:53,863 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:53 +08:00

2018-05-09 21:51:54,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,153 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:54,153 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,153 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:54,153 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,154 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:54,154 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,154 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,155 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,155 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:54,155 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,155 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,157 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:54,157 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,157 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,158 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,158 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:54,158 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,158 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,158 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:54,158 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,158 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,158 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,159 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:54,159 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,159 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:54,159 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:54,159 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,160 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:54,160 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,160 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,160 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,160 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:54,161 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,161 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,161 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:54,161 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,162 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,162 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,162 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:54,163 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,163 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:54,163 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:54,163 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:54,163 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:54,163 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,164 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:54,164 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,164 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,164 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,165 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:54,165 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,165 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:54,165 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:54,165 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:54,165 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:54,165 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,167 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:54,167 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,167 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,168 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,168 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:54,168 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,168 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:54,168 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:54,168 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,180 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:51:54,180 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,181 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,181 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,181 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:54,181 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,181 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:54,181 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,182 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:54,182 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,182 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,182 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,182 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:54,182 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:54,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:54,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:54,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:54,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:54,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:54,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:54,183 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:54 +08:00

2018-05-09 21:51:55,118 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,118 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:55,118 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,118 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:55,118 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,120 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,120 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:55,120 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,121 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,121 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,121 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,121 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,122 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,122 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:55,122 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,122 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,122 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,122 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,123 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,123 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,123 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:55,123 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,123 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:55,123 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:55,123 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,124 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,124 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,124 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,125 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,125 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:55,125 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,125 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,126 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,126 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,126 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,127 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,127 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:55,127 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,127 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:55,127 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:55,127 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:55,127 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:55,127 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,130 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:51:55,130 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,130 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,131 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,131 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:55,131 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,131 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:55,131 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:55,131 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:55,131 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:55,132 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,133 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:55,133 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,133 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,133 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,134 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:55,134 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,134 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:55,134 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:55,134 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,135 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,135 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,135 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,135 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,135 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:55,136 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,136 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:55,136 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,145 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:51:55,145 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,145 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,145 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,145 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:55,145 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:55,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:55,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:55,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,728 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,728 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:55,728 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,729 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:55,729 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,734 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:51:55,734 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,734 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,735 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,735 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:55,735 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,735 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,736 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,736 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,736 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,736 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,737 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:55,737 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,737 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,737 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,737 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,737 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,738 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,738 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:55,738 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,738 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:55,738 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:55,738 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,739 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:55,739 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,740 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,740 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,740 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:55,740 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,740 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,741 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,741 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,742 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,742 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,742 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:55,742 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,742 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:55,742 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:55,742 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:55,742 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:55,742 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,743 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,743 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,743 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,743 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,743 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:55,743 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,743 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:55,743 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:55,743 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:55,743 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:55,743 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,744 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,744 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,744 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,744 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,745 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:55,745 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,745 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:55,745 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:55,745 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,745 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,745 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,745 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,746 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,746 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:55,746 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,746 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:55,746 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,746 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,746 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,746 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,746 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,746 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:55,746 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,746 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:55,747 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,747 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:55,747 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,747 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,747 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,747 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:55,747 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,747 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:55,747 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:55,755 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:51:55,755 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:55,755 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:55 +08:00

2018-05-09 21:51:56,151 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,151 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:56,151 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,151 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:56,151 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,153 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,153 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:56,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,155 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,155 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,155 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:56,155 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,155 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,156 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,156 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,156 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,156 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:56,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,158 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,158 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,158 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,158 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,159 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:56,159 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,159 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,160 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,160 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,160 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,160 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,161 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:56,161 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,161 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,161 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,161 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,161 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,161 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:51:56,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:56,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,185 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 19 ms with result: SqlDataReader

2018-05-09 21:51:56,185 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,185 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,186 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,186 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:56,186 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,186 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,186 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,186 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,195 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:51:56,195 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,195 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,195 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,195 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:56,195 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,195 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,195 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,196 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,196 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,196 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,196 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,196 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:56,196 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,196 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,196 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,197 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,197 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,197 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,197 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,197 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:56,197 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,197 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,197 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,197 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,197 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,197 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,421 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,422 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:56,422 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,422 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:56,422 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,423 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,423 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,423 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,424 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,425 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:56,425 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,425 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,425 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,425 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,425 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:56,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,427 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,427 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,427 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:56,427 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,428 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,428 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,428 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,428 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,428 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,428 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,429 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,429 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:56,429 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,429 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,430 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,430 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,430 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,430 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,431 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:56,431 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,431 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,431 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,431 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,431 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,431 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,432 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,432 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,432 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,433 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,433 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:56,433 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,433 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,433 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,433 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,433 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,433 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,434 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,434 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,434 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,434 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,435 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 4
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:56,435 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,435 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,435 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,435 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,436 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,436 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,436 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,436 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,436 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:56,436 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,436 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,437 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,437 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,437 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,437 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,437 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,437 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:56,437 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,437 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,437 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,438 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,438 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,438 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,438 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,438 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:56,438 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,438 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,438 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,438 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,438 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,439 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,643 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,643 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:56,643 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,643 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:56,643 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,643 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,644 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,645 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:56,645 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,645 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,645 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,645 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,645 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,645 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,646 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:56,646 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,646 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,646 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,646 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,646 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,646 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,647 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:56,647 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,647 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,647 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,647 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,647 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,647 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,647 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,648 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,648 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:56,648 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,648 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,648 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,648 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,648 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,649 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,649 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:56,649 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,649 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,649 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,649 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,649 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,649 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,649 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,649 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,649 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,650 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,650 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:56,650 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,650 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,650 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,650 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,650 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,650 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,650 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,651 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,651 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,651 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,651 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 5
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:56,651 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,651 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,651 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,651 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,652 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,652 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,652 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,652 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,652 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:56,652 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,652 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,652 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,654 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,654 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,654 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,915 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,916 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:56,916 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,916 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:56,916 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,916 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,916 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,916 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,917 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,917 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:56,917 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,917 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,918 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,918 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,918 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,918 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,918 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:56,918 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,918 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,919 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,919 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,919 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,919 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,919 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:56,919 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,919 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,919 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,919 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,920 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,920 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,920 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,920 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,920 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:56,920 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,920 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,921 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,921 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,921 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,921 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,922 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:56,922 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,922 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,922 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,922 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,922 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,922 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,922 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,922 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,922 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,923 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,923 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:56,923 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,923 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,923 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,923 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,924 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,924 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,924 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,924 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,924 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,925 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,925 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:56,925 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,925 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:56,925 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:56,925 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,930 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:51:56,930 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,931 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,931 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,932 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:56,932 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,932 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,932 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,934 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:51:56,934 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,934 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,934 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,934 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:56,934 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,935 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,935 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,935 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,935 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,935 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,935 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,935 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:56,935 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,935 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:51:56,935 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:56,935 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:56,935 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:56,936 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:56 +08:00

2018-05-09 21:51:57,137 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,138 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:57,138 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,138 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:57,138 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,139 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:57,139 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,140 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,141 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,142 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:57,142 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,142 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,142 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:57,142 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,142 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,143 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,144 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:57,144 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,144 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,144 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:57,145 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,145 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,145 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,146 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:57,146 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,146 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:57,146 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:57,146 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,147 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:57,147 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,147 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,148 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,149 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:57,149 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,149 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,149 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:57,149 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,150 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,150 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,151 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:57,152 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,152 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:57,152 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:57,152 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:57,152 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:57,152 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:57,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,152 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,153 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:57,153 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,153 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:57,153 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:57,153 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:57,153 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:57,153 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,153 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:57,153 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,153 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,156 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 7
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:57,156 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,156 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:57,156 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:57,156 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,156 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:57,156 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,157 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,157 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,157 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:57,157 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,157 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:57,157 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,157 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:57,157 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,158 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,158 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,158 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:57,158 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,158 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:57,158 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,161 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:51:57,161 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,162 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,162 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,162 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:57,162 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,162 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:51:57,162 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,164 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:57,164 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,164 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,567 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,568 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:57,568 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,568 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:57,568 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,569 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:57,569 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,569 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,570 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,570 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:57,570 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,570 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,571 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:57,571 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,572 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,572 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,572 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:57,572 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,572 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,573 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:57,573 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,573 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,573 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,574 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:57,574 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,574 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:57,574 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:57,574 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,574 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:57,574 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,575 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,575 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,575 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:57,575 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,575 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,576 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:57,576 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,576 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,576 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,578 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:57,578 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,578 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:57,578 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:57,578 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:57,578 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:57,578 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,579 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:57,579 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,579 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,579 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,580 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:57,580 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,580 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:57,580 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:57,580 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:57,580 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:57,580 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,581 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:57,581 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,581 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,581 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,584 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 8
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:57,584 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,584 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:57,584 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:57,584 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,602 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 18 ms with result: SqlDataReader

2018-05-09 21:51:57,602 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,602 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,603 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,603 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:57,603 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,603 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:57,603 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,604 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:57,604 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,604 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,604 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,604 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:57,605 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,605 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:57,605 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,605 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:57,605 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,605 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,605 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,605 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:57,605 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,606 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:51:57,606 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:57,609 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:51:57,609 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:57,609 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:57 +08:00

2018-05-09 21:51:58,414 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,415 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:58,415 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,415 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:58,415 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,418 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:51:58,418 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,418 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,419 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,419 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:58,419 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,419 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,421 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:58,421 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,421 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,421 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,421 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:58,421 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,421 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,422 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:58,422 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,422 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,422 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,423 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:58,423 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,423 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:58,423 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:58,423 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,423 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:58,423 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,423 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,424 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,424 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:58,424 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,424 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,425 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:58,425 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,425 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,425 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:58,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:58,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:58,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:58,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:58,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,427 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:58,427 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,427 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,427 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:58,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:58,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:58,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:58,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:58,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,428 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:58,428 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,429 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,429 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,431 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 9
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:58,431 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,431 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:58,431 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:58,431 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,443 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:51:58,443 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,443 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,443 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,443 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:58,443 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,443 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:58,443 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,444 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:58,444 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,444 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,444 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,444 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:58,444 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,444 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:58,444 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,444 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:58,444 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,444 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,445 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,445 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:58,445 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,445 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:58,445 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:58,445 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:58,445 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:58,445 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:58 +08:00

2018-05-09 21:51:59,150 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,150 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:59,150 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,150 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:59,150 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,151 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,151 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,152 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,152 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,154 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:59,154 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,154 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,155 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,155 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,155 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,155 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,155 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:59,156 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,156 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,156 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,156 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,156 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,156 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,157 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:59,157 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,157 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:59,157 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:59,157 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,158 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,158 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,158 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,158 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,159 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:59,159 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,159 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,160 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,160 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,160 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,160 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,161 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:59,161 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,161 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:59,161 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:59,161 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:59,161 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:59,161 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,162 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,162 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,162 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,162 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,163 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:59,163 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,163 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:59,163 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:59,163 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:59,163 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:59,163 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,163 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,163 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,163 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,164 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,164 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 10
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:59,164 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,164 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:59,164 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:59,164 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,165 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:59,166 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,166 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:59,166 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,166 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,166 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,166 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,166 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,166 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:59,166 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,166 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:59,166 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,167 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,167 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,167 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,167 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,167 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:59,167 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,167 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:59,167 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,167 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,167 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,167 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,944 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,944 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:59,945 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,945 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:59,945 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,952 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:51:59,953 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,953 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,954 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,954 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:59,954 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,954 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,955 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,955 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,955 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,955 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,956 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:59,956 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,956 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,956 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,956 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,957 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,957 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,957 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:59,957 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,957 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:59,957 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:59,957 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,959 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:59,959 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,959 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,959 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,960 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:59,960 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,960 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,961 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,961 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,961 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,961 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,962 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:59,962 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,962 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:59,962 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:59,962 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:59,962 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:59,962 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,963 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,963 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,963 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,963 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,965 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:59,965 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,965 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:59,965 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:59,965 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:59,965 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:59,965 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,974 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:51:59,974 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,974 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,974 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,974 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:59,975 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,975 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:59,975 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:59,975 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,982 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:51:59,982 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,983 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,983 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,983 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:59,983 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,983 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:59,983 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:59,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:59,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:59,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:59,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:59 +08:00

2018-05-09 21:51:59,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:59,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:59,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:59 +08:00

2018-05-09 21:52:01,021 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,022 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:52:01,022 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,022 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:52:01,022 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,023 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:01,023 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,023 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,024 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,024 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:52:01,024 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,024 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,025 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:01,025 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,025 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,025 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,026 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:52:01,026 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,026 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,026 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:01,026 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,027 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,027 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,027 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:52:01,027 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,027 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:01,027 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:01,027 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,028 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:01,028 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,028 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,028 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,029 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:52:01,029 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,029 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,029 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:01,029 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,030 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,030 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,031 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:52:01,031 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,031 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:01,031 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:01,031 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:52:01,031 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:52:01,031 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,031 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:01,032 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,032 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,032 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,033 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:52:01,033 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,033 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:01,033 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:01,033 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:52:01,033 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:52:01,033 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,033 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:01,033 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,033 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,034 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,037 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 12
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:52:01,037 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,037 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:01,037 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:01,037 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:01,037 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:01,037 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:01,037 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:01 +08:00

2018-05-09 21:52:02,157 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,157 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:52:02,157 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,157 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:52:02,157 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,158 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:02,158 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,159 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,159 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,160 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:52:02,160 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,160 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,160 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:02,160 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,160 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,161 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,161 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:52:02,161 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,161 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,164 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:52:02,164 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,164 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,164 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,165 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:52:02,165 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,165 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:02,165 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:02,165 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,167 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:52:02,167 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,168 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,168 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,168 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:52:02,168 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,168 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,169 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:02,169 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,169 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,170 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,170 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:52:02,170 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,170 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:02,170 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:02,170 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:52:02,170 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:52:02,170 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,171 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:02,171 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,171 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,171 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,172 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:52:02,172 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,172 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:02,172 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:02,172 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:52:02,172 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:52:02,172 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,189 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 17 ms with result: SqlDataReader

2018-05-09 21:52:02,189 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,190 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,190 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,192 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 13
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:52:02,192 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,192 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:02,192 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:02,192 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:02,211 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 19 ms with result: SqlDataReader

2018-05-09 21:52:02,211 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:02,212 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:02 +08:00

2018-05-09 21:52:03,238 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,239 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:52:03,239 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,239 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:52:03,239 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,242 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:52:03,242 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,242 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,243 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,244 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:52:03,244 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,244 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,246 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:52:03,246 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,246 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,247 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,247 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:52:03,247 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,247 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,248 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:03,248 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,248 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,248 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,249 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:52:03,249 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,249 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:03,249 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:03,249 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,251 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:52:03,251 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,251 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,251 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,252 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:52:03,252 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,252 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,253 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:03,253 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,253 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,253 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,254 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:52:03,254 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,254 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:03,254 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:03,254 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:52:03,254 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:52:03,254 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,255 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:52:03,255 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,256 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,256 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,256 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:52:03,257 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,257 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:03,257 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:03,257 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:52:03,257 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:52:03,257 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,268 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:52:03,268 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,268 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,269 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,271 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 14
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:52:03,271 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,271 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:03,271 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:03,271 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:03,275 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:52:03,275 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:03,276 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:03 +08:00

2018-05-09 21:52:04,012 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:52:04,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:52:04,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,020 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 21:52:04,021 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,021 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,022 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,022 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:52:04,022 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,022 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,023 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:04,023 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,023 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,023 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,023 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:52:04,023 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,023 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,024 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:04,024 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,024 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,024 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,024 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:52:04,024 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,024 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:04,024 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:04,024 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,025 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:04,025 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,025 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,025 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,026 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:52:04,026 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,026 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:04,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,026 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,027 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:52:04,027 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,027 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:04,027 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:04,027 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:52:04,027 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:52:04,027 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,028 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:04,028 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,028 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,028 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,029 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:52:04,029 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,029 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:04,029 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:04,029 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:52:04,029 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:52:04,029 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,029 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:04,029 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,029 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,029 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,032 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 15
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:52:04,032 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,032 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:04,032 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:04,032 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,035 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:52:04,035 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,035 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,828 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,828 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:52:04,828 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,828 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:52:04,828 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:04,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,829 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,830 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:52:04,830 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,830 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,830 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:04,830 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,830 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,830 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,830 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:52:04,830 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,830 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,831 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:04,831 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,831 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,831 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,831 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:52:04,831 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,831 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:04,831 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:04,831 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,832 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:04,832 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,832 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,832 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,833 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:52:04,833 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,833 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,833 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:04,833 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,833 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,834 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,834 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:52:04,834 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,834 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:04,834 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:04,834 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:52:04,834 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:52:04,834 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,834 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:04,834 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,834 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,835 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,835 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:52:04,835 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,835 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:04,835 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:04,835 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:52:04,835 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:52:04,835 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,836 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:04,836 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,836 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,836 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,838 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 16
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:52:04,838 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,838 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:04,838 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:04,838 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:04,847 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:52:04,847 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:04,847 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:04 +08:00

2018-05-09 21:52:05,658 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,660 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:52:05,660 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,660 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:52:05,660 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,664 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:52:05,664 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,664 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,666 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,667 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:52:05,667 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,667 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,668 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:52:05,668 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,668 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,669 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,669 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:52:05,669 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,669 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,672 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:52:05,672 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,672 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,672 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,673 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:52:05,673 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,673 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:05,673 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:05,673 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,673 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:05,673 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,674 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,674 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,674 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:52:05,674 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,674 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,675 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:05,675 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,675 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,675 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,676 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:52:05,676 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,676 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:05,676 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:05,676 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:52:05,676 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:52:05,676 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,677 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:05,677 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,677 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,677 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,678 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:52:05,678 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,678 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:05,678 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:05,678 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:52:05,678 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:52:05,678 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,679 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:05,679 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,679 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,679 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,682 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 17
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:52:05,682 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,682 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:05,682 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:05,682 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:05,686 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:52:05,686 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:05,686 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:05 +08:00

2018-05-09 21:52:06,387 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,389 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:52:06,389 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,389 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:52:06,389 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,408 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 19 ms with result: SqlDataReader

2018-05-09 21:52:06,408 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,409 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,409 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,409 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:52:06,409 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,409 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,411 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:52:06,411 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,411 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,412 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,412 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:52:06,412 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,412 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,422 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:52:06,422 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,423 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,423 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,423 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:52:06,423 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,423 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:06,423 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:06,423 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,423 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:06,423 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,424 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,424 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,424 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:52:06,424 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,424 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,425 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:06,425 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,425 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,425 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:52:06,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:06,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:06,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:52:06,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:52:06,426 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,426 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:06,426 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,426 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,426 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,427 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:52:06,427 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,427 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:06,427 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:06,427 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:52:06,427 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:52:06,427 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,427 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:52:06,427 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,428 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,428 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,429 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 18
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:52:06,429 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,429 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:52:06,429 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:52:06,429 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:52:06 +08:00

2018-05-09 21:52:06,432 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:52:06,432 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:52:06,432 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:52:06 +08:00

2018-05-09 21:54:02,528 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,528 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:02,528 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,528 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:02,528 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,530 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:02,530 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,530 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,531 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,531 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:02,531 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,531 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,532 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:02,532 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,532 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,532 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,532 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:02,532 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,532 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,533 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:02,533 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,533 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,533 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,533 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:02,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:02,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:02,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,534 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:02,534 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,534 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,535 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:02,535 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,535 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,535 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:02,535 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,535 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,536 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,536 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:02,536 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,536 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:02,536 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:02,536 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:02,536 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:02,536 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,537 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:02,537 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,538 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,538 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,539 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:02,539 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,539 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:02,539 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:02,539 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:02,539 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:02,539 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,540 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:02,540 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,540 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,541 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,541 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:02,541 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,541 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:02,541 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:02,541 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,542 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:02,542 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,543 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,543 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,543 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:02,543 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,543 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:02,543 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,544 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:02,544 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,545 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,545 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,545 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:02,545 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,545 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:02,545 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,545 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:02,545 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,546 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,546 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,546 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:02,546 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,546 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:02,546 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:02,546 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:02,546 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:02,547 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:02 +08:00

2018-05-09 21:54:04,114 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,115 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:04,115 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,115 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:04,115 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,115 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:04,115 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,116 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,116 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,117 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:04,117 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,117 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,117 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:04,117 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,118 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,118 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,118 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:04,118 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,118 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,118 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:04,118 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:04,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:04,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:04,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,120 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:04,120 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,120 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,120 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:04,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,121 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,121 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:04,121 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,122 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,122 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,123 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:04,123 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,123 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:04,123 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:04,123 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:04,123 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:04,123 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,123 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:04,123 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,124 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,124 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,125 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:04,125 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,125 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:04,125 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:04,125 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:04,125 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:04,125 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,126 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:04,126 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,126 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,126 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,127 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:04,127 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,127 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:04,127 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:04,127 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,127 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:04,127 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,128 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,128 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,128 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:04,128 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,128 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:04,128 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,129 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:04,129 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,129 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,129 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,129 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:04,129 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,129 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:04,129 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,130 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:04,130 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,130 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,130 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,130 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:04,130 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,130 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:04,130 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:04,131 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:04,131 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:04,131 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:04 +08:00

2018-05-09 21:54:37,410 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,410 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:37,410 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,410 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:37,411 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,411 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:37,411 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,412 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:37,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:37,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,413 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,414 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,414 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:37,414 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,415 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,415 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:37,415 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,416 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,416 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,416 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:37,417 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,417 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:37,417 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:37,417 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,418 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:37,419 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,419 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,419 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,419 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:37,419 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,419 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:37,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,420 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,421 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:37,421 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,421 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:37,421 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:37,421 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:37,421 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:37,421 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,421 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:37,421 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,421 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,422 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,422 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:37,422 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,422 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:37,422 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:37,422 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:37,422 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:37,422 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,423 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:37,423 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,423 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,423 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,423 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:37,424 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,424 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:37,424 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:37,424 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,424 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:37,424 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,424 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,425 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,425 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:37,425 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,425 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:37,425 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,425 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:37,425 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,425 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,425 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,425 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:37,425 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,426 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:37,426 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,426 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:37,426 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,426 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,426 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,426 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:37,426 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,426 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:37,426 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:37,427 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:37,427 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:37,427 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:37 +08:00

2018-05-09 21:54:38,515 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,515 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:38,516 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,516 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:38,516 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,519 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:54:38,519 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,520 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,521 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,522 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:38,522 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,522 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,522 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:38,522 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,522 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,523 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,523 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:38,523 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,523 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,523 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:38,523 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,523 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,523 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,524 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:38,524 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,524 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:38,524 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:38,524 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,524 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:38,524 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,524 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,524 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,525 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:38,525 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,525 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,526 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:38,526 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,526 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,526 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,527 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:38,527 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,527 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:38,527 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:38,527 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:38,527 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:38,527 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,527 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:38,528 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,528 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,528 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,528 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:38,528 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,528 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:38,528 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:38,528 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:38,528 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:38,528 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,529 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:38,529 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,529 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,529 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,529 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:38,529 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,529 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:38,530 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:38,530 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,530 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:38,530 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,530 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,530 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,530 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:38,530 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,530 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:38,530 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:38,531 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:38,532 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:38 +08:00

2018-05-09 21:54:39,540 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,540 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:39,540 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,540 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:39,540 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:39,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:39,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:39,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:39,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:39,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:39,544 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,544 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:39,544 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:39,544 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,544 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:39,544 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,544 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,544 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,544 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:39,544 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,544 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,545 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:39,545 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,545 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,545 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,546 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:39,546 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,546 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:39,546 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:39,546 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:39,546 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:39,546 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,546 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:39,546 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,547 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,547 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,547 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:39,547 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,547 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:39,547 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:39,547 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:39,547 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:39,547 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,548 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:39,548 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,548 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,548 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,548 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 12
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:39,548 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,548 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:39,548 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:39,548 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:39,549 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:39,549 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:39,549 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:39 +08:00

2018-05-09 21:54:41,015 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,015 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:41,015 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,015 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:41,015 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,017 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:41,017 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,017 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,018 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,018 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:41,018 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,018 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,019 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:41,019 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,019 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,019 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,019 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:41,019 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,019 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,020 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:41,020 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,020 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,020 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,020 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:41,020 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,020 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:41,020 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:41,020 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,022 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:41,022 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,022 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,022 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,022 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:41,022 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,022 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,023 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:41,023 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,023 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,024 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,024 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:41,024 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,024 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:41,024 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:41,024 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:41,024 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:41,024 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,025 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:41,025 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,025 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,025 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,026 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:41,026 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,026 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:41,026 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:41,026 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:41,026 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:41,026 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,026 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:41,026 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,027 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,027 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,027 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:41,027 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,027 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:41,027 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:41,027 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,029 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:41,029 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,030 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,030 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,030 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:41,030 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,030 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:41,030 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,031 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:41,031 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,031 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,031 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,031 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:41,032 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,032 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:41,032 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,043 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:54:41,043 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,043 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,043 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,043 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:41,043 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,044 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:41,044 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:41,055 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:54:41,055 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:41,055 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:41 +08:00

2018-05-09 21:54:42,107 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,107 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:42,107 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,107 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:42,107 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,110 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:42,110 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,110 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,110 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,110 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:42,110 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,110 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,112 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:42,112 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,112 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,112 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,112 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:42,112 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,112 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,113 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:42,113 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,113 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,113 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,113 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:42,114 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,114 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:42,114 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:42,114 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,114 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:42,114 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,114 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,114 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,115 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:42,115 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,115 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,115 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:42,115 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,115 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,115 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,116 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:42,116 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,116 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:42,116 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:42,116 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:42,116 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:42,116 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,117 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:42,117 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,117 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,117 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,118 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:42,118 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,118 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:42,118 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:42,118 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:42,118 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:42,118 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,118 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:42,118 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:42,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:42,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:42,119 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:54:42,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:42,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:42,131 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,132 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:42,132 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,132 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,132 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,132 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:42,132 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,132 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:42,132 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,132 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:42,132 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,132 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,133 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,133 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:42,133 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,133 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:42,133 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:42,133 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:42,133 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:42,133 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:42 +08:00

2018-05-09 21:54:43,057 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,057 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:43,057 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,058 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:43,058 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,059 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:43,059 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,059 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,060 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,060 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:43,060 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,060 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,063 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:43,063 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,064 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,064 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,064 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:43,064 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,064 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,065 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:43,065 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,065 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,065 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,065 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:43,065 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,065 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:43,065 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:43,065 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,067 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:43,067 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,067 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,068 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,068 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:43,068 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,068 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,069 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:43,069 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,069 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,070 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,070 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:43,070 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,070 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:43,070 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:43,071 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:43,071 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:43,071 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,072 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:43,072 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,072 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,072 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,073 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:43,073 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,073 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:43,073 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:43,073 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:43,073 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:43,073 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,074 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:43,074 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,074 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,074 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,075 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:43,075 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,075 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:43,075 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:43,075 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,086 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:54:43,086 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,086 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,086 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,086 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:43,086 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,086 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:43,086 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,097 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:54:43,097 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,097 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,097 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,097 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:43,097 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,097 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:43,097 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,104 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 21:54:43,104 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,104 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,104 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,104 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:43,104 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,104 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:43,104 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,104 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:43,104 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,105 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,734 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,736 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:43,736 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,736 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:43,736 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,740 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:54:43,741 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,741 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,742 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,742 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:43,742 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,742 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,745 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:43,745 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,745 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,745 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,746 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:43,746 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,746 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,747 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:43,747 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,747 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,747 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,747 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:43,748 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,748 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:43,748 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:43,748 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,748 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:43,748 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,748 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,749 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,749 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:43,749 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,749 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,750 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:43,750 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,750 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,751 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,752 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:43,752 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,752 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:43,752 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:43,752 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:43,752 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:43,752 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,756 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:54:43,756 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,756 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,757 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,757 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:43,757 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,757 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:43,757 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:43,757 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:43,757 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:43,757 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,772 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-09 21:54:43,772 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,772 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,772 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,773 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:43,773 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,773 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:43,773 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:43,773 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,773 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:43,773 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,774 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,774 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,774 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:43,774 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,774 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:43,774 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,774 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:43,774 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,774 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,774 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,774 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:43,774 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,774 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:43,774 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,774 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:43,775 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,775 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,775 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,775 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:43,775 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,775 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:43,775 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:43,775 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:43,775 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:43,775 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:43 +08:00

2018-05-09 21:54:44,287 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,288 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:44,288 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,288 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:44,288 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,290 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:44,290 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,290 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,291 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,291 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:44,291 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,291 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,292 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:44,292 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,293 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,293 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,293 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:44,293 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,293 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,303 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:54:44,303 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,303 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,303 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,304 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:44,304 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,304 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:44,304 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:44,304 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,320 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 15 ms with result: SqlDataReader

2018-05-09 21:54:44,320 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,320 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,320 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,320 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:44,320 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,320 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:44,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:44,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:44,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:44,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:44,321 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:44,322 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,322 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:44,322 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,322 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,322 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,322 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:44,322 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,322 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:44,322 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:44,322 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:44,322 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:44,322 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,323 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:44,323 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,323 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,323 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,323 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:44,323 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,323 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:44,323 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:44,323 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,324 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:44,324 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,324 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,324 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,324 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:44,324 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,324 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:44,324 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,324 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:44,324 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,325 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,824 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,824 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:44,824 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,824 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:44,824 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,830 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:54:44,830 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,830 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,831 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,831 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:44,831 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,831 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,834 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:44,834 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,834 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,834 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,834 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:44,834 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,834 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:44,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,835 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:44,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:44,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:44,836 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,837 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:44,837 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,837 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,837 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,837 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:44,837 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,837 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,838 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:44,838 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,839 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,839 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,839 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:44,840 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,840 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:44,840 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:44,840 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:44,840 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:44,840 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,841 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:44,841 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,841 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,841 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,842 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:44,842 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,842 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:44,842 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:44,842 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:44,842 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:44,843 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,846 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:54:44,846 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,846 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,846 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,847 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:44,847 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,847 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:44,847 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:44,847 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,852 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:54:44,853 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,854 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,854 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,855 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:44,855 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,855 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:44,855 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,857 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:44,857 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,857 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,857 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,857 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:44,857 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,857 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:44,857 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,858 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:44,858 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,858 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,858 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,858 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:44,858 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,858 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:44,858 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:44,858 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:44,858 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:44,858 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:44 +08:00

2018-05-09 21:54:45,468 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,469 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:45,469 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,469 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:45,469 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,475 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:54:45,475 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,476 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,477 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,477 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:45,477 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,478 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,479 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:45,480 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,480 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,480 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,481 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:45,481 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,481 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,482 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:45,482 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,482 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,482 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,482 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:45,482 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,482 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:45,482 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:45,482 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,483 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:45,483 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,483 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,483 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,483 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:45,483 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,483 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,484 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:45,484 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,484 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,484 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,485 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:45,485 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,485 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:45,485 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:45,485 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:45,485 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:45,485 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,486 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:45,486 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,486 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,486 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,486 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:45,486 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,486 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:45,486 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:45,486 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:45,486 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:45,486 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,507 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 20 ms with result: SqlDataReader

2018-05-09 21:54:45,507 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,507 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,507 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 10
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:45,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:45,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:45,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:45,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:45,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:45,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:45,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:45,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:45,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:45,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,511 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,511 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,511 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:45,511 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,511 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:45,511 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:45,511 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:45,511 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:45,511 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:45 +08:00

2018-05-09 21:54:46,326 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,326 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:46,326 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,326 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:46,326 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,342 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 15 ms with result: SqlDataReader

2018-05-09 21:54:46,342 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,343 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,343 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,343 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:46,343 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,343 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,345 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:46,345 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,345 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,345 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,345 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:46,346 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,346 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,346 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:46,346 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,346 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,346 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,346 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:46,346 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,346 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:46,346 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:46,346 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,347 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:46,347 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,347 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,347 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,347 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:46,347 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,347 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,352 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:54:46,352 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,352 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,353 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,353 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:46,353 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,353 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:46,353 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:46,353 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:46,353 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:46,353 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,354 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:46,354 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,354 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,354 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,354 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:46,354 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,354 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:46,354 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:46,354 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:46,354 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:46,354 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,355 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:46,355 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,355 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,355 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,356 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:46,356 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,356 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:46,356 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:46,356 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,358 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:46,358 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,358 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,359 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,359 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:46,359 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,359 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:46,359 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,363 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:54:46,363 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,363 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,363 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,363 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:46,363 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,363 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:46,363 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,364 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:46,364 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,364 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,364 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,364 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:46,364 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,364 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:46,364 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:46,365 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:46,365 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:46,365 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:46 +08:00

2018-05-09 21:54:47,176 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,177 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:47,178 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,178 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:47,178 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,188 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:54:47,188 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,188 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,190 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,191 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:47,191 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,191 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,192 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:47,192 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,192 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,192 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,192 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:47,192 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,192 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,193 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:47,193 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,193 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,193 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,193 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:47,194 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,194 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:47,194 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:47,194 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,194 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:47,194 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,194 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,195 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,195 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:47,195 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,195 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,196 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:47,196 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,196 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,196 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:47,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:47,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:47,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:47,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:47,197 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,197 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:47,197 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,197 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,197 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,198 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:47,198 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,198 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:47,198 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:47,198 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:47,198 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:47,198 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:47,198 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,199 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,200 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,200 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:47,200 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,200 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:47,200 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:47,200 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,201 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:47,201 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,202 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,202 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,202 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:47,202 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,202 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:47,202 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,203 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:47,203 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,203 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,203 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,203 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:47,203 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,203 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:47,203 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,203 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:47,204 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,204 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,204 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,204 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:47,204 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,204 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:47,204 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:47,204 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:47,205 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:47,205 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:47 +08:00

2018-05-09 21:54:48,013 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,013 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:48,013 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,013 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:48,013 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,015 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:48,016 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,016 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,016 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:48,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:48,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,018 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,018 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:48,018 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,018 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,019 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:48,019 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,019 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,019 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,020 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:48,020 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,020 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:48,020 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:48,020 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,020 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:48,020 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,021 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,021 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,021 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:48,021 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,021 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,022 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:48,022 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,022 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,022 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,023 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:48,023 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,023 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:48,023 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:48,023 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:48,023 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:48,023 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,025 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:48,025 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,025 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,025 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:48,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:48,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:48,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:48,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:48,026 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,027 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:48,027 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,029 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,029 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,029 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:48,029 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,029 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:48,029 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:48,029 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,038 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:54:48,038 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,038 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,039 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,039 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:48,039 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,039 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:48,039 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,039 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:48,039 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,039 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,040 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,040 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:48,040 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,040 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:48,040 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,040 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:48,040 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,041 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,041 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,041 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:48,041 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,041 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:48,041 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,041 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:48,041 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,041 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,994 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:48,995 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:48,995 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:48,995 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:48,995 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:48 +08:00

2018-05-09 21:54:49,011 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 16 ms with result: SqlDataReader

2018-05-09 21:54:49,012 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,012 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,013 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,013 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:49,013 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,013 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,014 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,014 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,014 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,014 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,014 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:49,015 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,015 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,016 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:49,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:49,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:49,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:49,017 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,018 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,018 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,018 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,019 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,019 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:49,019 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,019 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,020 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,020 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,020 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,021 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,021 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:49,021 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,021 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:49,021 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:49,021 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:49,021 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:49,021 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,035 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-09 21:54:49,035 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,035 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,035 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,035 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:49,035 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,035 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:49,035 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:49,035 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:49,035 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:49,035 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,036 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,036 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,036 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,036 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,036 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:49,037 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,037 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:49,037 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:49,037 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,038 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,041 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,042 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,042 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,042 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:49,042 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,042 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:49,042 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,042 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,042 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,042 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,043 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,848 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,848 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:49,848 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,849 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:49,849 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,853 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:54:49,853 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,853 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,854 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,855 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:49,855 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,855 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,857 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:49,857 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,857 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,857 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,858 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:49,858 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,858 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,858 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,858 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,858 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,859 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,859 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:49,859 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,859 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:49,859 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:49,859 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,860 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:49,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,861 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,863 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:49,863 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,863 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,864 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,864 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:49,864 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,864 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:49,864 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:49,864 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:49,864 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:49,864 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,865 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,865 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,865 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,865 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,865 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:49,865 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,865 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:49,865 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:49,865 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:49,865 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:49,865 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,866 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,866 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,866 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,866 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,867 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:49,867 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,867 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:49,867 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:49,867 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,879 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:54:49,879 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,879 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,880 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,880 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:49,880 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,880 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:49,880 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,880 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,880 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,880 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,880 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,880 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:49,881 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,881 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:49,881 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,881 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,881 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,881 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,881 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,881 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:49,881 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,881 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:49,881 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:49,881 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:49,881 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:49,881 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:49 +08:00

2018-05-09 21:54:50,886 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,887 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:50,887 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,887 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:50,887 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,906 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 18 ms with result: SqlDataReader

2018-05-09 21:54:50,906 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,906 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,907 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,907 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:50,907 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,908 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,914 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:54:50,914 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,914 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,914 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,914 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:50,914 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,914 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,920 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:54:50,920 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,920 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,920 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,921 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:50,921 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,921 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:50,921 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:50,921 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,922 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:50,922 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,922 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,923 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,923 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:50,923 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,923 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,924 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:50,924 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,924 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,924 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:50,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:50,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:50,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:50,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:50,925 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,925 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:50,925 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,925 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:50,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:50,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:50,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:50,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:50,926 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,927 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:50,928 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,928 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,928 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,928 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 10
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:50,928 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,928 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:50,928 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:50,928 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:50,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,929 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,929 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,929 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:50,929 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,929 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:50,929 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:50,930 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:50,931 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:50,931 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:50,931 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:50 +08:00

2018-05-09 21:54:51,515 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,516 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:51,516 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,516 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:51,516 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,518 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:51,519 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,519 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,519 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,519 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:51,519 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,519 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,520 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:51,520 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,520 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,521 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,521 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:51,521 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,521 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,522 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:51,522 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,522 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,522 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,523 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:51,523 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,523 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:51,523 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:51,523 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,523 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:51,523 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,523 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,524 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,524 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:51,524 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,524 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,533 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:54:51,533 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:51,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:51,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:51,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:51,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:51,534 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,537 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:51,537 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,537 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,537 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,537 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:51,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:51,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:51,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:51,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:51,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:51,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,538 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,539 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,539 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 9
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:51,539 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,539 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:51,539 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:51,539 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:51,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:51,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:51,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:51,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:51,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:51,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:51,542 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:51,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:51,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:51,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:51,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:51,543 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:51 +08:00

2018-05-09 21:54:52,025 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,025 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:52,026 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,026 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:52,026 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,028 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:52,028 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,028 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,029 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,029 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:52,029 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,029 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,030 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:52,030 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,030 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,030 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,031 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:52,031 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,031 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,031 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:52,031 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,031 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,031 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,032 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:52,032 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,032 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:52,032 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:52,032 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:52,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:52,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,033 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:52,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,036 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,036 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,036 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:52,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:52,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:52,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:52,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:52,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,037 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:52,038 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,038 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,038 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,038 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:52,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:52,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:52,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:52,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:52,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:52,039 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 8
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:52,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:52,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:52,040 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,041 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:52,041 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:52,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:52,042 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,043 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:52,043 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,043 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,043 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,043 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:52,043 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,043 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:52,043 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,044 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:52,044 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,044 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,044 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,044 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:52,044 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,044 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:54:52,044 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:52,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,045 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,540 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:52,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:52,541 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,543 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:52,543 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,543 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,545 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,545 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:52,545 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,546 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,547 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:52,547 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,547 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,548 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,548 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:52,548 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,548 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,551 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:52,551 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,551 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,551 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,552 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:52,552 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,552 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:52,552 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:52,552 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,553 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:52,553 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,553 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,554 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,555 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:52,555 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,555 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,556 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:52,556 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,557 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,557 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,558 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:52,558 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,558 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:52,558 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:52,558 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:52,558 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:52,558 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,560 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:52,560 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,560 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,561 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,562 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:52,562 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,562 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:52,562 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:52,562 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:52,562 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:52,562 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,562 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:52,563 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,563 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,563 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,563 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 7
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:52,563 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,563 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:52,563 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:52,563 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,564 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:52,564 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,565 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,565 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,565 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:52,565 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,565 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:52,565 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,565 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:52,565 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,565 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,566 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,566 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:52,566 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,566 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:52,566 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,569 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:54:52,569 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,569 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,570 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,570 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:52,570 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,570 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:54:52,570 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:52,571 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:52,571 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:52,572 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:52 +08:00

2018-05-09 21:54:53,046 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,046 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:53,046 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,046 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:53,046 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,047 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,047 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,048 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,049 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,049 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:53,049 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,049 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,050 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,050 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,051 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,051 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,051 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:53,051 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,051 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,052 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,052 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,052 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,052 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,053 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:53,053 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,053 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,053 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,053 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,053 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,053 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,054 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,054 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,054 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:53,054 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,054 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,055 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,055 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,056 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,056 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,057 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:53,057 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,057 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,057 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,057 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,057 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,057 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,058 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,058 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,058 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,058 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,059 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:53,059 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,059 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,059 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,059 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,059 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,059 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,060 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,060 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,060 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,060 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,061 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:53,061 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,061 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,061 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,061 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,063 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:53,063 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,063 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,063 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,063 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:53,063 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,063 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,063 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,066 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:53,066 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,066 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,066 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,066 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:53,066 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,066 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,066 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,067 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,067 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,067 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,067 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,067 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:53,067 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,067 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,067 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,068 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,068 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,068 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,416 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,417 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:53,417 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,417 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:53,417 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,428 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:54:53,428 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,428 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,429 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,430 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:53,430 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,430 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,436 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:54:53,436 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,436 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,436 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,436 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:53,436 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,436 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,437 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,437 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,437 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,437 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,438 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:53,438 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,438 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,438 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,438 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,438 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,438 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,438 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,438 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,439 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:53,439 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,439 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,439 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,439 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,439 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,440 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,440 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:53,440 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,440 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,440 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,440 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,440 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,440 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,449 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:54:53,449 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,449 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,450 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,450 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:53,450 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,450 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,450 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,450 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,450 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,450 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,452 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:53,452 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,452 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,452 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,452 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 5
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:53,452 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,452 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,452 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,452 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,453 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,453 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,453 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,453 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,453 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:53,453 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,453 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,453 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,454 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,454 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,454 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,454 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,454 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:53,454 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,454 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,454 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,458 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:54:53,458 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,458 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:53,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,656 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,656 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:53,657 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,657 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:53,657 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,657 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,657 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,657 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,659 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,659 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:53,659 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,659 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,661 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:53,661 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,662 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,662 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,663 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:53,663 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,663 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,664 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:53,664 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,664 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,664 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,665 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:53,665 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,665 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,665 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,665 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,666 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,666 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,667 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,667 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,668 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:53,668 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,668 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,670 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:53,670 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,670 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,671 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,672 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:53,672 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,672 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,672 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,672 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,672 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,672 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,672 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,672 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,672 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,673 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,673 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:53,673 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,673 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,673 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,673 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,673 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,673 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 4
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:53,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,674 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,675 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,675 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,675 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,675 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,675 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:53,675 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,675 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,675 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,675 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,675 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,676 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,676 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,676 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:53,676 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,676 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,676 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,676 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,676 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,676 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,676 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,676 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:53,676 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,676 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,676 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,677 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,677 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,677 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,914 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,914 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:53,914 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,914 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:53,914 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,915 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,915 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,915 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,916 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,916 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:53,916 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,916 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,916 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,916 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,916 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,917 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,917 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:53,917 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,917 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,917 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,917 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,917 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,917 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,918 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:53,918 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,918 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,918 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,918 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,918 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,918 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,918 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,918 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,919 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:53,919 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,919 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,919 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,919 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,919 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,920 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,920 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:53,920 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,920 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,920 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,920 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,920 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,920 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:53,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,921 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,922 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,922 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,922 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,922 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,923 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:53,923 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,923 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:53,923 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:53,923 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,924 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,924 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,924 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,924 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,925 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:53,925 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,925 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,925 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,934 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:54:53,934 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,934 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,934 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,934 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:53,934 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,934 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,934 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,935 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,935 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,935 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,935 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,935 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:53,935 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,935 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:53,935 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:53,935 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:53,936 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:53,936 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:53 +08:00

2018-05-09 21:54:54,101 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,101 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:54,101 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,101 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:54,101 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,102 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,102 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,102 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,102 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:54,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:54,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:54,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,105 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,105 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,105 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,105 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,105 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:54,105 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,105 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,106 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,106 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,106 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,106 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,106 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:54,106 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,106 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,106 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,106 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,106 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,107 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,107 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,107 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,107 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,107 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,108 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:54,108 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,108 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,108 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,108 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,108 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,108 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,108 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,108 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,108 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,108 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,109 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:54,109 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,109 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,109 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,109 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,110 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,110 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,110 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,110 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,110 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,110 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,110 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,110 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,111 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,111 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,111 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,111 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,111 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,111 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,111 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,111 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,112 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,112 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,112 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,112 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,112 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,112 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,112 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,112 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,113 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,113 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,113 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,302 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,302 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:54,302 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,302 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:54,302 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,303 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,303 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,303 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,304 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,304 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:54,304 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,304 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,304 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,304 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,305 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,305 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,305 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:54,305 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,305 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,306 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,306 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,306 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,306 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,306 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:54,306 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,306 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,306 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,306 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,307 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,307 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,307 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,307 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,307 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:54,307 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,307 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,308 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,308 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,309 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,309 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,309 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:54,309 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,309 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,309 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,309 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,309 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,309 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,310 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,310 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,310 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,310 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,311 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:54,311 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,311 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,311 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,311 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,311 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,311 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,311 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,311 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,311 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,312 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,312 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:54,312 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,312 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,312 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,312 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,312 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,312 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,312 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,313 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,313 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,313 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,313 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,313 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,313 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,313 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,313 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,313 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,313 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,313 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,313 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,313 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,313 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,314 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,314 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,314 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,314 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,314 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,314 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,314 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,314 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,314 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,314 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,451 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,451 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:54,451 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,451 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:54,451 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,452 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,452 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,452 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,453 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,453 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:54,453 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,453 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,454 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,454 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,454 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,454 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,454 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:54,454 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,454 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,454 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,454 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,454 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,455 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,455 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:54,455 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,455 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,455 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,455 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,455 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,455 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,455 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,456 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,456 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:54,456 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,456 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,456 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,456 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,456 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,457 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,457 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:54,457 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,457 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,457 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,457 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,457 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,457 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,458 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,458 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,458 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,458 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:54,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,459 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,460 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,460 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,460 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,460 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,460 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:54,460 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,460 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,460 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,460 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,461 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:54,462 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,462 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,462 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,462 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,462 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,462 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,462 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,465 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,466 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,466 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,466 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,466 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,627 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,628 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:54,628 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,628 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:54,628 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,629 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,629 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:54,629 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,629 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,629 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,629 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,629 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,629 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:54,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:54,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,631 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,631 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,631 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,631 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,631 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:54,631 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,631 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,631 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,631 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,632 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,632 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,632 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:54,632 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,632 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,632 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,632 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,632 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,632 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,632 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,632 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,633 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,633 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,633 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:54,633 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,633 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,633 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,633 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,633 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,633 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,633 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,633 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,633 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,634 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,634 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:54,634 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,634 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,634 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,634 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,634 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,634 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,635 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,635 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,635 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,635 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,635 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,635 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,635 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,635 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,635 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,637 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,637 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,637 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,804 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,805 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:54,805 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,805 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:54,805 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,806 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:54,806 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,806 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,807 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,807 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:54,807 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,807 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,807 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,807 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,808 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,808 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,808 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:54,808 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,808 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,808 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,808 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,808 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,808 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,809 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:54,809 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,809 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,809 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,809 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,809 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,809 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,809 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,809 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,810 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:54,810 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,810 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,812 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:54,812 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,812 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,812 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,813 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:54,813 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,813 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,813 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,813 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,813 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,813 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,820 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:54:54,820 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,820 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,820 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,821 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:54,821 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,821 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,821 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,821 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,821 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,821 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,822 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:54,822 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,822 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,822 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,823 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:54,823 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,823 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,823 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,823 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,823 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,823 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,824 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,824 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,824 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,824 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,824 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,824 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,824 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,824 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,824 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,824 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,824 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,824 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,824 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,824 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,828 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:54:54,828 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,828 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:54,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,829 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,977 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,978 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:54,978 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,978 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:54,978 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,979 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:54,979 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,979 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,980 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,980 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:54,980 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,980 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,980 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,980 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,980 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,980 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,980 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:54,981 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,981 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,981 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,981 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,982 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,982 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,982 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:54,982 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,982 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,982 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,982 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,983 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,983 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,983 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,983 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:54,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,984 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:54,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:54,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,985 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,986 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,986 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:54,986 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,986 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,986 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,986 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,986 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:54,986 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,993 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 21:54:54,993 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,993 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,993 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:54,993 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:54,993 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:54,993 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:54,993 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:54,993 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:54 +08:00

2018-05-09 21:54:55,000 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 21:54:55,000 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,000 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,001 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,001 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:55,001 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,001 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,001 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,003 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:55,003 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,004 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,004 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,004 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:55,004 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,004 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,004 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,004 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,004 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,004 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,004 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,004 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:55,004 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,004 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,005 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,005 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,005 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,005 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,379 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,379 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:55,379 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,380 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:55,380 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,382 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:55,382 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,382 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,383 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,384 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:55,384 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,384 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,385 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:55,385 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,386 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,386 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,386 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:55,387 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,387 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,392 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:54:55,392 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,392 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,392 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,393 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:55,393 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,393 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:55,393 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:55,393 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,404 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:54:55,404 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,404 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,406 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,406 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:55,406 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,407 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,418 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:54:55,419 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,419 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,419 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,420 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:55,420 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,420 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:55,420 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:55,420 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,420 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,420 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,422 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:55,422 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,423 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,423 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,423 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:55,423 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,423 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:55,423 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:55,423 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,423 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,423 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,424 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,424 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,424 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,424 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,425 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:55,425 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,425 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:55,425 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:55,425 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,425 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,425 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,426 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,426 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,426 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:55,426 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,426 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,426 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,426 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,426 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,427 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,427 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,427 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:55,427 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,427 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,427 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,427 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,427 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,427 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,427 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,428 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:55,428 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,428 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,428 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,428 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,428 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,428 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,550 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,550 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:55,550 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,550 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:55,550 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,550 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,550 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,551 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,551 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,551 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:55,551 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,551 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,552 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,552 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,552 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,552 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,552 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:55,552 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,552 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,552 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,552 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,553 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,553 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,553 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:55,553 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,553 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:55,553 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:55,553 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,553 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,553 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,553 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,554 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,554 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:55,554 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,554 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,554 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,554 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,554 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,555 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,555 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:55,555 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,555 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:55,555 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:55,555 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,555 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,555 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,555 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,555 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:55,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:55,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:55,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,556 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,557 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,557 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,557 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,557 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,557 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:55,557 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,557 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:55,557 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:55,557 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,558 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,558 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,558 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,558 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,558 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:55,558 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,558 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,558 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,558 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,558 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,558 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,559 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,559 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:55,559 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,559 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,559 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,559 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:55,559 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,559 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,559 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,559 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:55,559 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,559 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:55,559 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:55,561 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:55,561 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:55,561 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:55 +08:00

2018-05-09 21:54:56,522 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,522 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:56,523 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,523 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:56,523 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,524 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:56,524 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,524 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,525 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,525 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:56,525 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,525 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,528 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:54:56,528 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,529 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,529 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,529 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:56,529 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,529 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,530 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,530 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,530 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,530 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,530 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:56,530 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,530 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:56,530 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:56,530 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,532 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,532 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,532 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,532 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,532 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:56,532 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,532 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,533 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,533 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,534 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,534 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,534 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:56,534 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,534 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:56,534 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:56,534 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,534 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,535 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,535 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,535 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,536 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,536 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,536 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:56,536 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,536 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:56,536 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:56,536 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,536 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,536 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,537 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,537 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,537 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,538 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,538 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:56,538 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,538 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:56,538 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:56,538 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,539 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,539 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,540 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,540 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,540 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:56,540 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,540 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,540 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,541 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,541 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,541 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,541 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,541 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:56,541 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,541 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,541 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,542 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,542 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,542 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,542 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,542 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:56,542 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,542 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,542 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,552 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:54:56,552 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,553 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,715 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,715 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:56,715 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,715 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:56,715 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,716 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,716 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,716 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,717 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,717 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:56,717 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,717 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,717 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,717 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,717 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,717 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,718 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:56,718 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,718 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,718 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,718 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,718 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,718 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,718 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:56,718 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,718 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:56,718 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:56,718 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,719 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,719 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,719 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,719 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,719 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:56,719 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,719 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,720 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,720 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,720 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,720 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,720 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:56,720 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,721 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:56,721 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:56,721 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,721 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,721 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,721 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,721 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,721 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,721 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,722 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:56,722 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,722 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:56,722 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:56,722 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,722 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,722 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,722 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,722 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,723 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,723 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,723 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:56,723 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,723 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:56,723 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:56,723 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,724 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,724 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,724 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,724 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,724 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:56,724 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,725 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,725 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,725 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,725 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,725 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,725 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,725 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:56,725 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,726 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,726 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,727 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:56,727 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,727 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,728 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,728 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:56,728 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,728 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,728 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,734 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 21:54:56,734 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,735 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,897 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,897 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:56,897 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,897 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:56,897 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,898 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,898 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,898 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,899 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,899 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:56,899 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,899 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,900 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,900 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,900 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,900 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,900 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:56,900 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,900 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,901 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,901 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,901 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,901 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,901 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:56,901 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,902 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:56,902 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:56,902 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,902 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,902 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,902 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,902 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,903 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:56,903 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,903 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,904 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,904 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,904 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,905 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,905 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:56,905 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,905 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:56,905 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:56,905 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,905 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,905 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:56,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:56,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:56,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,907 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,907 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,907 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,907 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,907 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,908 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:56,908 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,908 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:56,908 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:56,908 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,908 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,908 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,909 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,909 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,909 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:56,909 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,909 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,909 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,909 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,909 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,909 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,909 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,909 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:56,910 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,910 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,910 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,910 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,910 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,910 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,910 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,910 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:56,910 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,910 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:56,910 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:56,910 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:56,910 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:56,911 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:56 +08:00

2018-05-09 21:54:57,065 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,066 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:57,066 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,066 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:57,066 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,066 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,066 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,066 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,067 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,067 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:57,067 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,067 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,067 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,068 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,068 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,068 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,068 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:57,068 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,068 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,068 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,068 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,068 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,068 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,068 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:57,068 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,069 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,069 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,069 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,069 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,069 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,069 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,069 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,069 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:57,069 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,069 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,070 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:57,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,071 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,074 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:54:57,074 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,074 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,075 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,075 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:57,075 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,075 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,075 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,075 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,075 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,075 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,076 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,076 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,076 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,076 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,076 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 4
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:57,076 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,076 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,076 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,076 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,077 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,077 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,077 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,077 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,077 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:57,077 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,077 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,077 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,078 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,079 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,240 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,240 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:54:57,240 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,240 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:54:57,240 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,242 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:54:57,242 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,242 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,242 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:54:57,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:54:57,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,243 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,244 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,244 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,244 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,244 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,244 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:54:57,244 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,244 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,244 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,244 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,244 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,245 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,245 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,245 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,245 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:54:57,245 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,245 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,245 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,245 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,246 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,246 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,246 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:57,246 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,246 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,246 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,246 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,246 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,246 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,246 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,246 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,246 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,247 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,247 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:54:57,247 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,247 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,247 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,247 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,247 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,247 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,247 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,247 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,247 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,248 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,248 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 5
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:54:57,248 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,248 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:54:57,248 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:54:57,248 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,248 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,248 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,248 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,249 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,249 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:57,249 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,249 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:54:57,249 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,249 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:54:57,249 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:54:57,249 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,249 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:54:57 +08:00

2018-05-09 21:54:57,249 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:54:57,249 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

