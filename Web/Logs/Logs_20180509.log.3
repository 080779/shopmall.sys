2018-05-09 21:43:44,112 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,118 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:44,118 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:44,118 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:44,118 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:44,118 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,128 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:43:44,128 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,129 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,129 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,129 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:44,129 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,129 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:44,129 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:44,129 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:44,129 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:44,129 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,130 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:44,130 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,130 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,131 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,131 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 4
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:44,131 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,131 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:44,131 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:44,131 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,132 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:44,132 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,132 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,132 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,132 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:44,132 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,132 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:44,132 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,133 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:44,133 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,133 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,133 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,133 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:44,133 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,133 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:44,133 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,133 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:44,133 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,133 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,133 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,133 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:44,134 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,134 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:44,134 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,134 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:44,134 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,134 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,703 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,704 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:44,704 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,704 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:44,704 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,707 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:43:44,707 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,707 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,708 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,708 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:44,708 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,708 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,709 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:44,709 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,709 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,709 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,709 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:44,709 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,709 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,710 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:44,710 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,710 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,710 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,710 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:44,711 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,711 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:44,711 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:44,711 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,711 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:44,711 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,711 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,712 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,712 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:44,712 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,712 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,714 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:44,714 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,714 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,714 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,715 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:44,715 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,715 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:44,715 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:44,715 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:44,715 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:44,715 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,716 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:44,716 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,716 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,716 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,717 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:44,717 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,717 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:44,717 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:44,717 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:44,717 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:44,717 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,718 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:44,718 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,718 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,718 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 5
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:44,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:44,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:44,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,720 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:44,720 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,720 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,720 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,721 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:44,721 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,721 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:44,721 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,721 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:44,721 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,722 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,722 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,722 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:44,722 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,722 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:44,722 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,732 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:43:44,732 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,733 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,733 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,733 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:44,733 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,733 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:43:44,733 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:44,733 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:44,733 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:44,733 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:44 +08:00

2018-05-09 21:43:45,286 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,286 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:45,286 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,286 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:45,286 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,302 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 15 ms with result: SqlDataReader

2018-05-09 21:43:45,302 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,302 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,303 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,303 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:45,303 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,303 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,304 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,304 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,304 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,304 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:45,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,306 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:45,306 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,306 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:45,306 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:45,306 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,311 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:43:45,311 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,311 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,312 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,312 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:45,312 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,312 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,314 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:45,314 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,314 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,314 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,315 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:45,315 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,315 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:45,315 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:45,315 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:45,315 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:45,315 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,316 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,316 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,316 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,316 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,316 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:45,317 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,317 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:45,317 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:45,317 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:45,317 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:45,317 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,325 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:43:45,325 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,325 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,325 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,326 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:45,326 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,326 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:45,326 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:45,326 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,327 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:45,327 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,328 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,328 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,328 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:45,328 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,328 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:45,328 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,328 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,328 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,328 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,328 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,328 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:45,328 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,328 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:45,328 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,329 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,329 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,329 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,329 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,329 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:45,329 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,329 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:43:45,329 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,329 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,329 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,329 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,905 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,905 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:45,905 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,905 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:45,905 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,906 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,906 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,906 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,907 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,907 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:45,907 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,907 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,908 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,908 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,908 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,908 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,908 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:45,908 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,908 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,910 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:45,910 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,910 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,910 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,910 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:45,910 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,910 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:45,910 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:45,910 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,911 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,911 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,911 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,911 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,912 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:45,912 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,912 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,913 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,913 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,913 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,913 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,914 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:45,914 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,914 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:45,914 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:45,914 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:45,914 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:45,914 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,914 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,914 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,915 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,915 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,915 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:45,915 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,915 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:45,915 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:45,915 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:45,915 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:45,915 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,929 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-09 21:43:45,929 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,929 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,930 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,930 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 7
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:45,930 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,930 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:45,930 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:45,930 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:45,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:45,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,932 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,932 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,932 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,932 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,932 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:45,932 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,932 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:45,932 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,932 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,932 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,933 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,933 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,933 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:45,933 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,933 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:43:45,933 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:45,933 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:45,933 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:45,933 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:45 +08:00

2018-05-09 21:43:46,641 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,642 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:46,642 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,642 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:46,642 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,645 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:43:46,645 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,646 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,647 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,648 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:46,648 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,648 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,649 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:46,650 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,650 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,650 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,651 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:46,651 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,651 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,651 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:46,652 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,652 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,652 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,652 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:46,652 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,652 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:46,652 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:46,652 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,653 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:46,653 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,653 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,653 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,653 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:46,654 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,654 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,654 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:46,654 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,655 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,655 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,655 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:46,655 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,655 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:46,655 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:46,655 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:46,655 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:46,655 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,656 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:46,656 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,656 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,656 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,657 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:46,657 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,657 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:46,657 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:46,657 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:46,657 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:46,657 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,658 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:46,658 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,658 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,658 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,658 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 8
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:46,658 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,658 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:46,658 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:46,658 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,659 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:46,659 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,659 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,660 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,660 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:46,660 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,660 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:46,660 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,660 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:46,660 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,661 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,661 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,661 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:46,661 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,661 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:46,661 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,672 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:43:46,672 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,673 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,673 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,673 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:46,673 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,673 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:43:46,673 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:46,674 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:46,674 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:46,674 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:46 +08:00

2018-05-09 21:43:47,650 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,651 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:47,651 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,651 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:47,651 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,654 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:43:47,654 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,655 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,656 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,656 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:47,656 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,656 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,661 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:43:47,661 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,662 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,662 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,663 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:47,663 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,663 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,664 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:47,664 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,664 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,664 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,665 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:47,665 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,665 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:47,665 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:47,665 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,666 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:47,666 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,667 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,667 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,668 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:47,668 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,668 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,669 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:47,669 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,670 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,670 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,671 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:47,671 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,671 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:47,671 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:47,671 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:47,671 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:47,671 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,672 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:47,672 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,672 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,672 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,673 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:47,673 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,673 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:47,673 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:47,673 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:47,673 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:47,673 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,674 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:47,674 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,674 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,674 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,674 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 9
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:47,675 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,675 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:47,675 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:47,675 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,675 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:47,675 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,675 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,676 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,676 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:47,676 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,676 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:47,676 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,684 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:43:47,684 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,685 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,685 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,685 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:47,685 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,685 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:47,685 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,685 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:47,685 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,685 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,685 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,685 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:47,685 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,685 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:47,685 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:47,686 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:47,686 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:47,686 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:47 +08:00

2018-05-09 21:43:48,723 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,724 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:48,724 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,724 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:48,724 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,728 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:43:48,728 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,728 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,729 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,729 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:48,730 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,730 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,730 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:48,730 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,731 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,731 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,731 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:48,731 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,731 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,731 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:48,731 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,732 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,732 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,732 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:48,732 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,732 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:48,732 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:48,732 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,733 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:48,733 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,733 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,734 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,734 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:48,734 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,734 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,735 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:48,735 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,735 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,735 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,736 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:48,736 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,736 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:48,736 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:48,736 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:48,736 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:48,736 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,738 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:43:48,738 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,738 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,739 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,739 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:48,739 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,739 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:48,739 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:48,739 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:48,739 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:48,739 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,740 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:48,740 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,740 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,741 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,741 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 10
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:48,741 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,741 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:48,741 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:48,741 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,742 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:48,742 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,743 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,743 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,743 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:48,743 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,743 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:48,743 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,757 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-09 21:43:48,757 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,757 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,757 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,757 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:48,757 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,757 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:48,757 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,757 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:48,757 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,758 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,758 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,758 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:48,758 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,758 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:48,758 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:48,758 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:48,758 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:48,758 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:48 +08:00

2018-05-09 21:43:49,917 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,918 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:49,918 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,918 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:49,918 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,922 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:43:49,922 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,922 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,923 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,923 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:49,923 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,923 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,924 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:49,924 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,925 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,925 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,925 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:49,925 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,925 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,926 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:49,926 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,926 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,926 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,926 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:49,926 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,926 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:49,926 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:49,926 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,927 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:49,927 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,927 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,928 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,928 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:49,928 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,928 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,929 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:49,929 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,930 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,930 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:49,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:49,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:49,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:49,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:49,931 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,932 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:49,932 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,932 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,932 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,933 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:49,933 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,933 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:49,933 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:49,933 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:49,933 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:49,933 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,934 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:49,934 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,934 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,934 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,935 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 9
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:49,935 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,935 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:49,935 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:49,935 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,936 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:49,936 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,936 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,937 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,937 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:49,937 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,937 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:49,937 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,938 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:49,938 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,938 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,938 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,938 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:49,938 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,938 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:49,938 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,939 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:49,939 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,939 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,939 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,939 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:49,939 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,939 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:49,940 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:49,966 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 26 ms with result: SqlDataReader

2018-05-09 21:43:49,966 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:49,966 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:49 +08:00

2018-05-09 21:43:50,463 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,463 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:50,463 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,463 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:50,463 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,464 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,464 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,464 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,465 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,465 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:50,465 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,465 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,468 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:43:50,468 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,468 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,468 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,468 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:50,468 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,468 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,469 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,469 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,469 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,469 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,470 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:50,470 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,470 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:50,470 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:50,470 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,470 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,470 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,471 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,471 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,471 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:50,471 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,471 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,472 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,472 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,472 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,473 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,473 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:50,473 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,473 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:50,473 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:50,473 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,474 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,474 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,475 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:50,475 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,475 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,475 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,476 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:50,476 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,476 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:50,476 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:50,476 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,476 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,476 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,477 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:50,477 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,477 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,477 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,478 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 8
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:50,478 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,478 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:50,478 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:50,478 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,497 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 18 ms with result: SqlDataReader

2018-05-09 21:43:50,497 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,497 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,498 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,498 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:50,498 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,498 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,498 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,498 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,498 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,498 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,498 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,498 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:50,498 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,498 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,498 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,499 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,499 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,499 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,499 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,499 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:50,499 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,499 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,499 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,499 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,499 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,499 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,680 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,681 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:50,681 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,681 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:50,681 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,687 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:43:50,687 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,688 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,689 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,690 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:50,690 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,690 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,697 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:43:50,697 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,697 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,698 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,698 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:50,698 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,698 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,699 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,699 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,700 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,700 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,701 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:50,701 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,701 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:50,701 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:50,701 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,702 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,702 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,702 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,702 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,702 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:50,702 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,702 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,703 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,703 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,703 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,703 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,704 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:50,704 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,704 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:50,704 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:50,704 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,704 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,704 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,705 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,705 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,705 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,706 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,707 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:50,707 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,707 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:50,707 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:50,707 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,707 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,707 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,708 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,708 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,708 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,708 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,709 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 7
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:50,709 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,709 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:50,709 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:50,709 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,709 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,709 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,710 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,710 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,710 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:50,710 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,710 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,710 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,710 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,710 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,710 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,711 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,712 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,886 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,887 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:50,887 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,887 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:50,887 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,889 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:43:50,889 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,890 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,891 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,892 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:50,892 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,892 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,892 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,893 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,893 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,893 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,894 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:50,894 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,894 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,894 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,894 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,894 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,895 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,895 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:50,895 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,895 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:50,896 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:50,896 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,896 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,896 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,896 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,897 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,897 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:50,897 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,898 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,898 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,898 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,898 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,899 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,900 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:50,900 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,900 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:50,900 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:50,900 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,900 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,900 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,900 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,900 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,901 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,901 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,902 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:50,902 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,902 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:50,902 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:50,902 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,902 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,902 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,903 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,903 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,903 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,904 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,905 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:50,905 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,905 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:50,905 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:50,905 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,907 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,907 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:50,907 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,907 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,907 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,907 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,907 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,908 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,908 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,908 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:50,908 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,908 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,908 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,908 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,908 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,909 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,909 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,909 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:50,909 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,909 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:43:50,909 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:50,910 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:50,910 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:50,910 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:50 +08:00

2018-05-09 21:43:51,068 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,069 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:51,069 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,069 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:51,069 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,069 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,069 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,070 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,070 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,071 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:51,071 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,071 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,071 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,071 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,071 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,071 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,072 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:51,072 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,072 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,072 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,072 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,072 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,072 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,073 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:51,073 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,073 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:51,073 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:51,073 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,074 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,074 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,074 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,074 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,074 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:51,074 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,074 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,075 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,075 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,075 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,075 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,076 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:51,076 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,076 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:51,076 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:51,076 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,076 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,076 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,076 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,076 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,076 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,077 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,077 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:51,077 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,077 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:51,077 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:51,077 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,077 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,077 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,078 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,078 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,078 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,078 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,079 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 5
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:51,079 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,079 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:51,079 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:51,079 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,080 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,080 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,080 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,080 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,081 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:51,081 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,081 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,081 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,081 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,081 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,082 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,082 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,082 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:51,082 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,082 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,082 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,083 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:51,084 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,084 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,084 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,084 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:51,084 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,084 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,084 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,084 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,084 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,085 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,219 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,219 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:51,219 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,219 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:51,219 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,220 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,220 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,220 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,221 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,221 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:51,221 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,221 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,221 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,221 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,222 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,222 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,222 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:51,222 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,222 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,222 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,222 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,222 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,222 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,222 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:51,223 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,223 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:51,223 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:51,223 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,223 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,223 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,223 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,223 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,223 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:51,223 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,223 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:51,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:51,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:51,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,225 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,225 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,225 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,225 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,225 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:51,225 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,225 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:51,225 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:51,225 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,225 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,225 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,225 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,225 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,226 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 4
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:51,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:51,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:51,226 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,226 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,226 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,227 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,227 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,227 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:51,227 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,227 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,227 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,227 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,227 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,227 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,227 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,227 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:51,227 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,227 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,228 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,228 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,228 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,228 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,228 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,228 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:51,228 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,228 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,228 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,228 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,228 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,228 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,387 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,387 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:51,387 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,387 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:51,387 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,387 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,388 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,388 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,388 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,388 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:51,388 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,388 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,389 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,389 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,389 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,389 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,389 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:51,389 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,389 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,389 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,389 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,389 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,389 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,390 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:51,390 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,390 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:51,390 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:51,390 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,390 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,390 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,390 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,390 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,391 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:51,391 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,391 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,391 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,391 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,391 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,391 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,392 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:51,392 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,392 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:51,392 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:51,392 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,392 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,392 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,392 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,393 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:51,393 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,393 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:51,393 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:51,393 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,393 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,393 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,393 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,393 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,393 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,393 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,394 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:51,394 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,394 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:51,394 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:51,394 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,394 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,394 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,395 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,395 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,395 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:51,395 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,395 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,395 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,395 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,395 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,395 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,395 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,395 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:51,395 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,395 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,395 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,396 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,396 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,396 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,396 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,396 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:51,396 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,396 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:51,396 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:51,396 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:51,396 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:51,396 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:51 +08:00

2018-05-09 21:43:52,847 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,847 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:52,847 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,847 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:52,847 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,847 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:52,848 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,848 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,848 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,848 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:52,848 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,848 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,848 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:52,848 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,849 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,849 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,849 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:52,849 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,849 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,849 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:52,849 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,849 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,849 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,850 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:52,850 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,850 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:52,850 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:52,850 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,850 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:52,850 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,850 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,850 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,850 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:52,850 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,850 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,851 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:52,851 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,851 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,851 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,851 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:52,851 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,851 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:52,851 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:52,851 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:52,851 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:52,852 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,852 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:52,852 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,852 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,852 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,852 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:52,853 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,853 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:52,853 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:52,853 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:52,853 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:52,853 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,853 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:52,853 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,853 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,853 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,854 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:52,854 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,854 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:52,854 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:52,854 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,854 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:52,854 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,854 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:52,855 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,856 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,856 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,856 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:52,856 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,856 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:52,856 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:52,856 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:52,856 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:52,856 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:52 +08:00

2018-05-09 21:43:54,138 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,138 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:54,138 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,138 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:54,138 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,141 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:43:54,141 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,141 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,142 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,142 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:54,142 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,143 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,152 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:43:54,152 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,152 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,152 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,152 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:54,152 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,152 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,153 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:54,153 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,153 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,153 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,153 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:54,153 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,153 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:54,154 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:54,154 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,154 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:54,154 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,154 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,155 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,155 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:54,155 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,155 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,155 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:54,155 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,155 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,156 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,156 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:54,156 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,156 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:54,156 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:54,156 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:54,156 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:54,156 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,156 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:54,156 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,156 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,157 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,157 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:54,157 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,157 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:54,157 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:54,157 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:54,157 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:54,157 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,169 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:43:54,169 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,169 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,169 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,169 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:54,170 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,170 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:54,170 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:54,170 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,170 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:54,170 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,170 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,170 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,170 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,171 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:54,172 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:54,172 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:54,173 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:54,173 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:54 +08:00

2018-05-09 21:43:55,724 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,725 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:55,725 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,725 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:55,725 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,726 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:55,726 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,726 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,727 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,727 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:55,727 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,727 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,730 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:43:55,730 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,730 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,730 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,730 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:55,730 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,730 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,731 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:55,731 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,731 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,732 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,732 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:55,732 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,732 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:55,732 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:55,732 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,733 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:55,733 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,733 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,733 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,733 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:55,733 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,733 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,734 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:55,734 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,734 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,735 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,735 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:55,735 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,735 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:55,735 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:55,735 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:55,735 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:55,735 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,736 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:55,736 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,736 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,737 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,737 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:55,737 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,737 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:55,737 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:55,737 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:55,737 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:55,738 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,742 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:43:55,742 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,742 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,743 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,743 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:55,743 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,744 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:55,744 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:55,744 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,745 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:55,746 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,746 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,747 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,747 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:55,747 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,747 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:55,747 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,750 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:43:55,750 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,750 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,750 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,750 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:55,750 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,750 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:55,750 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,751 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:55,751 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,751 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,751 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,751 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:55,751 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,751 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:55,751 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:55,752 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:55,752 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:55,752 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:55 +08:00

2018-05-09 21:43:56,466 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,467 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:56,467 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,467 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:56,467 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,475 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:43:56,475 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,476 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,477 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,477 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:56,477 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,477 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,489 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:43:56,489 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,489 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,490 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,490 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:56,490 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,490 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,499 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:43:56,499 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,500 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,500 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,500 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:56,500 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,500 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:56,500 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:56,500 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,502 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:56,502 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,502 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,502 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,503 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:56,503 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,503 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,503 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:56,503 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,503 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:56,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:56,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:56,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:56,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:56,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,505 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:56,505 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,505 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,505 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,505 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:56,505 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,505 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:56,505 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:56,506 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:56,506 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:56,506 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,506 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:56,506 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,506 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,506 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,507 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:56,507 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,507 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:56,507 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:56,507 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,507 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:56,507 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:56,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:56,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:56,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:56,508 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:56,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:56,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:56,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:56,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:56,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:56,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:56,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:56 +08:00

2018-05-09 21:43:57,043 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,043 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:57,043 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,043 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:57,043 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,045 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:57,045 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,046 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,047 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,048 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:57,048 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,048 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,052 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:43:57,053 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,053 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,053 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,054 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:57,054 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,054 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,058 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:43:57,058 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,059 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,059 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,060 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:57,060 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,060 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:57,060 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:57,060 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,062 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:57,062 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,062 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,062 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,063 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:57,063 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,063 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,063 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,063 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,063 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,064 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,064 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:57,064 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,064 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:57,064 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:57,064 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:57,064 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:57,064 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,065 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,065 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,065 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,065 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,066 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:57,066 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,066 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:57,066 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:57,066 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:57,066 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:57,066 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,066 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,066 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,066 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,067 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,067 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:57,067 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,067 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:57,067 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:57,067 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,068 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,068 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,068 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,069 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,069 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:57,069 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,069 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:57,069 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,069 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,069 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,069 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,070 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,070 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:57,070 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,070 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:57,070 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,070 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,070 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,070 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,070 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,070 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:57,070 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,071 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:57,071 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,071 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,071 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,071 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,578 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,578 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:57,578 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,579 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:57,579 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,601 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 22 ms with result: SqlDataReader

2018-05-09 21:43:57,601 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,602 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,602 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,602 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:57,602 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,602 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,603 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,603 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,603 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,603 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,603 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:57,603 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,603 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,603 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,603 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,604 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,604 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,604 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:57,604 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,604 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:57,604 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:57,604 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,605 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,605 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,605 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,605 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,605 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:57,605 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,605 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,608 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:43:57,608 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,609 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,610 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,611 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:57,611 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,611 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:57,611 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:57,611 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:57,611 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:57,611 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,613 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:57,613 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,613 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,613 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,614 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:57,614 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,614 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:57,614 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:57,614 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:57,614 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:57,614 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,615 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,615 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,615 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,615 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,615 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 4
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:57,615 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,615 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:57,615 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:57,615 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,616 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,616 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,616 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,616 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,616 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:57,616 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,616 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:57,616 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,617 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,617 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,617 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,617 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,617 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:57,617 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,617 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:57,617 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,617 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,617 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,617 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,618 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,618 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:57,618 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,618 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:57,618 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:57,618 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:57,618 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:57,618 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:57 +08:00

2018-05-09 21:43:58,081 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,082 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:58,082 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,082 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:58,082 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,095 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 21:43:58,095 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,095 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,096 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,097 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:58,097 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,097 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,109 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 21:43:58,109 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,109 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,110 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,110 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:58,110 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,110 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,111 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:58,111 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,111 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,112 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,112 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:58,112 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,112 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:58,112 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:58,112 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,115 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:43:58,115 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,115 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,116 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,116 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:58,116 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,116 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,118 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:58,118 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,119 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,119 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,120 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:58,120 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,120 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:58,120 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:58,120 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:58,120 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:58,120 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,121 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:58,121 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,121 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,121 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,122 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:58,122 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,122 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:58,122 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:58,122 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:58,122 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:58,122 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,122 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:58,122 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,122 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,123 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,123 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 5
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:58,123 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,123 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:58,123 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:58,123 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,124 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:58,124 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,124 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,124 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,124 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:58,124 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,124 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:58,124 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,124 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:58,124 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,125 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,125 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,125 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:58,125 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,125 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:58,125 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,125 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:58,125 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,125 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,125 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,125 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:58,125 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,125 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:43:58,125 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,126 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:58,126 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,126 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,597 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,597 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:58,597 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,597 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:58,597 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,604 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 21:43:58,604 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,604 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,605 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,605 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:58,605 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,605 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,607 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:58,607 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,607 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,607 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,607 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:58,607 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,607 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,608 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:58,608 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,608 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,608 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,608 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:58,609 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,609 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:58,609 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:58,609 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,609 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:58,609 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,609 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,610 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,610 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:58,610 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,610 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,611 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:58,612 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,612 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,612 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,613 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:58,613 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,613 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:58,613 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:58,613 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:58,613 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:58,613 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:58,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,615 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:58,615 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,615 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:58,615 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:58,615 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:58,615 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:58,615 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,616 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:58,616 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,616 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,616 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,617 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:58,617 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,617 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:58,617 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:58,617 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,624 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:43:58,624 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:58,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:58,627 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,629 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:43:58,629 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,629 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:58,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:58,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:58,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:58,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:43:58,630 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:58,631 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:58,631 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:58,631 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:58 +08:00

2018-05-09 21:43:59,071 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,072 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:59,072 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,072 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:59,072 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,073 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,073 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,073 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,074 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,074 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:59,074 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,074 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,075 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,075 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,075 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,076 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,076 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:59,076 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,076 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,084 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:43:59,084 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,085 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,085 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,085 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:59,085 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,085 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:59,085 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:59,085 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,102 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 16 ms with result: SqlDataReader

2018-05-09 21:43:59,102 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,102 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,103 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,103 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:59,103 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,103 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,103 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,103 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,103 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,104 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,104 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:59,104 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,104 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:59,104 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:59,104 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:59,104 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:59,104 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,105 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,105 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:59,105 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,105 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:59,105 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:59,105 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:59,105 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:59,105 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,105 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,105 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,105 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,106 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,106 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 7
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:59,106 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,106 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:59,106 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:59,106 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,106 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,106 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,107 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,107 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,107 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:59,107 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,107 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:59,107 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,107 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,107 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,107 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,107 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,107 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:59,107 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,107 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:59,108 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,108 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,108 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,108 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,108 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,108 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:59,108 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,108 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:43:59,108 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,108 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,108 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,108 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,502 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,502 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:43:59,502 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,502 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:43:59,502 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,503 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:59,503 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,504 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,505 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,505 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:43:59,505 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,505 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,506 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:59,507 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,507 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,507 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,507 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:43:59,507 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,507 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,508 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,508 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,508 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,508 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,509 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:43:59,509 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,509 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:59,509 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:59,509 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,509 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,509 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,510 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,510 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,510 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:43:59,510 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,510 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,512 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:43:59,512 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,512 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,512 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,513 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:59,513 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,513 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:59,513 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:59,513 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:59,513 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:59,513 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,516 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:43:59,516 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,516 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,516 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,517 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:43:59,517 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,517 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:59,517 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:59,517 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:59,517 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:43:59,517 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,523 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:43:59,523 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,523 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,524 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,524 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 8
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:43:59,525 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,525 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:43:59,525 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:43:59,525 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,525 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,526 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,526 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,526 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,526 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:59,526 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,526 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:43:59,526 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,527 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,527 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,527 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,527 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,527 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:59,527 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,527 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:43:59,527 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,528 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,528 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,528 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,528 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,528 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:43:59,528 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,528 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:43:59,528 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:43:59 +08:00

2018-05-09 21:43:59,528 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:43:59,528 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:43:59,528 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:43:59 +08:00

2018-05-09 21:44:00,546 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,547 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:00,547 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,547 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:00,547 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,548 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:00,548 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,549 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,550 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,551 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:00,551 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,551 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,554 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:00,554 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,554 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,555 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,555 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:00,555 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,555 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,557 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:00,558 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,558 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,558 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,559 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:00,559 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,559 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:00,559 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:00,559 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,560 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:00,560 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,560 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,561 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,562 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:00,562 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,562 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,564 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:00,564 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,564 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,565 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,566 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:00,566 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,566 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:00,566 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:00,566 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:00,566 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:00,566 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,568 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:00,568 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,568 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,568 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,569 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:00,569 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,569 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:00,569 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:00,570 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:00,570 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:00,570 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,571 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:00,571 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,571 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,572 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,572 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 9
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:00,572 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,572 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:00,572 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:00,572 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,573 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:00,573 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,573 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,573 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,573 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:00,573 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,573 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:00,573 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,574 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:00,574 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,574 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,574 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,574 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:00,574 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,574 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:00,574 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,574 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:00,574 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,575 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,575 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,575 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:00,575 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,575 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:00,575 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:00,575 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:00,575 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:00,575 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:00 +08:00

2018-05-09 21:44:02,080 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,081 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:02,081 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,081 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:02,081 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,106 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 25 ms with result: SqlDataReader

2018-05-09 21:44:02,106 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,106 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,107 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,107 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:02,107 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,107 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,108 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:02,108 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,108 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,108 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,108 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:02,108 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,108 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,108 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:02,108 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,108 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,108 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,109 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:02,109 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,109 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:02,109 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:02,109 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,137 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 27 ms with result: SqlDataReader

2018-05-09 21:44:02,137 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,137 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,137 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,137 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:02,137 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,137 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,139 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:02,139 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,139 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,139 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,140 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:02,140 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,140 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:02,140 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:02,140 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:02,140 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:02,140 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,140 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:02,140 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,141 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,141 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,141 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:02,141 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,141 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:02,141 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:02,141 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:02,141 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:02,141 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,141 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:02,141 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,142 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,142 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,142 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 10
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:02,142 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,142 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:02,142 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:02,142 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,142 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:02,142 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,143 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,143 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,143 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:02,143 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,143 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:02,143 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,143 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:02,143 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,144 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,144 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,144 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:02,144 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,144 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:02,144 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,144 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:02,144 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,144 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,144 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,144 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:02,144 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,144 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:02,144 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,145 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:02,145 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,145 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,880 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,880 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:02,880 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,881 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:02,881 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,893 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:44:02,893 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,893 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,893 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,894 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:02,894 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,894 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,903 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:44:02,903 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,903 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,903 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,904 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:02,904 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,904 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,909 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:44:02,909 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,909 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,909 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,909 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:02,909 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,909 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:02,909 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:02,909 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,912 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:02,912 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,912 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,912 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,913 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:02,913 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,913 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,913 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:02,913 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,913 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,914 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,914 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:02,914 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,914 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:02,914 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:02,914 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:02,914 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:02,914 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,914 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:02,914 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,915 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,915 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,915 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:02,915 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,915 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:02,915 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:02,915 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:02,915 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:02,915 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,916 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:02,916 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,916 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,916 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,916 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:02,916 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,916 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:02,917 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:02,917 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,918 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:02,918 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,918 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,918 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,918 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:02,918 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,918 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:02,918 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,919 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:02,919 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,919 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,919 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,919 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:02,919 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,919 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:02,919 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,920 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:02,920 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,920 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,920 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,920 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:02,920 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,920 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:02,920 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:02,920 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:02,920 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:02,921 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:02 +08:00

2018-05-09 21:44:03,702 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,702 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:03,702 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,702 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:03,703 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,704 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:03,705 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,705 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,706 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,706 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:03,706 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,706 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,707 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:03,707 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,707 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,707 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,707 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:03,707 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,707 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,708 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:03,708 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,708 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,708 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,708 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:03,708 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,708 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:03,708 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:03,708 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,709 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:03,709 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,709 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,710 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,710 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:03,710 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,710 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,711 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:03,711 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,712 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,712 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,713 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:03,713 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,713 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:03,713 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:03,713 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:03,713 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:03,713 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,714 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:03,714 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,714 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,714 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,715 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:03,715 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,715 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:03,715 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:03,715 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:03,715 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:03,715 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,727 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 21:44:03,727 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,727 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,728 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,729 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 12
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:03,729 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,729 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:03,729 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:03,729 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:03,732 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:03,732 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:03,732 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:03 +08:00

2018-05-09 21:44:04,782 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,782 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:04,782 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,782 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:04,782 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,804 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 21 ms with result: SqlDataReader

2018-05-09 21:44:04,804 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,804 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,804 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,805 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:04,805 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,805 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,805 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:04,805 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,805 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,805 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,805 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:04,805 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,805 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,805 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:04,805 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,806 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,806 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,806 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:04,806 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,806 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:04,806 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:04,806 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,806 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:04,806 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,806 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,807 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,807 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:04,807 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,807 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,807 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:04,807 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,807 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,807 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,808 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:04,808 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,808 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:04,808 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:04,808 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:04,808 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:04,808 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,808 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:04,808 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,808 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,808 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,809 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:04,809 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,809 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:04,809 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:04,809 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:04,809 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:04,809 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,809 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:04,809 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,809 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,809 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,810 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:04,810 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,810 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:04,810 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:04,810 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,811 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:04,811 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,811 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,811 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,811 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:04,811 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,811 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:04,812 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,812 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:04,812 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,812 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,812 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,812 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:04,812 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,812 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:04,812 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,814 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:04,814 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,814 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,814 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,814 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:04,814 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,814 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:04,814 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:04,815 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:04,815 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:04,815 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:04 +08:00

2018-05-09 21:44:05,595 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,595 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:05,595 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,595 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:05,595 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,612 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 16 ms with result: SqlDataReader

2018-05-09 21:44:05,612 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,612 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,613 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,613 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:05,613 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,613 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:05,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,615 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:05,615 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,615 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,617 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:05,618 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,618 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,618 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,619 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:05,619 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,619 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:05,619 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:05,619 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,621 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:05,621 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,621 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:05,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,622 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,623 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:05,623 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,623 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,623 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,623 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:05,623 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,624 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:05,624 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:05,624 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:05,624 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:05,624 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,624 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:05,624 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,624 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,624 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,625 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:05,625 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,625 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:05,625 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:05,625 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:05,625 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:05,625 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,625 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:05,625 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,625 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,625 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,626 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 10
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:05,626 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,626 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:05,626 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:05,626 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,626 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:05,626 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,626 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,627 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,627 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:05,627 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,627 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:05,627 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,627 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:05,627 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,627 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:05,628 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:05,629 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:05 +08:00

2018-05-09 21:44:06,215 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,216 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:06,216 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,216 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:06,216 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,219 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:44:06,219 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,219 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,220 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,221 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:06,221 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,221 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,222 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:06,222 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,222 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,222 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,222 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:06,223 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,223 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:06,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,224 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,225 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:06,225 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,225 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:06,225 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:06,225 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,226 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:06,226 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,226 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,226 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,227 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:06,227 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,227 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,229 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:06,229 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,230 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,230 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,231 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:06,231 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,231 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:06,231 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:06,231 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:06,231 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:06,231 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,232 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:06,232 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,232 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,232 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,233 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:06,233 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,233 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:06,233 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:06,233 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:06,233 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:06,233 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,234 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:06,234 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,234 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,235 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,235 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 9
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:06,235 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,236 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:06,236 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:06,236 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,237 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:06,237 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,237 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,238 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,238 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:06,238 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,238 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:06,238 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,247 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:44:06,247 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,247 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,247 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,247 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:06,247 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,247 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:06,247 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,247 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:06,247 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,248 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,248 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,248 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:06,248 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,248 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:06,248 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,249 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:06,249 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,249 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,736 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,736 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:06,736 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,737 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:06,737 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,740 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:44:06,740 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,740 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,741 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,742 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:06,742 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,742 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,746 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:44:06,746 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,746 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,746 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,747 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:06,747 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,747 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,747 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:06,747 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,748 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,748 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,748 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:06,748 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,749 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:06,749 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:06,749 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,749 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:06,750 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,750 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,750 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,751 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:06,751 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,751 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,752 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:06,752 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,752 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,753 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,753 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:06,753 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,753 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:06,753 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:06,753 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:06,753 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:06,753 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,754 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:06,754 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,754 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,754 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,755 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:06,755 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,755 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:06,755 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:06,755 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:06,755 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:06,755 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,756 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:06,756 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,756 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,756 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,756 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 8
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:06,756 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,756 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:06,756 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:06,756 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,782 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 25 ms with result: SqlDataReader

2018-05-09 21:44:06,782 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,782 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,782 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,782 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:06,782 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,782 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:06,783 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,783 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:06,783 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,783 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,783 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,783 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:06,783 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,783 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:06,783 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,783 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:06,783 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,784 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,784 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,784 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:06,784 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,784 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:44:06,784 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:06,784 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:06,784 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:06,784 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:06 +08:00

2018-05-09 21:44:07,303 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,304 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:07,304 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,304 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:07,304 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,307 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:44:07,307 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,307 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,308 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,308 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:07,309 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,309 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,311 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:07,311 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,311 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,311 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,312 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:07,312 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,312 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,313 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:07,313 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,314 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,314 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,314 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:07,314 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,314 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:07,314 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:07,314 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,315 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:07,315 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,315 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,316 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,316 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:07,316 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,316 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,317 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:07,317 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,317 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,318 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,318 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:07,318 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,318 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:07,318 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:07,318 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:07,318 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:07,318 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,329 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:44:07,329 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,329 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,330 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,330 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:07,330 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,330 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:07,330 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:07,330 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:07,330 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:07,330 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,331 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:07,331 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,331 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,332 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,332 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 7
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:07,332 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,332 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:07,332 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:07,332 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,333 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:07,333 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,338 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,338 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,338 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:07,338 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,338 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:07,338 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,338 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:07,338 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,338 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,338 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,338 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:07,338 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,339 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:07,339 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,339 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:07,339 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,339 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,339 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,339 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:07,339 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,339 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:44:07,339 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,339 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:07,339 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,339 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,806 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,807 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:07,807 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,807 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:07,807 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,808 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:07,808 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,809 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,809 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,810 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:07,810 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,810 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,811 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:07,811 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,811 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,811 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,811 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:07,811 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,811 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,812 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:07,812 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,812 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,812 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,813 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:07,813 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,813 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:07,813 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:07,813 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,815 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:07,815 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,815 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,816 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,816 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:07,816 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,816 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,817 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:07,817 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,817 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,817 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,818 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:07,818 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,818 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:07,818 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:07,818 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:07,818 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:07,818 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,819 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:07,819 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,820 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,820 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,820 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:07,820 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,820 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:07,821 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:07,821 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:07,821 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:07,821 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,821 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:07,822 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,822 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,822 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,822 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:07,823 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,823 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:07,823 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:07,823 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,833 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:44:07,833 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,833 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,833 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,833 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:07,833 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,834 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:07,834 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,835 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:07,835 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,835 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,835 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,835 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:07,835 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,835 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:07,835 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,835 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:07,835 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,836 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,836 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,836 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:07,836 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,836 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:44:07,836 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:07,836 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:07,836 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:07,836 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:07 +08:00

2018-05-09 21:44:08,312 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,313 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:08,313 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,313 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:08,313 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,314 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:08,314 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,315 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,316 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,316 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:08,316 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,316 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,317 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:08,317 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,317 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,317 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,318 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:08,318 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,318 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,318 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:08,318 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,319 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,319 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,319 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:08,319 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,319 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:08,319 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:08,319 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,321 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:08,321 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,321 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,321 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,321 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:08,321 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,321 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,322 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:08,322 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,323 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,324 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:08,324 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,324 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:08,324 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:08,324 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:08,324 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:08,324 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,325 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:08,325 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,325 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,325 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,326 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:08,326 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,326 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:08,326 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:08,326 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:08,326 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:08,326 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,327 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:08,328 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,328 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,328 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,329 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 5
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:08,329 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,329 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:08,329 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:08,329 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,330 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:08,330 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,330 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,331 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,331 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:08,331 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,331 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:08,331 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,332 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:08,332 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,332 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,332 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,332 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:08,332 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,332 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:08,332 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,342 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:44:08,342 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,342 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,343 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,343 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:08,343 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,343 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:44:08,343 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,345 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:08,345 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,345 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,768 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,768 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:08,768 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,768 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:08,768 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,772 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:44:08,772 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,772 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,773 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,773 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:08,773 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,773 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,774 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:08,774 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,774 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,774 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,774 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:08,774 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,774 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,774 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:08,774 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,774 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,775 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,775 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:08,775 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,775 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:08,775 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:08,775 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,775 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:08,775 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,776 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,776 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,776 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:08,776 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,776 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,777 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:08,777 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,777 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,777 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,777 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:08,777 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,777 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:08,777 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:08,777 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:08,777 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:08,777 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,796 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 18 ms with result: SqlDataReader

2018-05-09 21:44:08,796 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,796 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,797 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,797 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:08,797 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,797 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:08,797 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:08,797 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:08,797 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:08,797 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,797 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:08,798 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,798 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,798 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,798 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 4
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:08,798 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,798 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:08,798 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:08,798 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,799 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:08,799 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,799 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,799 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,799 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:08,799 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,799 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:08,799 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,799 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:08,800 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:08,801 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:08,801 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:08,801 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:08 +08:00

2018-05-09 21:44:09,274 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,275 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:09,275 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,275 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:09,275 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,276 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:09,276 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,277 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,278 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,278 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:09,278 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,279 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,300 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 21 ms with result: SqlDataReader

2018-05-09 21:44:09,300 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,300 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,300 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,301 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:09,301 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,301 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,302 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,302 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,302 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,302 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,302 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:09,302 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,302 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:09,302 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:09,302 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,303 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,303 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,303 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,303 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,304 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:09,304 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,304 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,306 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:09,306 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,306 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,306 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,307 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:09,307 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,307 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:09,307 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:09,307 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:09,307 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:09,307 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,312 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:44:09,312 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,313 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,313 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,314 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:09,314 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,314 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:09,314 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:09,314 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:09,314 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:09,314 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,314 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,314 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,314 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,314 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,315 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:09,315 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,315 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:09,315 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:09,315 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,315 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,315 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,315 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,316 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,317 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,317 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,317 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:09,317 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,317 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:09,317 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,317 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,317 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,317 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,814 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,814 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:09,814 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,814 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:09,815 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,815 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,815 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,816 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,816 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,817 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:09,817 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,817 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,817 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,817 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,817 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,818 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,818 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:09,818 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,818 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,818 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,818 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,818 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,818 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,819 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:09,819 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,819 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:09,819 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:09,819 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,819 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,819 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,820 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,820 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,820 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:09,820 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,820 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,821 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,821 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,821 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,822 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,822 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:09,822 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,822 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:09,822 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:09,822 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:09,822 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:09,822 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,823 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,823 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,823 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,824 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,824 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:09,824 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,824 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:09,824 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:09,824 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:09,824 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:09,824 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,837 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 21:44:09,837 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,837 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,837 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,838 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:09,838 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,838 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:09,838 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:09,838 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,840 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:09,840 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,840 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,840 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,841 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:09,841 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,841 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:09,841 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,842 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,842 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,842 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,842 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,842 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:09,842 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,842 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:09,842 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,842 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,842 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,843 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,843 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,843 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:09,843 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,843 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:09,843 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:09,844 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:09,844 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:09,844 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:09 +08:00

2018-05-09 21:44:10,242 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,243 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:10,244 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,244 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:10,244 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,245 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:10,245 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,246 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,247 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,248 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:10,248 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,248 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,249 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:10,249 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,250 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,250 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,251 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:10,251 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,251 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,251 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:10,251 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,252 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,252 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,253 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:10,253 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,253 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:10,253 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:10,253 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,254 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:10,254 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,254 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,255 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,255 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:10,255 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,255 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,256 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:10,256 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,257 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,257 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,258 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:10,258 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,258 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:10,259 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:10,259 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:10,259 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:10,259 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,259 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:10,259 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,260 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,260 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,262 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:10,262 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,262 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:10,262 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:10,262 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:10,262 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:10,262 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,263 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:10,263 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,263 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,263 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,264 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:10,264 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,264 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:10,264 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:10,264 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,265 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:10,265 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,265 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,265 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,265 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:10,265 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,265 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:10,265 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,270 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:44:10,270 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,270 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,271 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,271 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:10,271 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,271 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:10,271 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:10,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:10,272 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,273 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:10,273 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,273 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:10,273 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,273 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,712 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,713 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:10,713 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,713 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:10,713 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,717 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:44:10,717 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,718 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,718 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:10,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,719 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,721 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:10,721 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,721 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,721 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,722 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:10,722 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,722 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,722 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:10,722 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,722 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,722 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,723 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:10,723 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,723 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:10,723 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:10,723 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,724 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:10,724 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,725 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,725 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,725 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:10,725 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,725 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,727 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:10,727 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,727 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,728 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,728 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:10,728 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,728 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:10,728 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:10,728 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:10,728 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:10,728 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,730 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:10,730 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,730 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,730 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,731 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:10,731 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,731 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:10,731 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:10,731 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:10,731 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:10,731 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,742 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:44:10,742 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,742 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,743 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,743 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:10,743 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,743 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:10,743 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:10,743 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,744 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:10,744 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,744 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,745 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,745 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:10,745 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,745 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:10,745 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,745 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:10,745 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,745 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,745 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,745 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:10,745 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,745 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:10,745 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,746 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:10,746 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,746 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,746 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,746 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:10,746 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,746 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:10,746 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:10,746 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:10,746 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:10,746 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:10 +08:00

2018-05-09 21:44:11,225 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,225 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:11,225 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,225 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:11,225 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,231 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:44:11,231 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,231 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,232 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,233 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:11,233 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,233 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,234 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:11,234 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,234 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,235 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,235 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:11,235 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,235 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,236 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:11,236 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,236 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,236 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,237 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:11,237 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,237 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:11,237 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:11,237 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,238 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:11,238 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,238 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,239 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,239 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:11,239 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,239 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,242 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:44:11,242 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,243 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,243 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,244 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:11,244 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,245 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:11,245 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:11,245 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:11,245 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:11,245 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,252 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:44:11,252 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,252 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,252 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,253 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:11,253 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,253 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:11,253 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:11,253 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:11,253 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:11,253 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,254 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:11,254 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,255 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,255 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,255 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:11,255 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,255 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:11,255 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:11,255 [45] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,266 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:44:11,266 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,266 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,266 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,266 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:11,266 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,266 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:11,267 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,269 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:11,269 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,269 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,269 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,269 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:11,269 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,269 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:11,269 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,270 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:11,270 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,270 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,270 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,270 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:11,271 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,271 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:11,271 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:11,271 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:11,271 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:11,271 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:11 +08:00

2018-05-09 21:44:12,501 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,501 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:12,501 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,501 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:12,501 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,502 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:12,503 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,503 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,503 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:12,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:12,504 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,505 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,505 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,505 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:12,505 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,505 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,505 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:12,505 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,506 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,506 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,506 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:12,506 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,506 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:12,506 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:12,506 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,507 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:12,507 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,507 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,508 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,508 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:12,508 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,508 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:12,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,509 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:12,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:12,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:12,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:12,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:12,510 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,511 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:12,511 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,511 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,512 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,512 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:12,512 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,512 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:12,512 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:12,512 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:12,512 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:12,512 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,513 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:12,513 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,513 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,513 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,513 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:12,513 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,513 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:12,513 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:12,513 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,514 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:12,514 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,514 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,514 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,514 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:12,514 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,514 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:12,514 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,529 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-09 21:44:12,529 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,529 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,529 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,529 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:12,529 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,529 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:12,529 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,538 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:44:12,538 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,539 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,539 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,539 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:12,539 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,539 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:12,539 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:12,542 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:12,542 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:12,542 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:12 +08:00

2018-05-09 21:44:13,646 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,646 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:13,646 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,646 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:13,646 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,647 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:13,647 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,647 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,648 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,649 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:13,649 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,649 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,649 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:13,649 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,649 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,650 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,650 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:13,650 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,650 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,653 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:13,653 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,653 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,653 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,654 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:13,654 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,654 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:13,654 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:13,654 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,656 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:13,656 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,656 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:13,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,657 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,658 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:13,658 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,658 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,659 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,659 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:13,659 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,659 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:13,659 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:13,659 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:13,659 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:13,660 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,661 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:13,661 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,661 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,661 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,662 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:13,662 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,662 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:13,662 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:13,662 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:13,662 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:13,662 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,665 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:13,665 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,665 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,665 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,666 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:13,666 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,666 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:13,666 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:13,666 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,683 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 17 ms with result: SqlDataReader

2018-05-09 21:44:13,683 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,683 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,684 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,684 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:13,684 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,684 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:13,684 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,684 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:13,684 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,685 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,685 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,685 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:13,685 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,685 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:13,685 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,685 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:13,685 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,685 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,686 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,686 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:13,686 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,686 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:13,686 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:13,686 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:13,686 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:13,686 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:13 +08:00

2018-05-09 21:44:14,147 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,148 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:14,148 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,148 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:14,148 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,155 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 21:44:14,155 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,156 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,157 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,158 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:14,158 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,158 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,160 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:14,160 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,160 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,161 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,162 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:14,162 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,162 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,162 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:14,162 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,162 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,162 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,163 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:14,163 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,163 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:14,163 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:14,163 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,163 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:14,163 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,164 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,164 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,164 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:14,164 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,164 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,164 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:14,165 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,165 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,165 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,165 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:14,166 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,166 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:14,166 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:14,166 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:14,166 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:14,166 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,166 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:14,166 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,166 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,166 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,167 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:14,167 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,167 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:14,167 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:14,167 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:14,167 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:14,167 [47] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,167 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:14,167 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,167 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,168 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,168 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:14,168 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,168 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:14,168 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:14,168 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,168 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:14,168 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,169 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,169 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,169 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:14,169 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,169 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:14,169 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,169 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:14,169 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,169 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:14,170 [43] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:14 +08:00

2018-05-09 21:44:15,115 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,115 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:15,115 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,115 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:15,115 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,119 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:44:15,119 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,119 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,119 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,119 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:15,119 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,119 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,122 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:15,122 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,123 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,123 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,123 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:15,123 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,123 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,124 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:15,124 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,125 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,125 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,125 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:15,125 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,125 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:15,125 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:15,125 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,135 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:44:15,135 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,135 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,135 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,135 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:15,135 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,135 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,138 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:44:15,139 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,139 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,139 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,139 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:15,139 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,139 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:15,139 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:15,139 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:15,139 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:15,139 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,140 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:15,140 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,140 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,141 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,141 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:15,141 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,141 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:15,141 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:15,141 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:15,141 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:15,141 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,142 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:15,142 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,142 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,142 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,142 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 4
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:15,142 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,142 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:15,142 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:15,142 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,143 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:15,143 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,143 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,143 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,143 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:15,143 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,143 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:15,143 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,144 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:15,144 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,145 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,145 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,145 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:15,145 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,145 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:15,145 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,148 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:44:15,148 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,148 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,148 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,148 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:15,148 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,148 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:15,148 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,149 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:15,149 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,149 [48] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,537 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,537 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:44:15,537 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,537 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:44:15,538 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,539 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:15,539 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,540 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,541 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,541 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:44:15,541 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,541 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,543 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:15,543 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,543 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,543 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,544 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:44:15,544 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,544 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,546 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:15,546 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,546 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,546 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,547 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:44:15,547 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,547 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:15,547 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:15,547 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,547 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:15,547 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,548 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,548 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,548 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:44:15,548 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,548 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,549 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:15,549 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,550 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,550 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,551 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:15,551 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,551 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:15,551 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:15,551 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:15,551 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:15,551 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,552 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:15,552 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,552 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,553 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,553 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:44:15,553 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,553 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:15,553 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:15,553 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:15,553 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:44:15,553 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,554 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:15,554 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,555 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,555 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,555 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 5
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:44:15,555 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,555 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:44:15,555 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:44:15,556 [19] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,557 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:44:15,557 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,557 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,557 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,557 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:15,557 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,557 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:44:15,557 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,558 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:15,558 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,558 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,559 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,559 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:15,559 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,559 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:44:15,559 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,559 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:44:15,559 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,560 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,560 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,560 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:44:15,560 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,560 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:44:15,560 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:44:15 +08:00

2018-05-09 21:44:15,574 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-09 21:44:15,574 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:44:15,574 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:44:15 +08:00

2018-05-09 21:48:37,173 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:37 +08:00

2018-05-09 21:48:37,183 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-09 21:48:37,183 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:37,184 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:37 +08:00

2018-05-09 21:48:37,186 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 15

2018-05-09 21:48:37,186 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:37,186 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:37 +08:00

2018-05-09 21:48:37,380 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:37 +08:00

2018-05-09 21:48:38,005 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-09 21:48:38,005 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,005 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-09 21:48:38,005 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,007 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-09 21:48:38,007 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,008 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,009 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,010 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-09 21:48:38,010 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,010 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,010 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-09 21:48:38,010 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,011 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,112 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,208 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 21:48:38,209 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,209 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615616' (Type = String, Size = 4000)

2018-05-09 21:48:38,209 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,211 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:48:38,212 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,262 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,269 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:38,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:48:38,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:38,293 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,309 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,420 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,421 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 21:48:38,422 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,422 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:48:38,422 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,423 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:38,423 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,423 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,424 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,425 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:38,425 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,425 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:48:38,425 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,425 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:38,425 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,425 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,432 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,438 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:48:38,438 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,438 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,438 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:38,438 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,439 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,439 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,440 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:48:38,440 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,440 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,440 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:38,440 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,440 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,449 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,458 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-09 21:48:38,458 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,458 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 21:48:38,458 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,459 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:38,459 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,464 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,465 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,466 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:48:38,466 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,466 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,466 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:38,466 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,466 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,475 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,485 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-09 21:48:38,485 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,485 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 21:48:38,485 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:48:38,485 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:48:38,485 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,486 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:38,486 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,495 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,496 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,496 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-09 21:48:38,496 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,496 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 21:48:38,496 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:48:38,496 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:48:38,496 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,497 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:38,497 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,497 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,502 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,524 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:48:38,524 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,524 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 21:48:38,524 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,525 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:38,525 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,531 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,533 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,539 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:38,539 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,539 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:48:38,539 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,539 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:38,539 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,542 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,543 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,544 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:38,544 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,544 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:48:38,544 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,544 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:38,544 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,545 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,545 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,545 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:38,545 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,545 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:48:38,545 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,545 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:38,545 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,546 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,546 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,546 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:38,546 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,546 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-09 21:48:38,546 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:38,546 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:38,546 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:38,546 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:38 +08:00

2018-05-09 21:48:41,668 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,677 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:48:41,677 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,677 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:48:41,677 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,683 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:48:41,683 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,684 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,685 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,685 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:48:41,685 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,685 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,685 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:41,686 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,686 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,686 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,686 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:48:41,686 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,686 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,692 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:48:41,692 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,692 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,692 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,694 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:48:41,694 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,694 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:48:41,694 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:48:41,694 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,695 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:41,695 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,695 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,695 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,695 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:48:41,695 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,695 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,696 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:41,696 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,696 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,696 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,698 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:48:41,698 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,698 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:48:41,698 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:48:41,698 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:48:41,698 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:48:41,698 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,704 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 21:48:41,704 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,705 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,705 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,705 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:48:41,705 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,705 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:48:41,705 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:48:41,705 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:48:41,705 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:48:41,705 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,706 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:41,706 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,706 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,706 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,708 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:48:41,708 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,708 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:48:41,708 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:48:41,708 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,709 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:41,709 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,710 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,710 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,710 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:41,710 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,710 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:48:41,710 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,710 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:41,710 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,711 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,711 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,712 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:41,712 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,712 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:48:41,712 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,712 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:41,712 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,712 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,712 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,712 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:41,712 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,713 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:48:41,713 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:41,713 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:41,713 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:41,713 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:41 +08:00

2018-05-09 21:48:43,090 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,090 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:48:43,090 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,091 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:48:43,091 [10] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,109 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 18 ms with result: SqlDataReader

2018-05-09 21:48:43,109 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,109 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,110 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,111 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:48:43,111 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,111 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,116 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:48:43,116 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,116 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,117 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,117 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:48:43,117 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,117 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,118 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:48:43,118 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,119 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,119 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,119 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:48:43,119 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,119 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:48:43,119 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:48:43,119 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,121 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:48:43,121 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,121 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,121 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,122 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:48:43,122 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,122 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,125 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:48:43,125 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,125 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,125 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,126 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:48:43,126 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,126 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:48:43,126 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:48:43,126 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:48:43,126 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:48:43,126 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,129 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:48:43,129 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,129 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,129 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,129 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:48:43,129 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,129 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:48:43,129 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:48:43,129 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:48:43,129 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:48:43,129 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,130 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:43,130 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,130 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,131 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,131 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:48:43,131 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,131 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:48:43,131 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:48:43,131 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,132 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:43,132 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,132 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,132 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,132 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:43,132 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,132 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:48:43,132 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:43,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:43,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:48:43,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:43,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:43,134 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,134 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:48:43,134 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:43,134 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:43,134 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:43,134 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:43 +08:00

2018-05-09 21:48:47,542 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,543 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:48:47,543 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,543 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:48:47,543 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,544 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:47,544 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,544 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,545 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,545 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:48:47,546 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,546 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,546 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:47,546 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,546 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,546 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,547 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:48:47,547 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,547 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,547 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:47,547 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,547 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,548 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,548 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:48:47,548 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,548 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:48:47,548 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:48:47,548 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,549 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:47,549 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,549 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,549 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,550 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:48:47,550 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,550 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,550 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:47,550 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,551 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,551 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,552 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:48:47,552 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,552 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:48:47,552 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:48:47,552 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:48:47,552 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:48:47,552 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,552 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:47,552 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,553 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,553 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,554 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:48:47,554 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,554 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:48:47,554 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:48:47,554 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:48:47,554 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:48:47,554 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,556 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:48:47,557 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,557 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,557 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,558 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:48:47,558 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,558 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:48:47,558 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:48:47,559 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,560 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:48:47,560 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,560 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,561 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,561 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:47,561 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,561 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:48:47,561 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,561 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:47,562 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,562 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,562 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,562 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:47,562 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,562 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:48:47,562 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,563 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:47,563 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,563 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,563 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,563 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:48:47,563 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,563 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:48:47,563 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:48:47 +08:00

2018-05-09 21:48:47,564 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:48:47,564 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:48:47,565 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:48:47 +08:00

2018-05-09 21:51:36,107 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:36 +08:00

2018-05-09 21:51:36,116 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-09 21:51:36,117 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:36,117 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:36 +08:00

2018-05-09 21:51:36,119 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 15

2018-05-09 21:51:36,119 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:36,119 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:36 +08:00

2018-05-09 21:51:36,190 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:36 +08:00

2018-05-09 21:51:36,843 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-09 21:51:36,843 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:36,844 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-09 21:51:36,844 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:36 +08:00

2018-05-09 21:51:36,845 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-09 21:51:36,845 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:36,846 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:36 +08:00

2018-05-09 21:51:36,847 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:36 +08:00

2018-05-09 21:51:36,848 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-09 21:51:36,848 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:36,848 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:36 +08:00

2018-05-09 21:51:36,849 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-09 21:51:36,850 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:36,850 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:36 +08:00

2018-05-09 21:51:36,947 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:36 +08:00

2018-05-09 21:51:37,045 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 21:51:37,045 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,045 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615616' (Type = String, Size = 4000)

2018-05-09 21:51:37,045 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,048 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:51:37,048 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,100 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,107 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,131 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:37,131 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,131 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:37,131 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,131 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:37,131 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,148 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,253 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,254 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 21:51:37,254 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,254 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:37,254 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,255 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:37,255 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,255 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,256 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,256 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:37,256 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,256 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:37,256 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,257 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:37,257 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,257 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,263 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,269 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:37,269 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,269 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,270 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:37,270 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,271 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,271 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,272 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:37,272 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,272 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,272 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:37,272 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,272 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,280 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,290 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-09 21:51:37,290 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,290 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 21:51:37,290 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,295 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:51:37,295 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,300 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,301 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,302 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:37,302 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,302 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,302 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:37,302 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,302 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,311 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,321 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-09 21:51:37,321 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,321 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 21:51:37,321 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:37,321 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:37,321 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,322 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:37,322 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,327 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,327 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,328 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-09 21:51:37,328 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,328 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 21:51:37,328 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:37,328 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:37,328 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,328 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:37,329 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,329 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,334 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,357 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:37,357 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,357 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 21:51:37,357 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,357 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:37,357 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,363 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,366 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,372 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:37,372 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,372 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:37,372 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,372 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:37,372 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,375 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,375 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,376 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:37,377 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,377 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:37,377 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,377 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:37,377 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,377 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:37,378 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:37 +08:00

2018-05-09 21:51:40,268 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,277 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:40,277 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,277 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:40,277 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,277 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:40,277 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,278 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,278 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,278 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:40,278 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,278 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,279 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:40,279 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,279 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,279 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,279 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:40,279 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,279 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,279 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:40,279 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,279 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,280 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,281 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:40,281 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,281 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:40,281 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:40,281 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,281 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:40,281 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,282 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,282 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,282 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:40,283 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,283 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,283 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:40,283 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,283 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,284 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,286 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:40,286 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,286 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:40,286 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:40,286 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:40,286 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:40,287 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,288 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:40,288 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,288 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,289 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,289 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:40,290 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,290 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:40,290 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:40,290 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:40,290 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:40,290 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,291 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:40,292 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,292 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,292 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,294 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:40,294 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,294 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:40,294 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:40,294 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,296 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:51:40,297 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,298 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,298 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,298 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:40,298 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,298 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:40,298 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,299 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:40,299 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,299 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,299 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,299 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:40,299 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,299 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:40,300 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,300 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:40,300 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,300 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,300 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,300 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:40,300 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,300 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:40,300 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:40,301 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:40,301 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:40,301 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:40 +08:00

2018-05-09 21:51:41,804 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,805 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:41,805 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,805 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:41,805 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,808 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:51:41,808 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,809 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,810 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,810 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:41,810 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,810 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,811 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:41,811 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,811 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,811 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,812 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:41,812 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,812 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,812 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:41,812 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,812 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,813 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,813 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:41,813 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,813 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:41,813 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:41,813 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,814 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:41,814 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,814 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,815 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,815 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:41,815 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,815 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,816 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:41,816 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,817 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,817 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,817 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:41,817 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,817 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:41,817 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:41,818 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:41,818 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:41,818 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,825 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:51:41,825 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,825 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,825 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,826 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:41,826 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,826 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:41,826 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:41,826 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:41,826 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:41,826 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,828 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:51:41,828 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,828 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,829 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,832 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:41,832 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,832 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:41,832 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:41,832 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,833 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:41,833 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,834 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,834 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,834 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:41,834 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,834 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:41,834 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,834 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:41,834 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,834 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,834 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,834 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:41,834 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,835 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:41,835 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,835 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:41,835 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,835 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,835 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,835 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:41,835 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,835 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:41,835 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:41,835 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:41,835 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:41,835 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:41 +08:00

2018-05-09 21:51:45,634 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,634 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:45,634 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,634 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:45,634 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,639 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 21:51:45,639 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,639 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,640 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,640 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:45,640 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,640 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,641 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:45,641 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,641 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,642 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,642 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:45,642 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,642 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,643 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:45,643 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,643 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,643 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,643 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:45,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:45,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:45,644 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,645 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:45,646 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,646 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,646 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,646 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:45,647 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,647 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,649 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:51:45,649 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,649 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,650 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,650 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:45,650 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,650 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:45,650 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:45,650 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:45,650 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:45,650 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,651 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:45,652 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,652 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,652 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,653 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:45,653 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,653 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:45,653 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:45,653 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:45,653 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:45,653 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,654 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:45,654 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,655 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,655 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,657 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 10
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:45,658 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,658 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:45,658 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:45,658 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,669 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 21:51:45,669 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,669 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,669 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,670 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:45,670 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,670 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:45,670 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,671 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:45,671 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,671 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,671 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,671 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:45,671 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,671 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:45,671 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,679 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:51:45,679 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,679 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,679 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,679 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:45,679 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,679 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:45,679 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:45,680 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:45,680 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:45,680 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:45 +08:00

2018-05-09 21:51:46,901 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,901 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:46,901 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,901 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:46,901 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,905 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:51:46,905 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,905 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,905 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:46,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,906 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:46,907 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,907 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,907 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,907 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:46,907 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,907 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,907 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:46,907 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,908 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,908 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,909 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:46,909 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,909 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:46,909 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:46,909 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,909 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:46,910 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,910 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,910 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,910 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:46,910 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,910 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,938 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 27 ms with result: SqlDataReader

2018-05-09 21:51:46,938 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,938 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,938 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,939 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:46,939 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,939 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:46,939 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:46,939 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:46,939 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:46,939 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,939 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:46,939 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,939 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,939 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,940 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:46,940 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,940 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:46,940 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:46,940 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:46,940 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:46,940 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,940 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:46,940 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,940 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,940 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,941 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:46,941 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,941 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:46,941 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:46,941 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,941 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:46,941 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,941 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,941 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,941 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:46,941 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,941 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:46,941 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:46,942 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:46,943 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:46,943 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:46,943 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:46 +08:00

2018-05-09 21:51:49,015 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,015 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:49,016 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,016 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:49,016 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,018 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:49,018 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,018 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,019 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,020 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:49,020 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,020 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,021 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:49,021 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,021 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,022 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,022 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:49,022 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,022 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,022 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:49,022 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,022 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,022 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,023 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:49,023 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,023 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:49,023 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:49,023 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,023 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:49,023 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,023 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,023 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,024 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:49,024 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,024 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,024 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:49,024 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,024 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,024 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,025 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:49,025 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,025 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:49,025 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:49,025 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:49,025 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:49,025 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,035 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:51:49,035 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,035 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,036 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,037 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:49,037 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,037 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:49,037 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:49,037 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:49,037 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:49,037 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,040 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 21:51:49,040 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,040 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,040 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,041 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 11
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:49,041 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,041 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:49,041 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:49,041 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,041 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:49,041 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,042 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,042 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,042 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:49,042 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,042 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:49,042 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,042 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:49,042 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,043 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,043 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,043 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:49,043 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,043 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:49,043 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,044 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:49,044 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,044 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,044 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,044 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:49,044 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,044 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:49,044 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:49,045 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:49,045 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:49,045 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:49 +08:00

2018-05-09 21:51:50,284 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,285 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:50,285 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,285 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:50,285 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,293 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-09 21:51:50,293 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,293 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,294 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,295 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:50,295 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,295 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,305 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 21:51:50,305 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,306 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,306 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,306 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:50,306 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,306 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,310 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 21:51:50,310 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,310 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,311 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,311 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:50,311 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,311 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:50,311 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:50,311 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,313 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:50,313 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,313 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,313 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,313 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:50,313 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,313 [28] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,314 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:50,314 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,314 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,314 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,314 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:50,314 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,314 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:50,314 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:50,314 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:50,314 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:50,314 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,339 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 24 ms with result: SqlDataReader

2018-05-09 21:51:50,339 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,339 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,339 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,340 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:50,340 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,340 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:50,340 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:50,340 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:50,340 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:50,340 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,341 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:50,341 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,341 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,341 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,342 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:50,342 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,342 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:50,342 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:50,342 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,343 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:50,343 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,343 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,343 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,343 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:50,343 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,343 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:50,343 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,344 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:50,344 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,344 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,344 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,344 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:50,344 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,344 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:50,344 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,344 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:50,344 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,344 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,344 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,345 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:50,345 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,345 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:51:50,345 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:50,345 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:50,345 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:50,345 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:50 +08:00

2018-05-09 21:51:51,113 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,114 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:51,114 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,114 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:51,114 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,122 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-09 21:51:51,122 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,122 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,123 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,123 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:51,123 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,123 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,123 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:51,123 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,124 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,124 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,124 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:51,124 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,124 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,124 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:51,124 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,124 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,125 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,125 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:51,125 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,125 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:51,125 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:51,125 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,125 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:51,125 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,126 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,126 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,126 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:51,126 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,126 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,127 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:51,127 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,127 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,127 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,128 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:51,128 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,128 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:51,128 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:51,128 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:51,128 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:51,128 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,128 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:51,128 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,128 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,129 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,129 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:51,129 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,129 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:51,129 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:51,129 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:51,129 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:51,129 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,130 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:51,130 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,130 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,130 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,132 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 5
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:51,132 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,132 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:51,132 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:51,132 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,145 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-09 21:51:51,145 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,145 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,145 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,145 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:51,145 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,145 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:51,145 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:51,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:51,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:51,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:51,146 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,147 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,147 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,147 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 21:51:51,147 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,147 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 21:51:51,147 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,147 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:51,147 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,147 [30] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,950 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,950 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 21:51:51,950 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,950 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 21:51:51,951 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,956 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-09 21:51:51,956 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,956 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,957 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,957 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 21:51:51,957 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,957 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,959 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:51,959 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,959 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,959 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,960 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 21:51:51,960 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,960 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,960 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:51,960 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,960 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,960 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,961 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 21:51:51,961 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,961 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:51,961 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:51,961 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,963 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 21:51:51,963 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,963 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,963 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,964 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 21:51:51,964 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,964 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,964 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:51,964 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,964 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,965 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,965 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:51,965 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,965 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:51,965 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:51,965 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 21:51:51,965 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:51,965 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,966 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:51,966 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,966 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,966 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,967 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 21:51:51,967 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,967 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:51,967 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:51,967 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 21:51:51,967 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 21:51:51,967 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,967 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 21:51:51,967 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,967 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,968 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,969 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 4
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 21:51:51,969 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,969 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 21:51:51,969 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 21:51:51,969 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,979 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 21:51:51,979 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 21:51:51,979 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,979 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 21:51:51 +08:00

2018-05-09 21:51:51,979 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
