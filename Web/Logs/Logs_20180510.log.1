2018-05-10 15:44:01,338 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,373 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,393 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 20 ms with result: SqlDataReader

2018-05-10 15:44:01,393 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,393 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,394 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,394 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:44:01,394 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,394 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,402 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-10 15:44:01,402 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,402 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,402 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,402 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:44:01,402 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,402 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:01,402 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:01,402 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,405 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 15:44:01,405 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,406 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,406 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,406 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:44:01,406 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,406 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,407 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:01,407 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,408 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,408 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,408 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:01,408 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,408 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:01,408 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:01,408 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:01,408 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:01,408 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,410 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:44:01,410 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,410 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,411 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,411 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:01,411 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,411 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:01,411 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:01,411 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:01,411 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:01,411 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,412 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:01,412 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,412 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,415 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,417 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:44:01,417 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,417 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:01,417 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:01,417 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,422 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-10 15:44:01,422 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,422 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,422 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,422 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:01,422 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,422 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:01,422 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,423 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:01,423 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,424 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,424 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,424 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:01,424 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,424 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:44:01,424 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,450 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 26 ms with result: SqlDataReader

2018-05-10 15:44:01,450 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,450 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,451 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,451 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:01,451 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,451 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:01,451 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:01,474 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 22 ms with result: SqlDataReader

2018-05-10 15:44:01,474 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:01,474 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:01 +08:00

2018-05-10 15:44:02,780 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,780 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:44:02,780 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,780 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:44:02,780 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,781 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:02,781 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,781 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,782 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,782 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:44:02,782 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,782 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,783 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:02,783 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,783 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,783 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,783 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:44:02,783 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,783 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,784 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:02,784 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,784 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,784 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,784 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:44:02,784 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,784 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:02,784 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:02,784 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,785 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:02,785 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,785 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,785 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,785 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:44:02,785 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,785 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,785 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:02,785 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,787 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,787 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,787 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:02,787 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,787 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:02,787 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:02,787 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:02,787 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:02,787 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,788 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:02,788 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,788 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,788 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,789 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:02,789 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,789 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:02,789 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:02,789 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:02,789 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:02,789 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,794 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-10 15:44:02,794 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,794 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,795 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,795 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:44:02,796 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,796 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:02,796 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:02,796 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,799 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 15:44:02,800 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,800 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,800 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,800 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:02,800 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,800 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:02,800 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,801 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:02,801 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,801 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,801 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,801 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:02,801 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,801 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:44:02,801 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,802 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:02,802 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,802 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,802 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,802 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:02,802 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,802 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:02,802 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:02,803 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:02,803 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:02,803 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:02 +08:00

2018-05-10 15:44:48,456 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:48 +08:00

2018-05-10 15:44:48,456 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:44:48,456 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:48,456 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:44:48,456 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:48 +08:00

2018-05-10 15:44:48,498 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 41 ms with result: SqlDataReader

2018-05-10 15:44:48,498 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:48,498 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:48 +08:00

2018-05-10 15:44:48,499 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:48 +08:00

2018-05-10 15:44:48,499 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:44:48,499 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:48,499 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:48 +08:00

2018-05-10 15:44:48,633 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 134 ms with result: SqlDataReader

2018-05-10 15:44:48,633 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:48,633 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:48 +08:00

2018-05-10 15:44:48,633 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:48 +08:00

2018-05-10 15:44:48,634 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:44:48,634 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:48,634 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:48 +08:00

2018-05-10 15:44:48,800 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 166 ms with result: SqlDataReader

2018-05-10 15:44:48,801 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:48,801 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:48 +08:00

2018-05-10 15:44:48,801 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:48 +08:00

2018-05-10 15:44:48,801 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:44:48,801 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:48,801 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:48,801 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:48,801 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:48 +08:00

2018-05-10 15:44:48,990 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 188 ms with result: SqlDataReader

2018-05-10 15:44:48,990 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:48,990 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:48 +08:00

2018-05-10 15:44:48,991 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:48 +08:00

2018-05-10 15:44:48,991 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:44:48,991 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:48,991 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:48 +08:00

2018-05-10 15:44:49,161 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 169 ms with result: SqlDataReader

2018-05-10 15:44:49,161 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:49,161 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,162 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,162 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:49,162 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:49,162 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:49,162 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:49,162 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:49,162 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:49,162 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,205 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 42 ms with result: SqlDataReader

2018-05-10 15:44:49,205 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:49,205 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,205 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,206 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:49,206 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:49,206 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:49,206 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:49,206 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:49,206 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:49,206 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,280 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 74 ms with result: SqlDataReader

2018-05-10 15:44:49,280 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:49,280 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,281 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,282 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:44:49,282 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:49,282 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:49,282 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:49,282 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,350 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 68 ms with result: SqlDataReader

2018-05-10 15:44:49,350 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:49,351 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,351 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,351 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:49,351 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:49,351 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:49,351 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,404 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 52 ms with result: SqlDataReader

2018-05-10 15:44:49,404 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:49,404 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,404 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,404 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:49,404 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:49,404 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:44:49,404 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,438 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 33 ms with result: SqlDataReader

2018-05-10 15:44:49,438 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:49,438 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,438 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,438 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:49,438 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:49,438 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:49,438 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:49,475 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 36 ms with result: SqlDataReader

2018-05-10 15:44:49,475 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:49,475 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:49 +08:00

2018-05-10 15:44:52,326 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,326 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:44:52,326 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,326 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:44:52,326 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,327 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:52,327 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,327 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,328 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,328 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:44:52,328 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,328 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,329 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:52,329 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,329 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,329 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,329 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:44:52,329 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,329 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,329 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:52,330 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,330 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,330 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,330 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:44:52,330 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,330 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:52,330 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:52,330 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,331 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:52,331 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,331 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,331 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,332 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:44:52,332 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,332 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,332 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:52,332 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,333 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,333 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,333 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:52,333 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,333 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:52,333 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:52,333 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:52,333 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:52,333 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,334 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:52,334 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,334 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,334 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,335 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:52,335 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,335 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:52,335 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:52,335 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:52,335 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:52,335 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,335 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:52,335 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,336 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,336 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,336 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:44:52,336 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,336 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:52,336 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:52,336 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,337 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:52,337 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,338 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,338 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,338 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:52,338 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,338 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-10 15:44:52,338 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,366 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 28 ms with result: SqlDataReader

2018-05-10 15:44:52,366 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,367 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,367 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,367 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:52,367 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,367 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:44:52,367 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,382 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 15 ms with result: SqlDataReader

2018-05-10 15:44:52,382 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,382 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,383 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,383 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:52,383 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,383 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:52,383 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:52,383 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:52,383 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:52,383 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:52 +08:00

2018-05-10 15:44:53,938 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,938 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:44:53,938 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,938 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:44:53,938 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,939 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:53,939 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,939 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,940 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,940 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:44:53,941 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,941 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,941 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:53,941 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,941 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,941 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,941 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:44:53,941 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,941 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,942 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:53,942 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,942 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,942 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,942 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:44:53,942 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,942 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:53,942 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:53,942 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,943 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:53,943 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,943 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,943 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,943 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:44:53,943 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,943 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,944 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:53,944 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,944 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,944 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,944 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:53,944 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,944 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:53,944 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:53,945 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:53,945 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:53,945 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,945 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:53,945 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,945 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,945 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,946 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:53,946 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,946 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:53,946 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:53,946 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:53,946 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:53,946 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,953 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-10 15:44:53,953 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,954 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,954 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,955 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:44:53,955 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,955 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:53,956 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:53,956 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,957 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:53,958 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,958 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,958 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,958 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:53,958 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,958 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:53,958 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,959 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:53,959 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,959 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,959 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,959 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:53,959 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,959 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:44:53,959 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,960 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:53,960 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,960 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,960 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,960 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:53,960 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,960 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:53,960 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:53,961 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:53,961 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:53,961 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:53 +08:00

2018-05-10 15:44:55,688 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,689 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:44:55,689 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,689 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:44:55,689 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,689 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:55,689 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,690 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,690 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,690 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:44:55,690 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,691 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,691 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:55,691 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,691 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,691 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,692 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:44:55,692 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,692 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,692 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:55,692 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,692 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,692 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,693 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:44:55,693 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,693 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:55,693 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:55,693 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,693 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:55,693 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,693 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,694 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,694 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:44:55,694 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,694 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,694 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:55,694 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,694 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,695 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,696 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:55,696 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,696 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:55,696 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:55,696 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:55,696 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:55,696 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,696 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:55,696 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,696 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,697 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,697 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:55,697 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,697 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:55,697 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:55,697 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:55,697 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:55,697 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,698 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:55,698 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,698 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,698 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,698 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:44:55,698 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,698 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:55,698 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:55,703 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,705 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:44:55,705 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,705 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,706 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,706 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:55,706 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,706 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:55,706 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,707 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:55,707 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,707 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,707 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,707 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:55,707 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,707 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:44:55,707 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,708 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:55,708 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,708 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,708 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,708 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:55,708 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,708 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:55,708 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:55,710 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 15:44:55,710 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:55,711 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:55 +08:00

2018-05-10 15:44:57,689 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,689 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:44:57,690 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,690 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:44:57,690 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,690 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:57,690 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,691 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,691 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,691 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:44:57,691 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,691 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,692 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:57,692 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,692 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,692 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,692 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:44:57,692 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,692 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,692 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:57,692 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,692 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,693 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,693 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:44:57,693 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,693 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:57,693 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:57,693 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,693 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:57,693 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,693 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,694 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,694 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:44:57,694 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,694 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,694 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:57,694 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,695 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,696 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,696 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:57,696 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,696 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:57,696 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:57,696 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:57,696 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:57,696 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,697 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:57,697 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,702 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,702 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,703 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:57,703 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,703 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:57,703 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:57,703 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:57,704 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:57,704 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,705 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:57,705 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,705 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,705 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,707 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:44:57,707 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,707 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:57,707 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:57,707 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,708 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:57,708 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,709 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,709 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,709 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:57,709 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,710 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:57,710 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,710 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:57,710 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,710 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,711 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,711 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:57,711 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,711 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:44:57,711 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,711 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:57,711 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,711 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,711 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,711 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:57,711 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,711 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:57,711 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:57,714 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 15:44:57,714 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:57,714 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:57 +08:00

2018-05-10 15:44:58,223 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,223 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:44:58,223 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,223 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:44:58,223 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,224 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:44:58,225 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,225 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,226 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,226 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:44:58,226 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,226 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,250 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 23 ms with result: SqlDataReader

2018-05-10 15:44:58,250 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,250 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,250 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,250 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:44:58,251 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,251 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,251 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:58,251 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,251 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,251 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,251 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:44:58,252 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,252 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:58,252 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:58,252 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,252 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:58,252 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,252 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,252 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,253 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:44:58,253 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,253 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,253 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:58,253 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,253 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,253 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,254 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:58,254 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,254 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:58,254 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:58,254 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:58,254 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:58,254 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,254 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:58,254 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,254 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,255 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,255 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:58,255 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,255 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:58,255 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:58,255 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:58,255 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:58,255 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,256 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:58,256 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,256 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,256 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,257 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:44:58,257 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,257 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:58,257 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:58,257 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,257 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:58,258 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,258 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,258 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,259 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:58,259 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,259 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-10 15:44:58,259 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,260 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:44:58,260 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,260 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,260 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,260 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:58,260 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,261 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:44:58,261 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,261 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:58,261 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,261 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,261 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,261 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:58,261 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,261 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:58,261 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,261 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:58,261 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,262 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,687 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,687 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:44:58,687 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,688 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:44:58,688 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,692 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-10 15:44:58,692 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,692 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,692 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,693 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:44:58,693 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,693 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,693 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:58,693 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,693 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,693 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,694 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:44:58,694 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,694 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,694 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:58,694 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,694 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,694 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,694 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:44:58,694 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,694 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:58,694 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:58,695 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,695 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:58,695 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,695 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,695 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,695 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:44:58,697 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,697 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,703 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-10 15:44:58,703 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,703 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,703 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,704 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:58,704 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,704 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:58,704 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:58,704 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:58,704 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:58,704 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,728 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 23 ms with result: SqlDataReader

2018-05-10 15:44:58,728 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,728 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,728 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,730 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:44:58,730 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,730 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:58,730 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:58,730 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:58,730 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:44:58,730 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,773 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 42 ms with result: SqlDataReader

2018-05-10 15:44:58,773 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,773 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,773 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,774 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:44:58,774 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,774 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:44:58,774 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:44:58,774 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,776 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 15:44:58,776 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,777 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,777 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,777 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:58,777 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,777 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:44:58,777 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,777 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:58,777 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,778 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,778 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,778 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:58,778 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,778 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:44:58,778 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,781 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 15:44:58,781 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,781 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,781 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,782 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:44:58,782 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,782 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:44:58,782 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:44:58 +08:00

2018-05-10 15:44:58,782 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:44:58,782 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:44:58,782 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:44:58 +08:00

2018-05-10 15:45:03,410 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,410 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:03,410 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,410 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:03,410 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,411 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,411 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,411 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,412 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,412 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:03,412 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,412 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,412 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,412 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,412 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,413 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,413 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:03,413 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,413 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,413 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,413 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,413 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,413 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,414 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:03,414 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,414 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:03,414 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:03,414 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,414 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,414 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,414 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,415 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,415 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:03,415 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,415 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,415 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,415 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,415 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,416 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,416 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:03,416 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,416 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:03,416 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:03,416 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:03,416 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:03,416 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,417 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,417 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,417 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,417 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,423 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:03,423 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,423 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:03,423 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:03,423 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:03,423 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:03,423 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,424 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:45:03,424 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,425 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,425 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,426 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:03,426 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,426 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:03,426 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:03,426 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,427 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:45:03,427 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,430 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,432 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,432 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:03,433 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,433 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-10 15:45:03,433 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,433 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,433 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,434 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,434 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,434 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:03,434 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,434 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:03,434 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,434 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,434 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,435 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,435 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,435 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:03,435 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,435 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:03,435 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,435 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,435 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,435 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,921 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,921 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:03,921 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,922 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:03,922 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,922 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,922 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,923 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,923 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,923 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:03,923 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,923 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,924 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,924 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,924 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,924 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,924 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:03,924 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,924 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,924 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,924 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,925 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,925 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,925 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:03,925 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,925 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:03,925 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:03,925 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,926 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,926 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,926 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,926 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,926 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:03,926 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,926 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,927 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,927 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,927 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,927 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,928 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:03,928 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,928 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:03,928 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:03,928 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:03,928 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:03,928 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,928 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,928 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,928 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,929 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,929 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:03,929 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,929 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:03,929 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:03,930 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:03,930 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:03,930 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,930 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,930 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,930 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,930 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,931 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:03,931 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,931 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:03,931 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:03,931 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,931 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,931 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,932 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,936 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,936 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:03,936 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,936 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:03,936 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,944 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-10 15:45:03,944 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,945 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,945 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,945 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:03,945 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,945 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:03,945 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,946 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:45:03,946 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,947 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,947 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,947 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:03,947 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,947 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:03,947 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:03,947 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:03,947 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:03,948 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:03 +08:00

2018-05-10 15:45:04,470 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,470 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:04,470 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,470 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:04,470 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,471 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:04,471 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,471 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,472 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,472 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:04,472 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,472 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,472 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:04,472 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,472 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,472 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,473 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:04,473 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,473 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,473 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:04,473 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,473 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,473 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,473 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:04,474 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,474 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:04,474 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:04,474 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,474 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:04,474 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,474 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,474 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,474 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:04,475 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,475 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,475 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:04,475 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,475 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,475 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,476 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:04,476 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,476 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:04,476 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:04,476 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:04,476 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:04,476 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,476 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:04,476 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,476 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,477 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,477 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:04,477 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,477 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:04,477 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:04,477 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:04,477 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:04,477 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,477 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:04,477 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,477 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,478 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,478 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:04,478 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,478 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:04,478 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:04,478 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,483 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-10 15:45:04,483 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,484 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,484 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,484 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:04,484 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,484 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:04,484 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,492 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-10 15:45:04,492 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,493 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,493 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,493 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:04,493 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,493 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:04,493 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,493 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:04,494 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,494 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,494 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,494 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:04,494 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,494 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:04,494 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:04,494 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:04,494 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:04,495 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:04 +08:00

2018-05-10 15:45:05,354 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,355 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:05,355 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,355 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:05,355 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,355 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:05,355 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,355 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,356 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,356 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:05,356 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,356 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,357 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:05,357 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,357 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,357 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,357 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:05,357 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,357 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,358 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:05,358 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,358 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,358 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,358 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:05,358 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,358 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:05,358 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:05,358 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,359 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:05,359 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,359 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,359 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,359 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:05,360 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,360 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,360 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:05,360 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,360 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,360 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,361 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:05,361 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,361 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:05,361 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:05,361 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:05,361 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:05,361 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,362 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:05,362 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,363 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,363 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,369 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:05,369 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,369 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:05,369 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:05,369 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:05,369 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:05,369 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,379 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-10 15:45:05,379 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,379 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,380 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,380 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:05,380 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,380 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:05,380 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:05,380 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,381 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:05,381 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,381 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,382 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,382 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:05,382 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,382 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:05,382 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,382 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:05,382 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,382 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,382 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,383 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:05,383 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,383 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:05,383 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,383 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:05,383 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,383 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,383 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,383 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:05,383 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,383 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:05,383 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:05,384 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:05,384 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:05,384 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:05 +08:00

2018-05-10 15:45:07,912 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,912 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:07,912 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,912 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:07,912 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,913 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:07,913 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,913 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,913 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,914 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:07,914 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,914 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,915 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:07,915 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,915 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,915 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,915 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:07,915 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,915 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,915 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:07,915 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,915 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,916 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,916 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:07,916 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,916 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:07,916 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:07,916 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,916 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:07,916 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,917 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,917 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,917 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:07,917 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,917 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,917 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:07,917 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,918 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,918 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,918 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:07,918 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,918 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:07,918 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:07,918 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:07,919 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:07,919 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,919 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:07,919 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,919 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,919 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,920 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:07,920 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,920 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:07,920 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:07,920 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:07,920 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:07,920 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,920 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:07,920 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,920 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,926 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,926 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:07,926 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,927 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:07,927 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:07,927 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,928 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:45:07,928 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,929 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,931 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,931 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:07,931 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,931 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-10 15:45:07,931 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,932 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:07,932 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,932 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,932 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,932 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:07,932 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,932 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:07,932 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,933 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:07,933 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,933 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,933 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,933 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:07,933 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,933 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:07,933 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:07,934 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:07,934 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:07,934 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:07 +08:00

2018-05-10 15:45:09,000 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,000 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:09,000 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,000 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:09,000 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,011 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-10 15:45:09,011 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,011 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,014 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,014 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:09,014 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,014 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,028 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-10 15:45:09,028 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,028 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,028 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,029 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:09,029 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,029 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,041 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-10 15:45:09,041 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,041 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,041 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,041 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:09,041 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,041 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:09,041 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:09,041 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,042 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:09,042 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,042 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,042 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,043 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:09,043 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,043 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,043 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:09,043 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,043 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,044 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,044 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:09,044 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,044 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:09,044 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:09,044 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:09,044 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:09,044 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,048 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 15:45:09,048 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,048 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,049 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,049 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:09,049 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,049 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:09,049 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:09,049 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:09,049 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:09,049 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,050 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:09,050 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,050 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,050 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,051 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:09,051 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,051 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:09,051 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:09,051 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,051 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:09,051 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,052 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,052 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,052 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:09,052 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,052 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:09,052 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,052 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:09,052 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,052 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,053 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,053 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:09,053 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,053 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:09,053 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,053 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:09,053 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,053 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,053 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,053 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:09,054 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,054 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:09,054 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:09,054 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:09,054 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:09,054 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:09 +08:00

2018-05-10 15:45:10,587 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,587 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:10,587 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,587 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:10,587 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,596 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-10 15:45:10,596 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,596 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,597 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,597 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:10,597 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,597 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,597 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:10,597 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,598 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,598 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,598 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:10,598 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,598 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,599 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:10,599 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,599 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,599 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,599 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:10,599 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,599 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:10,599 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:10,599 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,600 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:10,600 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,600 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,601 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,601 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:10,601 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,601 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,602 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:10,602 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,602 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,602 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,603 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:10,603 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,603 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:10,603 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:10,603 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:10,603 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:10,603 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,604 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:10,604 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,604 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,604 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,605 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:10,605 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,605 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:10,605 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:10,605 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:10,605 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:10,605 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,606 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:10,606 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,606 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,606 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,606 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:10,607 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,607 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:10,607 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:10,607 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,608 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:45:10,608 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,608 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,608 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,608 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:10,608 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,608 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-10 15:45:10,608 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,609 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:10,609 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,609 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,609 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,609 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:10,609 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,610 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:10,610 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,630 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 20 ms with result: SqlDataReader

2018-05-10 15:45:10,631 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,631 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,631 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,631 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:10,631 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,631 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:10,631 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:10,652 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 20 ms with result: SqlDataReader

2018-05-10 15:45:10,652 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:10,652 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:10 +08:00

2018-05-10 15:45:11,539 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,539 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:11,539 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,539 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:11,539 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,540 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:11,540 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,540 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,540 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,541 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:11,541 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,541 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,541 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:11,541 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,541 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,541 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,542 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:11,542 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,542 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,542 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:11,542 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,542 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,542 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,542 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:11,542 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,542 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:11,542 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:11,542 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,543 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:11,543 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,543 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,543 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,544 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:11,544 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,544 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,544 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:11,544 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,544 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,545 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,545 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:11,545 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,545 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:11,545 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:11,545 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:11,545 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:11,545 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,546 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:11,546 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,546 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,546 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,547 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:11,547 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,547 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:11,547 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:11,547 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:11,547 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:11,547 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,547 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:11,547 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,547 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,548 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,548 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:11,548 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,548 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:11,548 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:11,548 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,549 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:11,549 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,549 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,554 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,554 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:11,554 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,554 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:11,554 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,559 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-10 15:45:11,559 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,559 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,559 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,559 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:11,559 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,559 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:11,559 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,565 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-10 15:45:11,565 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,565 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,565 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,565 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:11,565 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,565 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:11,565 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:11,566 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:11,566 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:11,566 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:11 +08:00

2018-05-10 15:45:12,254 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,255 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:12,255 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,255 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:12,255 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,255 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,255 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,256 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,256 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,256 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:12,256 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,256 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,257 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,257 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,257 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,257 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,257 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:12,258 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,258 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,258 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,258 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,258 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,258 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,258 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:12,258 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,258 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:12,258 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:12,258 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,259 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,259 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,259 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,259 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,259 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:12,259 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,259 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,260 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,260 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,260 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,260 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,261 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:12,261 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,261 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:12,261 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:12,261 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:12,261 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:12,261 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,261 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,261 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,261 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,266 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,267 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:12,267 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,267 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:12,267 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:12,267 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:12,267 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:12,267 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,268 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,268 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,268 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,268 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,268 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:12,268 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,268 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:12,268 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:12,269 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,269 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,269 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,270 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,270 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,270 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:12,270 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,270 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-10 15:45:12,270 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,281 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-10 15:45:12,281 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,282 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,282 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,282 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:12,282 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,282 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:12,282 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,282 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,282 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,282 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,283 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,283 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:12,283 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,283 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:12,283 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,283 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,283 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,284 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,769 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,769 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:12,769 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,769 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:12,769 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,770 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,770 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,770 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,771 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,771 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:12,771 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,771 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,771 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,771 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,771 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,772 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,772 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:12,772 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,772 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,772 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,772 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,772 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,772 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,773 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:12,773 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,773 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:12,773 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:12,773 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,773 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,773 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,773 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,773 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,774 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:12,774 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,774 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,774 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,774 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,775 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,775 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,775 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:12,775 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,775 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:12,775 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:12,775 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:12,775 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:12,775 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,776 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,776 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,776 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,776 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,776 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:12,776 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,776 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:12,776 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:12,776 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:12,777 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:12,777 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,777 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,777 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,777 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,777 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,784 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:12,784 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,784 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:12,784 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:12,784 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,797 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-10 15:45:12,797 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,797 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,798 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,798 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:12,798 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,798 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:12,798 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,798 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,798 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,798 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,799 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,799 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:12,799 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,799 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:12,799 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,800 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,800 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,800 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,800 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,800 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:12,800 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,800 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:12,800 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:12,800 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:12,800 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:12,801 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:12 +08:00

2018-05-10 15:45:15,748 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,748 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:15,748 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,748 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:15,748 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,749 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:15,749 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,749 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,750 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,750 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:15,750 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,750 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,751 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:15,751 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,751 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,751 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,751 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:15,751 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,751 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,751 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:15,751 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,751 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,752 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,752 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:15,752 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,752 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:15,752 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:15,752 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,752 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:15,752 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,752 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,753 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,753 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:15,753 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,753 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,753 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:15,753 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,753 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,754 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,754 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:15,754 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,754 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:15,754 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:15,754 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:15,754 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:15,754 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,755 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:15,755 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,755 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,755 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,755 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:15,755 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,755 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:15,755 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:15,755 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:15,755 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:15,755 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,761 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-10 15:45:15,761 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,761 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,762 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,762 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:15,763 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,763 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:15,763 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:15,763 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,764 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:45:15,764 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,765 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,765 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,765 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:15,765 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,765 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-10 15:45:15,765 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,767 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 15:45:15,767 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,768 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,768 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,768 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:15,768 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,768 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:15,768 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,769 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:15,769 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,769 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,769 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,769 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:15,769 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,769 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:15,769 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:15,770 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:15,770 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:15,770 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:15 +08:00

2018-05-10 15:45:17,003 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,003 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:17,003 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,003 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:17,003 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,004 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,004 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,004 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,005 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,005 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:17,005 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,005 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,006 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,006 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,006 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,006 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,006 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:17,006 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,006 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,007 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,007 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,007 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,007 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,007 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:17,007 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,008 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:17,008 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:17,008 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,008 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,008 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,008 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,008 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,008 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:17,008 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,009 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,009 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,009 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,009 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,009 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,010 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:17,010 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,010 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:17,010 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:17,010 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:17,010 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:17,010 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,010 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,010 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,010 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,011 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,011 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:17,011 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,011 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:17,011 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:17,011 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:17,011 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:17,011 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,011 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,011 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,012 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,012 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,012 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:17,012 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,012 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:17,012 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:17,012 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,018 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-10 15:45:17,019 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,019 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,019 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,019 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:17,019 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,019 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:17,019 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,023 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 15:45:17,023 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,023 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,024 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,024 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:17,024 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,024 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:17,024 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,024 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,024 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,024 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,025 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,025 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:17,025 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,025 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:17,025 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,025 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,025 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,025 [39] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,633 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,633 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:17,633 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,633 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:17,633 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,634 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,634 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,634 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,635 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,635 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:17,635 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,635 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,635 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,635 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,635 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,636 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,636 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:17,636 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,636 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,636 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,636 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,636 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,636 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,637 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:17,637 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,637 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:17,637 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:17,637 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,637 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,637 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,637 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,637 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,638 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:17,638 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,638 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,638 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,638 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,638 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,638 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,639 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:17,639 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,639 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:17,639 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:17,639 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:17,639 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:17,639 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,639 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,639 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,639 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,640 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,640 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:17,640 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,640 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:17,640 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:17,640 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:17,640 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:17,640 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,641 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,641 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,641 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,641 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,645 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:17,645 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,645 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:17,645 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:17,645 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,646 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,646 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,646 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,647 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,647 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:17,647 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,647 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:17,647 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,656 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-10 15:45:17,656 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,656 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,656 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,656 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:17,656 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,656 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:17,656 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,657 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,657 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,657 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,657 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,657 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:17,657 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,657 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:17,657 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:17,658 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:17,658 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:17,658 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:17 +08:00

2018-05-10 15:45:18,325 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,325 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:18,325 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,325 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:18,325 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,326 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:18,326 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,326 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,327 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,327 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:18,327 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,327 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,327 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:18,327 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,328 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,328 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,328 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:18,328 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,328 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,328 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:18,329 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,329 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,329 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,329 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:18,329 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,329 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:18,329 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:18,329 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,330 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:18,330 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,330 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,331 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,331 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:18,331 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,331 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,331 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:18,331 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,331 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,332 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,332 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:18,332 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,332 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:18,332 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:18,332 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:18,332 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:18,332 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,333 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:18,333 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,333 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,333 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,333 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:18,333 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,333 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:18,333 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:18,333 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:18,333 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:18,333 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,334 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:18,334 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,334 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,334 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,335 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:18,335 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,335 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:18,335 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:18,335 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,335 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:18,335 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,336 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,336 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,336 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:18,336 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,336 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:18,336 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,336 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:18,336 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,336 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,336 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,337 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:18,337 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,337 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:18,337 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,337 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:18,337 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,337 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,338 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,338 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:18,338 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,338 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:18,338 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:18,339 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:18,339 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:18,339 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:18 +08:00

2018-05-10 15:45:19,626 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,626 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:19,626 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,626 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:19,626 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,635 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 8 ms with result: SqlDataReader

2018-05-10 15:45:19,635 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,635 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,635 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,636 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:19,636 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,636 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,637 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:19,637 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,637 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,637 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,637 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:19,637 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,637 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,666 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 28 ms with result: SqlDataReader

2018-05-10 15:45:19,666 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,666 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,666 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,667 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:19,667 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,667 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:19,667 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:19,667 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,700 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 33 ms with result: SqlDataReader

2018-05-10 15:45:19,701 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,701 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,701 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,701 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:19,702 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,702 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,758 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 56 ms with result: SqlDataReader

2018-05-10 15:45:19,758 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,758 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,759 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,759 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:19,759 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,759 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:19,759 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:19,759 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:19,759 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:19,759 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,770 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-10 15:45:19,770 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,770 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,771 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,771 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:19,771 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,771 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:19,771 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:19,771 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:19,771 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:19,771 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,775 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 15:45:19,775 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,775 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,776 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,776 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:19,776 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,776 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:19,776 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:19,776 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,777 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:19,777 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,777 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,777 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,777 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:19,778 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,778 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-10 15:45:19,778 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,778 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:19,778 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,778 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,778 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,778 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:19,778 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,778 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:19,779 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,783 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 15:45:19,783 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,783 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,783 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,783 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:19,783 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,783 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:19,783 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:19,809 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 25 ms with result: SqlDataReader

2018-05-10 15:45:19,809 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:19,809 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:19 +08:00

2018-05-10 15:45:20,677 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,677 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:20,677 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,678 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:20,678 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,690 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-10 15:45:20,690 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,690 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,691 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,692 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:20,692 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,692 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,693 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:45:20,693 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,693 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,694 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,694 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:20,694 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,694 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,694 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:20,694 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,694 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,695 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,695 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:20,695 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,695 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:20,695 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:20,695 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,697 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:45:20,697 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,697 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,697 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,697 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:20,697 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,698 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,698 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:20,698 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,698 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,698 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,699 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:20,699 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,699 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:20,699 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:20,699 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:20,699 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:20,699 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,700 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:20,700 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,700 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,700 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,701 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:20,701 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,701 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:20,701 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:20,701 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:20,701 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:20,701 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,701 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:20,701 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,701 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,702 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,702 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:20,702 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,702 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:20,702 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:20,702 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,703 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:20,703 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,703 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,703 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,703 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:20,703 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,703 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:20,703 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,704 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:20,704 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,704 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,704 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,704 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:20,704 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,704 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:20,704 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,704 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:20,704 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,705 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,705 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,705 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:20,705 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,705 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:20,705 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:20,705 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:20,705 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:20,705 [41] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:20 +08:00

2018-05-10 15:45:21,685 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,686 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:21,686 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,686 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:21,686 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,686 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:21,686 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,687 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,687 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,687 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:21,688 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,688 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,688 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:21,688 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,688 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,688 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,688 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:21,688 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,688 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,689 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:21,689 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,689 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,689 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,689 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:21,689 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,689 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:21,689 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:21,689 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,690 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:21,690 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,690 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,690 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,690 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:21,690 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,690 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,691 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:21,691 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,691 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,691 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,692 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:21,692 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,692 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:21,692 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:21,692 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:21,692 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:21,692 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,692 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:21,692 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,692 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,705 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,705 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:21,706 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,706 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:21,706 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:21,706 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:21,706 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:21,706 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,706 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:21,706 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,706 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,707 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,707 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:21,707 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,707 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:21,707 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:21,707 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,708 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:21,708 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,708 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,709 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,709 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:21,709 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,709 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:21,709 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,709 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:21,709 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,709 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,710 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,710 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:21,710 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,710 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:21,710 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,710 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:21,710 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,710 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,710 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,710 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:21,710 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,710 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:21,710 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:21,711 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:21,711 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:21,711 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:21 +08:00

2018-05-10 15:45:22,219 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,219 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:22,219 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,219 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:22,219 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,227 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-10 15:45:22,227 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,227 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,228 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,228 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:22,228 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,228 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,239 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-10 15:45:22,239 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,239 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,239 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,240 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:22,240 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,240 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,251 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-10 15:45:22,251 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,251 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,251 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,252 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:22,252 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,252 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:22,252 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:22,252 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,256 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 15:45:22,256 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,256 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,256 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,256 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:22,257 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,257 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,271 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-10 15:45:22,271 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,272 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,272 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,273 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:22,273 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,273 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:22,273 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:22,273 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:22,273 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:22,273 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,277 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-10 15:45:22,277 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,278 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,278 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,279 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:22,279 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,279 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:22,279 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:22,279 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:22,279 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:22,279 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,280 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,280 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,280 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,281 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,281 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:22,282 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,282 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:22,282 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:22,282 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,282 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,282 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,283 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,283 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,283 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:22,283 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,283 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-10 15:45:22,283 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,284 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,284 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,284 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,284 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,284 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:22,284 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,284 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:22,284 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,285 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,285 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,285 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,285 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,285 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:22,285 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,285 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:22,285 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,285 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,285 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,286 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,848 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,848 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:22,848 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,848 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:22,848 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,849 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,849 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,849 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,850 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,850 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:22,850 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,850 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,850 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,850 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,850 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,850 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,851 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:22,851 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,851 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,851 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,851 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,851 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,851 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,851 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:22,851 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,852 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:22,852 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:22,852 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,875 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 23 ms with result: SqlDataReader

2018-05-10 15:45:22,875 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,875 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,875 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,876 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:22,876 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,876 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,876 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,876 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,877 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,877 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,877 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:22,877 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,877 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:22,878 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:22,878 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:22,878 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:22,878 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,878 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,878 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,878 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,880 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,880 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:22,880 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,880 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:22,881 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:22,881 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:22,881 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:22,881 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,882 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,882 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,882 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,882 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,883 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:22,883 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,883 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:22,883 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:22,883 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,883 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,883 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,883 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,884 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,884 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:22,884 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,884 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:22,884 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,884 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,884 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,884 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,884 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,884 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:22,884 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,884 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:22,884 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,884 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,885 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,885 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,885 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,885 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:22,885 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,885 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:22,885 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:22,885 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:22,885 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:22,885 [33] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:22 +08:00

2018-05-10 15:45:23,292 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,292 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:45:23,292 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,292 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:45:23,292 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,293 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:23,293 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,293 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,294 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,294 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:45:23,294 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,294 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,294 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:23,294 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,295 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,295 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,295 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:45:23,295 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,295 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,297 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 15:45:23,297 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,298 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,298 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,298 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:45:23,298 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,298 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:23,298 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:23,298 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,299 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:23,299 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,299 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,299 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,299 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:45:23,299 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,299 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,300 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:23,300 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,300 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,300 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,300 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:23,300 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,300 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:23,301 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:23,301 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:23,301 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:23,301 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,301 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:23,301 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,301 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,301 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,302 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:45:23,302 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,302 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:23,302 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:23,302 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:23,302 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:45:23,302 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,315 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-10 15:45:23,315 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,315 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,315 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,316 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:45:23,316 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,316 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:45:23,316 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:45:23,316 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,317 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:23,317 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,317 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,317 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,317 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:23,317 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,317 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:45:23,317 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,318 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:23,318 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,318 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,318 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,318 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:23,318 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,318 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:45:23,318 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,319 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:23,319 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,319 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,319 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,319 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:45:23,319 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,319 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:45:23,319 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:45:23 +08:00

2018-05-10 15:45:23,319 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:45:23,319 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:45:23,320 [46] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:45:23 +08:00

2018-05-10 15:55:08,946 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:08 +08:00

2018-05-10 15:55:08,960 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-10 15:55:08,960 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:08,960 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:08 +08:00

2018-05-10 15:55:08,966 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: 15

2018-05-10 15:55:08,966 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:08,966 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:08 +08:00

2018-05-10 15:55:09,103 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:09 +08:00

2018-05-10 15:55:10,132 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-10 15:55:10,132 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,132 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-10 15:55:10,132 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,132 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-10 15:55:10,132 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,132 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,147 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,147 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-10 15:55:10,147 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,147 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,147 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 1 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-10 15:55:10,147 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,147 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,319 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,475 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-10 15:55:10,475 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,475 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615616' (Type = String, Size = 4000)

2018-05-10 15:55:10,475 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,491 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-10 15:55:10,491 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,569 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,585 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,616 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:55:10,632 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,632 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:55:10,632 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,632 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:10,632 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,663 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,917 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,919 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-10 15:55:10,919 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,919 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:55:10,919 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,920 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:55:10,920 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,921 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,922 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,923 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:55:10,923 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,923 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:55:10,923 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,924 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:10,924 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,924 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,934 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,942 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:55:10,942 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,942 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,943 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:10,943 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,945 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,945 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,946 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:55:10,946 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,946 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,947 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:10,947 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,947 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,961 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,974 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-10 15:55:10,974 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,974 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-10 15:55:10,974 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,977 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 15:55:10,977 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,985 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,986 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,988 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:55:10,988 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,988 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:10,989 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:10,989 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:10,989 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:10 +08:00

2018-05-10 15:55:11,003 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,020 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-10 15:55:11,020 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:11,020 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-10 15:55:11,020 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:55:11,020 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:55:11,020 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,023 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 15:55:11,024 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:11,032 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,033 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,033 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-10 15:55:11,033 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:11,033 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-10 15:55:11,033 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:55:11,033 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:55:11,034 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,034 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:11,034 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:11,035 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,043 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,111 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:55:11,111 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:11,111 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-10 15:55:11,111 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,116 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-10 15:55:11,116 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:11,129 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,133 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,144 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:55:11,145 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:11,145 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:55:11,145 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,148 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 15:55:11,148 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:11,152 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,153 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,154 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:55:11,154 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:11,154 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:55:11,155 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,155 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:11,155 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:11,155 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,156 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,156 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:55:11,156 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:11,156 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:55:11,156 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,156 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:11,156 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:11,157 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,157 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,157 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:55:11,157 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:11,157 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-10 15:55:11,157 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:11,157 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:11,157 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:11,157 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:11 +08:00

2018-05-10 15:55:52,305 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:52 +08:00

2018-05-10 15:55:52,306 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-10 15:55:52,306 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:52,306 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615661' (Type = String, Size = 4000)

2018-05-10 15:55:52,306 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:52 +08:00

2018-05-10 15:55:52,307 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:55:52,307 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:52,307 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:52 +08:00

2018-05-10 15:55:52,308 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:52 +08:00

2018-05-10 15:55:52,308 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:55:52,308 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:52,308 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:55:52,308 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:52 +08:00

2018-05-10 15:55:52,311 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 15:55:52,311 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:52,311 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:52 +08:00

2018-05-10 15:55:52,313 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:52 +08:00

2018-05-10 15:55:52,314 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-10 15:55:52,314 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:52,314 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:55:52,314 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:52 +08:00

2018-05-10 15:55:52,315 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:52,315 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:52,315 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:52 +08:00

2018-05-10 15:55:56,541 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,543 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-10 15:55:56,543 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,543 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615661' (Type = String, Size = 4000)

2018-05-10 15:55:56,543 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,544 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:56,544 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,544 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,544 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,544 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:55:56,544 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,544 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:55:56,544 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,549 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-10 15:55:56,549 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,550 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,550 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,550 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-10 15:55:56,550 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,551 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:55:56,551 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,551 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:56,551 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,552 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,583 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,584 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-10 15:55:56,584 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,584 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-10 15:55:56,584 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,585 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:55:56,585 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,586 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,586 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,586 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-10 15:55:56,586 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,586 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-10 15:55:56,586 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,587 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:56,587 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,587 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,587 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,588 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-10 15:55:56,588 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,588 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:55:56,588 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,588 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:56,588 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,589 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,589 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,589 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-10 15:55:56,589 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,589 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:55:56,589 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,590 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:56,590 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,590 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,590 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,590 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:55:56,590 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,590 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:55:56,590 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,591 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:56,591 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,591 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,591 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,591 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:55:56,591 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,591 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:55:56,591 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,597 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-10 15:55:56,598 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,598 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,599 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,608 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:55:56,608 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,608 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:55:56,608 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,608 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:56,608 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,608 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,642 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,642 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:55:56,642 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,642 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:55:56,642 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,642 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:56,642 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,642 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,689 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,689 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,798 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-10 15:55:56,798 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '158' (Type = Int64)

2018-05-10 15:55:56,798 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-10 15:55:56,798 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: 1

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '140' (Type = Int64)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '3' (Type = Int64)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '3' (Type = Int64)

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '3' (Type = Int64)

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '4' (Type = Int64)

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '3' (Type = Int64)

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '消费' (Type = String, Size = 100)

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '13' (Type = Int64)

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '140' (Type = Int64)

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '消费13' (Type = String, Size = 100)

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/10 15:55:56' (Type = DateTime2)

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, @7, NULL, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '3' (Type = Int64)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '4' (Type = Int64)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '3' (Type = Int64)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '消费' (Type = String, Size = 100)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '13' (Type = Int64)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '158' (Type = Int64)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '消费13' (Type = String, Size = 100)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/10 15:55:56' (Type = DateTime2)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-10 15:55:56,814 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:55:56,814 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:56,829 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Committed transaction at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:56,829 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:56 +08:00

2018-05-10 15:55:58,647 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,647 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:55:58,647 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:58,647 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:55:58,647 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,696 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 48 ms with result: SqlDataReader

2018-05-10 15:55:58,696 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:58,696 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,697 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,698 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:55:58,698 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:58,698 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,708 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-10 15:55:58,708 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:58,708 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,708 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,708 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:55:58,708 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:58,708 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,712 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 15:55:58,712 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:58,712 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,713 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,714 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:55:58,715 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:58,715 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:55:58,715 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:55:58,715 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,828 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 113 ms with result: SqlDataReader

2018-05-10 15:55:58,828 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:58,828 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,828 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,829 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:55:58,829 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:58,829 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,876 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 47 ms with result: SqlDataReader

2018-05-10 15:55:58,876 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:58,876 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,877 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,878 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:55:58,879 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:58,879 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:55:58,879 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:55:58,879 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:55:58,879 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:55:58,879 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,970 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 91 ms with result: SqlDataReader

2018-05-10 15:55:58,970 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:58,970 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,970 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:58,972 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:55:58,972 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:58,973 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:55:58,973 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:55:58,973 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:55:58,973 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:55:58,973 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:58 +08:00

2018-05-10 15:55:59,094 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 121 ms with result: SqlDataReader

2018-05-10 15:55:59,094 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:59,094 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:59 +08:00

2018-05-10 15:55:59,094 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:55:59 +08:00

2018-05-10 15:55:59,096 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:55:59,096 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:59,096 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:55:59,096 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:55:59,096 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:55:59 +08:00

2018-05-10 15:55:59,191 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 94 ms with result: SqlDataReader

2018-05-10 15:55:59,192 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:59,192 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:59 +08:00

2018-05-10 15:55:59,192 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:59 +08:00

2018-05-10 15:55:59,192 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:55:59,192 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:59,192 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:55:59,193 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:59 +08:00

2018-05-10 15:55:59,297 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 104 ms with result: SqlDataReader

2018-05-10 15:55:59,297 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:59,297 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:59 +08:00

2018-05-10 15:55:59,297 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:59 +08:00

2018-05-10 15:55:59,297 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:55:59,298 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:59,298 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:55:59,298 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:59 +08:00

2018-05-10 15:55:59,361 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 63 ms with result: SqlDataReader

2018-05-10 15:55:59,361 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:59,361 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:59 +08:00

2018-05-10 15:55:59,361 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:55:59 +08:00

2018-05-10 15:55:59,362 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:55:59,362 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:59,362 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:55:59,362 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:55:59 +08:00

2018-05-10 15:55:59,396 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 34 ms with result: SqlDataReader

2018-05-10 15:55:59,396 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:55:59,396 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:55:59 +08:00

2018-05-10 15:57:10,698 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,699 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:57:10,699 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,699 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:57:10,699 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,718 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 18 ms with result: SqlDataReader

2018-05-10 15:57:10,718 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,718 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,719 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,719 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:57:10,719 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,719 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,743 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 23 ms with result: SqlDataReader

2018-05-10 15:57:10,743 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,743 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,743 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,743 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:57:10,743 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,743 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,744 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:10,744 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,744 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,744 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,745 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:57:10,745 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,745 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:10,745 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:10,745 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,746 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:10,746 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,746 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,746 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,747 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:57:10,747 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,747 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,747 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:10,747 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,748 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,748 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,749 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:10,749 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,749 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:10,749 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:10,749 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:10,749 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:10,749 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,749 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:10,749 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,749 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,750 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,750 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:10,750 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,750 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:10,750 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:10,750 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:57:10,750 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:10,750 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,751 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:10,751 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,751 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,751 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,753 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:57:10,753 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,753 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:10,753 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:10,753 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,754 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:10,754 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,754 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,754 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,754 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:10,754 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,755 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:57:10,755 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,755 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:10,755 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,755 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,755 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,755 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:10,755 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,755 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:57:10,755 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,756 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:10,756 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,756 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,756 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,756 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:10,756 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,756 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:10,756 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:10,756 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:10,756 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:10,757 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:10 +08:00

2018-05-10 15:57:11,496 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,496 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:57:11,496 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,497 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:57:11,497 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,504 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 7 ms with result: SqlDataReader

2018-05-10 15:57:11,504 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,504 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,505 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,505 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:57:11,505 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,505 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,506 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:11,506 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,506 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,506 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,506 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:57:11,506 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,506 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,507 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:11,507 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,507 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,507 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,508 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:57:11,508 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,508 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:11,508 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:11,508 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,510 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:57:11,510 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,510 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,510 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,510 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:57:11,510 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,510 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,511 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:11,511 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,511 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,511 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,513 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:11,514 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,514 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:11,514 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:11,515 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:11,515 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:11,515 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,516 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:57:11,516 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,516 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,516 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,517 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:11,517 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,517 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:11,517 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:11,517 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:57:11,517 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:11,517 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,517 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:11,517 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,517 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,518 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,519 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:57:11,519 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,519 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:11,520 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:11,520 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,520 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:11,520 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,521 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,523 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,523 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:11,523 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,523 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-10 15:57:11,523 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,524 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:11,524 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,524 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,524 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,525 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:11,525 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,525 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:57:11,525 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,525 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:11,525 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,525 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,525 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,525 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:11,525 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,525 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:11,526 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:11,527 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:57:11,527 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:11,527 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:11 +08:00

2018-05-10 15:57:12,336 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,336 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:57:12,336 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,336 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:57:12,336 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,363 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 26 ms with result: SqlDataReader

2018-05-10 15:57:12,363 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,363 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,364 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,364 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:57:12,364 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,364 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,371 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-10 15:57:12,371 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,371 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,371 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,371 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:57:12,371 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,372 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,377 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-10 15:57:12,378 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,378 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,378 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,379 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:57:12,379 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,379 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:12,379 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:12,379 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,380 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:57:12,380 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,380 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,381 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,381 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:57:12,381 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,381 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,381 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:12,381 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,382 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,382 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,383 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:12,383 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,383 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:12,383 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:12,383 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:12,383 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:12,383 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,386 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 15:57:12,386 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,386 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,386 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,387 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:12,387 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,387 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:12,387 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:12,387 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:57:12,387 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:12,387 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,387 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:12,387 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,387 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,388 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,390 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:57:12,390 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,394 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:12,394 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:12,394 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,396 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 15:57:12,396 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,397 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,397 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,397 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:12,397 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,397 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:57:12,397 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,397 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:12,397 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,398 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,398 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,398 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:12,398 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,398 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:57:12,398 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,398 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:12,398 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,398 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,398 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,398 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:12,398 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,398 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:12,399 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:12,399 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:12,399 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:12,400 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:12 +08:00

2018-05-10 15:57:13,006 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,006 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:57:13,006 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,007 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:57:13,007 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,007 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:13,007 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,008 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,009 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,009 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:57:13,009 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,009 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,009 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:13,010 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,010 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,010 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,010 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:57:13,010 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,010 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,010 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:13,010 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,010 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,010 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,011 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:57:13,011 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,011 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:13,011 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:13,011 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,011 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:13,012 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,012 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,012 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,012 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:57:13,012 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,012 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,013 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:13,013 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,013 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,013 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,013 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:13,013 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,013 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:13,013 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:13,013 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:13,014 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:13,014 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,014 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:13,014 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,014 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,014 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,015 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:13,015 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,015 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:13,015 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:13,015 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:57:13,015 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:13,015 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,015 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:13,015 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,015 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,016 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,022 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 4
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:57:13,022 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,022 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:13,022 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:13,022 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,033 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-10 15:57:13,034 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,034 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,034 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,034 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:13,034 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,034 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:57:13,034 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,035 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:13,035 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,035 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,035 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,035 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:13,035 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,035 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:57:13,035 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,036 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:13,036 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,036 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,036 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,036 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:13,036 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,036 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:13,036 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:13,036 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:13,036 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:13,036 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:13 +08:00

2018-05-10 15:57:14,040 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,040 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:57:14,040 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,040 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:57:14,040 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,042 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:57:14,042 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,042 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,043 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,043 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:57:14,043 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,043 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,044 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:14,044 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,044 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,044 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,044 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:57:14,044 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,044 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,044 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:14,044 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,044 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,045 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,045 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:57:14,045 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,045 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:14,045 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:14,045 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,045 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:14,045 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,046 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,046 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,046 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:57:14,046 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,046 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,046 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:14,046 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,047 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,047 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,047 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:14,047 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,047 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:14,047 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:14,047 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:14,047 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:14,047 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,048 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:14,048 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,048 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,048 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,048 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:14,049 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,049 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:14,049 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:14,049 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:57:14,049 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:14,049 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,049 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:14,049 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,049 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,056 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,057 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:57:14,057 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,057 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:14,057 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:14,057 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,069 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 12 ms with result: SqlDataReader

2018-05-10 15:57:14,069 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,070 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,070 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,070 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:14,070 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,070 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:57:14,070 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,070 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:14,070 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,071 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,071 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,071 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:14,071 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,071 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:57:14,071 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,072 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:14,072 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,072 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,072 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,072 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:14,073 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,073 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:14,073 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:14,073 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:14,073 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:14,073 [42] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:14 +08:00

2018-05-10 15:57:21,927 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,927 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:57:21,927 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,927 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:57:21,927 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,928 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:21,928 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,928 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,929 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,929 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:57:21,929 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,929 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,930 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:21,930 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,930 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,930 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,930 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:57:21,930 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,930 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,931 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:21,931 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,931 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,931 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,931 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:57:21,931 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,931 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:21,931 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:21,931 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,932 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:21,932 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,932 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,932 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,932 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:57:21,932 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,932 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,933 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:21,933 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,933 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,933 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,934 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:21,934 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,934 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:21,934 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:21,934 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:21,934 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:21,934 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,934 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:21,934 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,934 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,934 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,935 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:21,935 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,935 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:21,935 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:21,935 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:57:21,935 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:21,935 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,935 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:21,935 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,935 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,936 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,936 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:57:21,936 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,936 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:21,936 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:21,936 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,941 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-10 15:57:21,941 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,942 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,942 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,942 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:21,942 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,942 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:57:21,942 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,943 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:21,943 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,944 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,944 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,944 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:21,944 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,944 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:57:21,944 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,945 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:21,945 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,945 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,945 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,945 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:21,945 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,945 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:21,945 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:21,951 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-10 15:57:21,951 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:21,951 [35] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:21 +08:00

2018-05-10 15:57:23,178 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,178 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:57:23,178 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,178 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:57:23,179 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,179 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,179 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,180 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,180 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,180 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:57:23,180 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,180 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,181 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,181 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,181 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,181 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,181 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:57:23,181 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,181 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,181 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,181 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,181 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,182 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,182 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:57:23,182 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,182 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:23,182 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:23,182 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,182 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,182 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,182 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,183 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,183 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:57:23,183 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,183 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,183 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,183 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,184 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,184 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,184 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:23,184 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,184 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:23,184 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:23,184 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:23,184 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:23,184 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,185 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,185 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,185 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,185 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,185 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:23,185 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,185 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:23,185 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:23,185 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:57:23,185 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:23,186 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,186 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,186 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,186 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,186 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,193 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:57:23,193 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,193 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:23,193 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:23,193 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,194 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:57:23,194 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,195 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,195 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,195 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:23,195 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,195 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-10 15:57:23,196 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,196 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,197 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,197 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,197 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,197 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:23,197 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,197 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:57:23,197 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,199 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 15:57:23,199 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,199 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,200 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,200 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:23,200 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,200 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:23,200 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,202 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 15:57:23,202 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,202 [34] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,836 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,836 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 15:57:23,836 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,836 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 15:57:23,836 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,837 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,837 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,838 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,838 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,844 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 15:57:23,844 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,844 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,845 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,845 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,845 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,845 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,846 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 15:57:23,846 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,846 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,846 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,846 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,846 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,847 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,847 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 15:57:23,847 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,847 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:23,847 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:23,847 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,854 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-10 15:57:23,854 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,854 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,855 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,855 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 15:57:23,855 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,855 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,855 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,855 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,856 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,856 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,856 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:23,856 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,856 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:23,857 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:23,857 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:23,857 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:23,857 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,857 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,857 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,857 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,871 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,872 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 15:57:23,872 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,872 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:23,872 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:23,872 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:57:23,872 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 15:57:23,872 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,872 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,872 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,872 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,873 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,873 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 15:57:23,873 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,873 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 15:57:23,873 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 15:57:23,873 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,874 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,874 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,874 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,874 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,874 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:23,874 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,874 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 15:57:23,874 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,876 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 15:57:23,876 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,876 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,876 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,876 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:23,876 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,876 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 15:57:23,877 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,877 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,877 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,877 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,877 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,877 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 15:57:23,877 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,877 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 15:57:23,877 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 15:57:23 +08:00

2018-05-10 15:57:23,878 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 15:57:23,878 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 15:57:23,878 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 15:57:23 +08:00

2018-05-10 16:01:56,896 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,897 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:01:56,897 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,897 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:01:56,897 [56] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,897 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:01:56,897 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,898 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,898 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,898 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:01:56,898 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,898 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,899 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:01:56,899 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,899 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,899 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,900 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:01:56,900 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,900 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,900 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:01:56,900 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,900 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,900 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,901 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:01:56,901 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,901 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:01:56,901 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:01:56,901 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,901 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:01:56,901 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,901 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,902 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,902 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:01:56,902 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,902 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,902 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:01:56,902 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,903 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,903 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,903 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:01:56,903 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,903 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:01:56,903 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:01:56,903 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:01:56,903 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:01:56,903 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,904 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:01:56,904 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,904 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,904 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,905 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:01:56,905 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,905 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:01:56,905 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:01:56,905 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:01:56,905 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:01:56,905 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,905 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:01:56,905 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,905 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,906 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,906 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:01:56,906 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,906 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:01:56,906 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:01:56,906 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,909 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 16:01:56,909 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,909 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,910 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,910 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:01:56,910 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,910 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:01:56,910 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,910 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:01:56,910 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,910 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,911 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,911 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:01:56,911 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,911 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:01:56,911 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,911 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:01:56,911 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,911 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,911 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,911 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:01:56,911 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,911 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:01:56,911 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:01:56 +08:00

2018-05-10 16:01:56,912 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:01:56,912 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:01:56,912 [68] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:01:56 +08:00

2018-05-10 16:06:16,161 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,162 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:06:16,162 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,162 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:06:16,162 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,219 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 57 ms with result: SqlDataReader

2018-05-10 16:06:16,219 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,219 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:06:16,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,296 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 75 ms with result: SqlDataReader

2018-05-10 16:06:16,296 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,296 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,296 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,297 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:06:16,297 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,297 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,341 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 44 ms with result: SqlDataReader

2018-05-10 16:06:16,341 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,341 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,341 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,342 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:06:16,342 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,342 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:06:16,342 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:06:16,342 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,476 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 133 ms with result: SqlDataReader

2018-05-10 16:06:16,477 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,477 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,477 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,477 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:06:16,477 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,477 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,530 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 52 ms with result: SqlDataReader

2018-05-10 16:06:16,530 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,530 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,531 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,531 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:06:16,531 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,531 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:06:16,531 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:06:16,531 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:06:16,531 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:06:16,531 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,621 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 89 ms with result: SqlDataReader

2018-05-10 16:06:16,621 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,621 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,622 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,622 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:06:16,622 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,622 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:06:16,622 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:06:16,622 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:06:16,622 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:06:16,622 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 37 ms with result: SqlDataReader

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:06:16 +08:00

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:06:16,661 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:06:16 +08:00

2018-05-10 16:08:16,931 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,932 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:08:16,932 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,932 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:08:16,932 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,935 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 16:08:16,935 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,935 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,936 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,936 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:08:16,936 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,936 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,938 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 16:08:16,938 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,938 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,938 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,938 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:08:16,938 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,938 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,940 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 16:08:16,940 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,940 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,940 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,941 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:08:16,941 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,941 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:08:16,941 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:08:16,941 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,943 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 16:08:16,943 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,943 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,944 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,944 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:08:16,944 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,944 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,950 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-10 16:08:16,950 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,950 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,951 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,951 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:08:16,951 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,951 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:08:16,951 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:08:16,951 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:08:16,951 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:08:16,951 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,957 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-10 16:08:16,957 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,957 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,957 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,958 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:08:16,958 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,958 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:08:16,958 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:08:16,958 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:08:16,958 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:08:16,958 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,963 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-10 16:08:16,963 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,963 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,963 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,964 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:08:16,964 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,964 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:08:16,964 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:08:16,964 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,968 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 16:08:16,968 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,968 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,968 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,968 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:08:16,968 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,968 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:08:16,968 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,969 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 16:08:16,969 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:08:16,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:08:16,970 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,972 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 16:08:16,972 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,972 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,972 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,972 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:08:16,972 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,972 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:08:16,972 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:16,973 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:08:16,973 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:16,973 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:16 +08:00

2018-05-10 16:08:20,515 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:08:20 +08:00

2018-05-10 16:08:20,515 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:08:20,515 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:20,515 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:08:20,515 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:08:20 +08:00

2018-05-10 16:08:20,592 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 77 ms with result: SqlDataReader

2018-05-10 16:08:20,592 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:20,592 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:20 +08:00

2018-05-10 16:08:20,593 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:08:20 +08:00

2018-05-10 16:08:20,593 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:08:20,593 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:20,593 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:08:20 +08:00

2018-05-10 16:08:20,668 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 74 ms with result: SqlDataReader

2018-05-10 16:08:20,668 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:20,668 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:20 +08:00

2018-05-10 16:08:20,668 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:08:20 +08:00

2018-05-10 16:08:20,669 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:08:20,669 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:20,669 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:08:20 +08:00

2018-05-10 16:08:20,802 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 133 ms with result: SqlDataReader

2018-05-10 16:08:20,803 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:20,803 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:20 +08:00

2018-05-10 16:08:20,803 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:08:20 +08:00

2018-05-10 16:08:20,803 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:08:20,803 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:20,803 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:08:20,803 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:08:20,803 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:08:20 +08:00

2018-05-10 16:08:20,903 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 99 ms with result: SqlDataReader

2018-05-10 16:08:20,903 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:20,903 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:20 +08:00

2018-05-10 16:08:20,903 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:08:20 +08:00

2018-05-10 16:08:20,903 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:08:20,904 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:20,904 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:08:20 +08:00

2018-05-10 16:08:21,020 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 116 ms with result: SqlDataReader

2018-05-10 16:08:21,020 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:21,020 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,021 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,021 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:08:21,021 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:21,021 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:08:21,021 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:08:21,021 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:08:21,021 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:08:21,021 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,153 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 131 ms with result: SqlDataReader

2018-05-10 16:08:21,153 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:21,153 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,158 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,158 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:08:21,158 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:21,158 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:08:21,158 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:08:21,158 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:08:21,158 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:08:21,158 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,208 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 49 ms with result: SqlDataReader

2018-05-10 16:08:21,208 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:21,208 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,209 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,209 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:08:21,209 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:21,209 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:08:21,209 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:08:21,209 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,319 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 109 ms with result: SqlDataReader

2018-05-10 16:08:21,319 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:21,319 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,319 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,320 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:08:21,320 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:21,320 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:08:21,320 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,391 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 71 ms with result: SqlDataReader

2018-05-10 16:08:21,391 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:21,391 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,391 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,391 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:08:21,391 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:21,391 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:08:21,391 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,436 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 44 ms with result: SqlDataReader

2018-05-10 16:08:21,436 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:21,436 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,436 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,436 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:08:21,436 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:21,436 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:08:21,436 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:08:21 +08:00

2018-05-10 16:08:21,520 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 85 ms with result: SqlDataReader

2018-05-10 16:08:21,520 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:08:21,520 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:08:21 +08:00

2018-05-10 16:09:03,013 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,013 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:09:03,013 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,013 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:09:03,013 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,014 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:09:03,014 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,014 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,015 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,015 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:09:03,015 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,015 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,015 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:09:03,015 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,015 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,015 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,016 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:09:03,016 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,016 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,016 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:09:03,016 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,016 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,016 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,017 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:09:03,017 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,017 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:09:03,017 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:09:03,017 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,017 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:09:03,017 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,017 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,018 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,018 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:09:03,018 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,018 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,018 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:09:03,018 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,018 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,019 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,019 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:09:03,019 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,019 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:09:03,019 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:09:03,019 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:09:03,019 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:09:03,019 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,022 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 16:09:03,022 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,022 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,022 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,023 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:09:03,023 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,023 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:09:03,023 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:09:03,023 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:09:03,023 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:09:03,023 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,023 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:09:03,023 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,023 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,024 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,024 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:09:03,024 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,024 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:09:03,025 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:09:03,025 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,029 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-10 16:09:03,029 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,029 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,030 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,030 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:09:03,030 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,030 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:09:03,030 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,076 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 45 ms with result: SqlDataReader

2018-05-10 16:09:03,076 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,076 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,076 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,076 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:09:03,076 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,076 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:09:03,076 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,097 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 20 ms with result: SqlDataReader

2018-05-10 16:09:03,097 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,097 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,097 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,097 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:09:03,097 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,097 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:09:03,097 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:09:03 +08:00

2018-05-10 16:09:03,167 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 70 ms with result: SqlDataReader

2018-05-10 16:09:03,167 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:09:03,168 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:09:03 +08:00

2018-05-10 16:10:11,090 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,090 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:10:11,090 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,091 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:10:11,091 [70] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,198 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 107 ms with result: SqlDataReader

2018-05-10 16:10:11,198 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,198 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,199 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,199 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:10:11,199 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,199 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,277 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 77 ms with result: SqlDataReader

2018-05-10 16:10:11,277 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,277 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,277 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,278 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:10:11,278 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,278 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,394 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 116 ms with result: SqlDataReader

2018-05-10 16:10:11,394 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,394 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,394 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,395 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:10:11,395 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,395 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:10:11,395 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:10:11,395 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,555 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 160 ms with result: SqlDataReader

2018-05-10 16:10:11,555 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,556 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,556 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,556 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:10:11,556 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,556 [54] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,694 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 137 ms with result: SqlDataReader

2018-05-10 16:10:11,694 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,694 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,694 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,695 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:10:11,695 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,695 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:10:11,695 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:10:11,695 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:10:11,695 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:10:11,695 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,782 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 87 ms with result: SqlDataReader

2018-05-10 16:10:11,782 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,782 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,783 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,783 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:10:11,783 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,783 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:10:11,783 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:10:11,783 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:10:11,783 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:10:11,783 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,852 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 68 ms with result: SqlDataReader

2018-05-10 16:10:11,852 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,852 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,852 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,881 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:10:11,881 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,881 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:10:11,881 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:10:11,881 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,995 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 113 ms with result: SqlDataReader

2018-05-10 16:10:11,995 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,995 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,995 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:11,995 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:10:11,995 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:11,995 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:10:11,995 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:10:11 +08:00

2018-05-10 16:10:12,053 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 57 ms with result: SqlDataReader

2018-05-10 16:10:12,054 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:12,054 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:10:12 +08:00

2018-05-10 16:10:12,054 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:10:12 +08:00

2018-05-10 16:10:12,054 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:10:12,054 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:12,054 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:10:12,054 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:10:12 +08:00

2018-05-10 16:10:12,103 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 48 ms with result: SqlDataReader

2018-05-10 16:10:12,103 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:12,103 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:10:12 +08:00

2018-05-10 16:10:12,103 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:10:12 +08:00

2018-05-10 16:10:12,103 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:10:12,103 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:12,103 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:10:12,103 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:10:12 +08:00

2018-05-10 16:10:12,151 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 47 ms with result: SqlDataReader

2018-05-10 16:10:12,151 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:10:12,152 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:10:12 +08:00

2018-05-10 16:14:53,303 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,303 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:14:53,303 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,303 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:14:53,303 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,304 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:14:53,304 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,304 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:14:53,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:14:53,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,305 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,306 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:14:53,306 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,306 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,306 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:14:53,306 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,306 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,306 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,307 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:14:53,307 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,307 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:14:53,307 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:14:53,307 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,307 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:14:53,307 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,307 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,307 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,308 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:14:53,308 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,308 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,308 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:14:53,308 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,308 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,308 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,309 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:14:53,309 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,309 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:14:53,309 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:14:53,309 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:14:53,309 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:14:53,309 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,310 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:14:53,310 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,310 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,310 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,311 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:14:53,311 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,311 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:14:53,311 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:14:53,311 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:14:53,311 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:14:53,311 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,311 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:14:53,311 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,312 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,312 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,312 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:14:53,312 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,312 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:14:53,312 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:14:53,312 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:14:53,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:14:53,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:14:53,313 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:14:53,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:14:53,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:14:53,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:14:53,314 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,315 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,315 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,315 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:14:53,315 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,315 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:14:53,315 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:14:53 +08:00

2018-05-10 16:14:53,315 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:14:53,315 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:14:53,315 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:14:53 +08:00

2018-05-10 16:15:17,661 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,661 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:15:17,661 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:17,661 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:15:17,661 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,700 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 38 ms with result: SqlDataReader

2018-05-10 16:15:17,700 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:17,700 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,701 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,701 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:15:17,701 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:17,701 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,740 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 38 ms with result: SqlDataReader

2018-05-10 16:15:17,740 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:17,740 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,740 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,741 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:15:17,741 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:17,741 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,817 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 76 ms with result: SqlDataReader

2018-05-10 16:15:17,817 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:17,817 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,817 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,818 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:15:17,818 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:17,818 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:15:17,818 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:15:17,818 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,894 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 75 ms with result: SqlDataReader

2018-05-10 16:15:17,894 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:17,894 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,894 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,895 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:15:17,895 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:17,895 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,998 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 103 ms with result: SqlDataReader

2018-05-10 16:15:17,998 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:17,998 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,998 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:17,999 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:15:17,999 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:17,999 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:15:17,999 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:15:17,999 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:15:17,999 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:15:17,999 [27] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:15:17 +08:00

2018-05-10 16:15:18,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 65 ms with result: SqlDataReader

2018-05-10 16:15:18,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:18,065 [29] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,077 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,078 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:15:18,078 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:18,078 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:15:18,078 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:15:18,078 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:15:18,078 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:15:18,078 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,162 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 84 ms with result: SqlDataReader

2018-05-10 16:15:18,162 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:18,162 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,162 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,163 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:15:18,163 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:18,163 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:15:18,163 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:15:18,163 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,195 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 32 ms with result: SqlDataReader

2018-05-10 16:15:18,195 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:18,196 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,196 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,196 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:15:18,196 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:18,196 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:15:18,196 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,199 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 16:15:18,199 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:18,199 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,200 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,200 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:15:18,200 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:18,200 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:15:18,200 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,201 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:15:18,201 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:18,201 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,201 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,201 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:15:18,201 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:18,201 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:15:18,201 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:18,204 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 16:15:18,204 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:18,205 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:18 +08:00

2018-05-10 16:15:19,247 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,247 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:15:19,247 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,247 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:15:19,247 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,328 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 80 ms with result: SqlDataReader

2018-05-10 16:15:19,328 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,328 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,334 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,335 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:15:19,335 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,335 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,417 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 82 ms with result: SqlDataReader

2018-05-10 16:15:19,417 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,417 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,417 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,417 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:15:19,418 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,418 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,537 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 119 ms with result: SqlDataReader

2018-05-10 16:15:19,537 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,537 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,537 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,538 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:15:19,538 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,538 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:15:19,538 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:15:19,538 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,618 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 80 ms with result: SqlDataReader

2018-05-10 16:15:19,618 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,618 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,618 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,619 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:15:19,619 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,619 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,708 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 89 ms with result: SqlDataReader

2018-05-10 16:15:19,709 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,709 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,709 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,710 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:15:19,710 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,710 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:15:19,710 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:15:19,710 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:15:19,710 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:15:19,710 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,789 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 79 ms with result: SqlDataReader

2018-05-10 16:15:19,789 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,790 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,790 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,790 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:15:19,791 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,791 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:15:19,791 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:15:19,791 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:15:19,791 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:15:19,791 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,800 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-10 16:15:19,800 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,800 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,801 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,801 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:15:19,801 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,801 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:15:19,801 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:15:19,801 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,817 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 16 ms with result: SqlDataReader

2018-05-10 16:15:19,818 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,818 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,818 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,818 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:15:19,818 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,818 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:15:19,818 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,848 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 29 ms with result: SqlDataReader

2018-05-10 16:15:19,848 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,848 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,848 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,848 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:15:19,848 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,848 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:15:19,848 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,863 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-10 16:15:19,863 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,863 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,864 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,864 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:15:19,864 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,864 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:15:19,864 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:15:19 +08:00

2018-05-10 16:15:19,903 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 38 ms with result: SqlDataReader

2018-05-10 16:15:19,903 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:15:19,903 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:15:19 +08:00

2018-05-10 16:18:33,592 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,593 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:18:33,593 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:33,593 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:18:33,593 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,721 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 128 ms with result: SqlDataReader

2018-05-10 16:18:33,722 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:33,722 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,723 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,723 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:18:33,723 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:33,723 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,782 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 58 ms with result: SqlDataReader

2018-05-10 16:18:33,782 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:33,782 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,782 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,783 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:18:33,783 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:33,783 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,905 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 122 ms with result: SqlDataReader

2018-05-10 16:18:33,905 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:33,905 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,905 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,906 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:18:33,906 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:33,906 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:18:33,906 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:18:33,906 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,951 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 45 ms with result: SqlDataReader

2018-05-10 16:18:33,951 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:33,951 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,952 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,952 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:18:33,952 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:33,952 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,966 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-10 16:18:33,966 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:33,972 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,972 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:33,974 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:18:33,975 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:33,975 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:18:33,975 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:18:33,975 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:18:33,975 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:18:33,975 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:18:33 +08:00

2018-05-10 16:18:34,011 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 36 ms with result: SqlDataReader

2018-05-10 16:18:34,011 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:34,011 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,011 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,013 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:18:34,013 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:34,013 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:18:34,013 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:18:34,013 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:18:34,013 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:18:34,013 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,030 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 17 ms with result: SqlDataReader

2018-05-10 16:18:34,031 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:34,031 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,031 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,031 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:18:34,031 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:34,032 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:18:34,032 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:18:34,032 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,035 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 16:18:34,035 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:34,035 [25] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:18:34 +08:00

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:18:34,035 [20] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:18:34 +08:00

2018-05-10 16:42:27,511 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,515 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-10 16:42:27,515 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,515 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615616' (Type = String, Size = 4000)

2018-05-10 16:42:27,515 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,520 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-10 16:42:27,520 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,521 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,522 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,522 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:42:27,522 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,522 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:42:27,522 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,594 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 71 ms with result: SqlDataReader

2018-05-10 16:42:27,594 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,594 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,718 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,718 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-10 16:42:27,718 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,718 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:42:27,718 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,752 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 33 ms with result: SqlDataReader

2018-05-10 16:42:27,752 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,752 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,752 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,752 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:42:27,752 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,752 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:42:27,752 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,767 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 14 ms with result: SqlDataReader

2018-05-10 16:42:27,767 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,767 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,768 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,769 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:42:27,769 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,769 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,771 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 16:42:27,771 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,771 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,771 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,771 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:42:27,771 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,771 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,773 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 16:42:27,773 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,773 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,773 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,774 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-10 16:42:27,774 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,774 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-10 16:42:27,774 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,785 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-10 16:42:27,785 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,785 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,786 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,786 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:42:27,786 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,786 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,789 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 16:42:27,789 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,790 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,790 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,791 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-10 16:42:27,791 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,791 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-10 16:42:27,791 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:42:27,791 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:42:27,791 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,795 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-10 16:42:27,795 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,795 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,796 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,796 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-10 16:42:27,796 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,796 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-10 16:42:27,796 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:42:27,796 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:42:27,796 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,797 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:42:27,797 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,797 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,797 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,805 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:42:27,805 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,805 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-10 16:42:27,806 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,812 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-10 16:42:27,813 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,814 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,814 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,814 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:42:27,814 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,814 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:42:27,814 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,816 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 16:42:27,816 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,817 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,817 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,817 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:42:27,817 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,817 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:42:27,817 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,818 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 16:42:27,818 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,818 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,818 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,819 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:42:27,819 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,819 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:42:27,819 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,820 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 16:42:27,820 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,820 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,820 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,820 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:42:27,820 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,820 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-10 16:42:27,820 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:27,821 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:42:27,821 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:27,821 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:27 +08:00

2018-05-10 16:42:37,805 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,805 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:42:37,805 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,805 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:42:37,805 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,809 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 16:42:37,809 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,810 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,810 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,811 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:42:37,811 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,811 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,812 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 16:42:37,813 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,813 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,813 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,813 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:42:37,813 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,813 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,814 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:42:37,814 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,814 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,814 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,814 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:42:37,814 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,814 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:42:37,814 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:42:37,814 [64] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,817 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 16:42:37,817 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,817 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,817 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,818 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:42:37,818 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,818 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,822 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 16:42:37,822 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,822 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,822 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,823 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:42:37,823 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,823 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:42:37,823 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:42:37,823 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:42:37,823 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:42:37,823 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,827 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 16:42:37,827 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,827 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,827 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,828 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:42:37,828 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,828 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:42:37,828 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:42:37,828 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:42:37,828 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:42:37,828 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,829 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:42:37,829 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,829 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,829 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,830 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:42:37,830 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,830 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:42:37,830 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:42:37,830 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,835 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-10 16:42:37,836 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,836 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,836 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,836 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:42:37,836 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,836 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:42:37,836 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,837 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:42:37,837 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,837 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,837 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,837 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:42:37,837 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,837 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:42:37,837 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,837 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:42:37,837 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,838 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,838 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,838 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:42:37,838 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,838 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:42:37,838 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:42:37 +08:00

2018-05-10 16:42:37,838 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:42:37,838 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:42:37,838 [63] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:42:37 +08:00

2018-05-10 16:43:02,423 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:43:02 +08:00

2018-05-10 16:43:02,423 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:43:02,423 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:02,423 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:43:02,423 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:43:02 +08:00

2018-05-10 16:43:02,603 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 180 ms with result: SqlDataReader

2018-05-10 16:43:02,604 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:02,604 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:43:02 +08:00

2018-05-10 16:43:02,604 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:43:02 +08:00

2018-05-10 16:43:02,605 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:43:02,605 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:02,605 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:43:02 +08:00

2018-05-10 16:43:02,710 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 105 ms with result: SqlDataReader

2018-05-10 16:43:02,710 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:02,710 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:43:02 +08:00

2018-05-10 16:43:02,710 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:43:02 +08:00

2018-05-10 16:43:02,711 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:43:02,711 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:02,711 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:43:02 +08:00

2018-05-10 16:43:02,823 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 112 ms with result: SqlDataReader

2018-05-10 16:43:02,823 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:02,823 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:43:02 +08:00

2018-05-10 16:43:02,823 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:43:02 +08:00

2018-05-10 16:43:02,824 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:43:02,824 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:02,824 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:43:02,824 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:43:02,824 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:43:02 +08:00

2018-05-10 16:43:02,945 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 121 ms with result: SqlDataReader

2018-05-10 16:43:02,945 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:02,945 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:43:02 +08:00

2018-05-10 16:43:02,946 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:43:02 +08:00

2018-05-10 16:43:02,946 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:43:02,946 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:02,946 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:43:02 +08:00

2018-05-10 16:43:03,001 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 55 ms with result: SqlDataReader

2018-05-10 16:43:03,001 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:03,001 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,002 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,002 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:43:03,002 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:03,002 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:43:03,002 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:43:03,002 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:43:03,002 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:43:03,002 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,054 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 50 ms with result: SqlDataReader

2018-05-10 16:43:03,054 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:03,054 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,054 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,055 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:43:03,055 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:03,055 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:43:03,055 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:43:03,055 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:43:03,055 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:43:03,055 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,113 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 57 ms with result: SqlDataReader

2018-05-10 16:43:03,113 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:03,113 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,113 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,114 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:43:03,114 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:03,114 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:43:03,114 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:43:03,114 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,188 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 74 ms with result: SqlDataReader

2018-05-10 16:43:03,188 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:03,189 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,189 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,189 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:43:03,189 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:03,189 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:43:03,189 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,280 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 91 ms with result: SqlDataReader

2018-05-10 16:43:03,280 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:03,281 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,281 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,281 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:43:03,281 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:03,281 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:43:03,281 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,330 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 49 ms with result: SqlDataReader

2018-05-10 16:43:03,330 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:03,331 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,331 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,331 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:43:03,331 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:03,331 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:43:03,331 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:43:03 +08:00

2018-05-10 16:43:03,368 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 36 ms with result: SqlDataReader

2018-05-10 16:43:03,368 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:43:03,368 [58] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:43:03 +08:00

2018-05-10 16:45:13,880 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,880 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:45:13,880 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,880 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:45:13,880 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,881 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:13,881 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,881 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,882 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,882 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:45:13,882 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,882 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,882 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:13,882 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,883 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,883 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,883 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:45:13,883 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,883 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,883 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:13,883 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,883 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,883 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,884 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:45:13,884 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,884 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:45:13,884 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:45:13,884 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,884 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:13,884 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,884 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,885 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,885 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:45:13,885 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,885 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,885 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:13,885 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,886 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,886 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,886 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:45:13,886 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,886 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:45:13,886 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:45:13,886 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:45:13,886 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:45:13,887 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,887 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:13,887 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,887 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,887 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,888 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:45:13,888 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,888 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:45:13,888 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:45:13,888 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:45:13,888 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:45:13,888 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,888 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:13,888 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,888 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,889 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,889 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:45:13,889 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,889 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:45:13,889 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:45:13,889 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,890 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:13,890 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,890 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,890 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,890 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:45:13,890 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,890 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:45:13,890 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,891 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:13,891 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,891 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,891 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,891 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:45:13,891 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,892 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:45:13,892 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,892 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:13,892 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,892 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,892 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,892 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:45:13,892 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,892 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:45:13,892 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:13,893 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:13,893 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:13,893 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:13 +08:00

2018-05-10 16:45:45,104 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,105 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:45:45,105 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,105 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:45:45,105 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,105 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:45,105 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,105 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,106 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,106 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:45:45,106 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,106 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,108 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 16:45:45,108 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,108 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,108 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,109 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:45:45,109 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,109 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,109 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:45,109 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,109 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,109 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,110 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:45:45,110 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,110 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:45:45,110 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:45:45,110 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,111 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:45,111 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,111 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,111 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,112 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:45:45,112 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,112 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,113 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 16:45:45,113 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,113 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,114 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,114 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:45:45,114 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,114 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:45:45,114 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:45:45,114 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:45:45,114 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:45:45,114 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,115 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:45,115 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,115 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,115 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,116 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:45:45,116 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,116 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:45:45,116 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:45:45,116 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:45:45,116 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:45:45,116 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,116 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:45,116 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,116 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,117 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,117 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:45:45,117 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,117 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:45:45,117 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:45:45,117 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,119 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-10 16:45:45,119 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,119 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,121 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,121 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:45:45,121 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,121 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:45:45,121 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,122 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:45,122 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,122 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,122 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,122 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:45:45,122 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,122 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:45:45,122 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,123 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:45,123 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,123 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,123 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,123 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:45:45,124 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,124 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:45:45,124 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:45,124 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:45,124 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:45,124 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:45 +08:00

2018-05-10 16:45:55,476 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,476 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:45:55,476 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,476 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:45:55,476 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,480 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-10 16:45:55,480 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,480 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,481 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,481 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:45:55,481 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,481 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,482 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:55,482 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,482 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,482 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,482 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:45:55,482 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,482 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,483 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:55,483 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,483 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,483 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,483 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:45:55,483 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,483 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:45:55,483 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:45:55,483 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,484 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:55,484 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,484 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,484 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,484 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:45:55,484 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,485 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,485 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:55,485 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,485 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,485 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,486 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:45:55,486 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,486 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:45:55,486 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:45:55,486 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:45:55,486 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:45:55,486 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,487 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:55,487 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,487 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,487 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,488 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:45:55,488 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,488 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:45:55,488 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:45:55,488 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:45:55,488 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:45:55,488 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,488 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:55,488 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,489 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,489 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,489 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:45:55,489 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,489 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:45:55,489 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:45:55,490 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,503 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 13 ms with result: SqlDataReader

2018-05-10 16:45:55,503 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,504 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,504 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,504 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:45:55,504 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,504 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:45:55,504 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,510 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 5 ms with result: SqlDataReader

2018-05-10 16:45:55,510 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,510 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,510 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,510 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:45:55,510 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,510 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:45:55,510 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,510 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:55,510 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,511 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,511 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,511 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:45:55,511 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,511 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:45:55,511 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:45:55 +08:00

2018-05-10 16:45:55,511 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:45:55,511 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:45:55,511 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:45:55 +08:00

2018-05-10 16:46:36,426 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,427 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:46:36,427 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,427 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:46:36,427 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,428 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:46:36,428 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,428 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,428 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,429 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:46:36,429 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,429 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,429 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:46:36,429 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,429 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,429 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,430 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:46:36,430 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,430 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,430 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:46:36,430 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,430 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,430 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,431 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:46:36,431 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,431 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:46:36,431 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:46:36,431 [31] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,432 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:46:36,432 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,432 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,432 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,432 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:46:36,432 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,432 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,435 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-10 16:46:36,435 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,435 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,435 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,436 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:46:36,436 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,436 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:46:36,436 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:46:36,436 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:46:36,436 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:46:36,436 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,437 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:46:36,437 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,437 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,437 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,438 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:46:36,438 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,438 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:46:36,438 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:46:36,438 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:46:36,438 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:46:36,438 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,438 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:46:36,438 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,438 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,439 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,439 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:46:36,439 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,439 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:46:36,439 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:46:36,439 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,440 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:46:36,440 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,440 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,441 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,441 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:46:36,441 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,441 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:46:36,441 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,441 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:46:36,441 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,442 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,442 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,442 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:46:36,442 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,442 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '4' (Type = Int64, IsNullable = false)

2018-05-10 16:46:36,442 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,442 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:46:36,442 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,443 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,443 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,443 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-10 16:46:36,443 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,443 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:46:36,443 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:46:36 +08:00

2018-05-10 16:46:36,443 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:46:36,443 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:46:36,443 [71] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:46:36 +08:00

2018-05-10 16:53:14,857 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,858 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-10 16:53:14,858 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,858 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费' (Type = String, Size = 4000)

2018-05-10 16:53:14,858 [80] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,858 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:53:14,859 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,859 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,859 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,860 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-10 16:53:14,860 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,860 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,860 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:53:14,860 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,860 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,860 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,860 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-10 16:53:14,860 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,860 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,861 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:53:14,861 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,861 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,861 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,861 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-10 16:53:14,861 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,861 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:53:14,861 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:53:14,861 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,862 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:53:14,862 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,862 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,862 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,862 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-10 16:53:14,862 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,862 [40] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,863 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:53:14,863 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,863 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,863 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,864 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:53:14,864 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,864 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:53:14,864 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:53:14,864 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-10 16:53:14,864 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:53:14,864 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,864 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:53:14,864 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,864 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,865 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,865 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-10 16:53:14,865 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,865 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:53:14,865 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:53:14,865 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-10 16:53:14,865 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-10 16:53:14,865 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,866 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:53:14,866 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,866 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,866 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,866 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-10 16:53:14,866 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,867 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-10 16:53:14,867 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '4' (Type = Int64)

2018-05-10 16:53:14,867 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,867 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-10 16:53:14,867 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-10 16:53:14,867 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,867 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/10 16:53:14 +08:00

2018-05-10 16:53:14,868 [81] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
