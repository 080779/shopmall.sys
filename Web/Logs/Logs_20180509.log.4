2018-05-09 20:20:35,190 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,200 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,203 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_AdminLogs] (
    [Id] [bigint] NOT NULL IDENTITY,
    [IpAddress] [nvarchar](50),
    [Description] [nvarchar](500),
    [Tip] [nvarchar](500),
    [PermissionTypeId] [bigint] NOT NULL,
    [AdminId] [bigint] NOT NULL,
    [CreateTime] [datetime] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.T_AdminLogs] PRIMARY KEY ([Id])
)
2018-05-09 20:20:35,203 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,203 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,209 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: -1

2018-05-09 20:20:35,209 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,209 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_Admins] (
    [Id] [bigint] NOT NULL IDENTITY,
    [Mobile] [nvarchar](50) NOT NULL,
    [Description] [nvarchar](100),
    [Salt] [nvarchar](20) NOT NULL,
    [Password] [nvarchar](100) NOT NULL,
    [IsEnabled] [bit] NOT NULL,
    [CreateTime] [datetime] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.T_Admins] PRIMARY KEY ([Id])
)
2018-05-09 20:20:35,209 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,209 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,209 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,209 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,209 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_Permissions] (
    [Id] [bigint] NOT NULL IDENTITY,
    [Name] [nvarchar](50) NOT NULL,
    [Description] [nvarchar](100),
    [PermissionTypeId] [bigint] NOT NULL,
    [CreateTime] [datetime] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.T_Permissions] PRIMARY KEY ([Id])
)
2018-05-09 20:20:35,209 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,210 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,211 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: -1

2018-05-09 20:20:35,211 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,211 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_PermissionTypes] (
    [Id] [bigint] NOT NULL IDENTITY,
    [Name] [nvarchar](30) NOT NULL,
    [Description] [nvarchar](100),
    [CreateTime] [datetime] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.T_PermissionTypes] PRIMARY KEY ([Id])
)
2018-05-09 20:20:35,211 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,211 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,212 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: -1

2018-05-09 20:20:35,212 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,212 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_IntegralTypes] (
    [Id] [bigint] NOT NULL IDENTITY,
    [Name] [nvarchar](30) NOT NULL,
    [Description] [nvarchar](100),
    [CreateTime] [datetime] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.T_IntegralTypes] PRIMARY KEY ([Id])
)
2018-05-09 20:20:35,212 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,212 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,214 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: -1

2018-05-09 20:20:35,214 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,214 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_Journals] (
    [Id] [bigint] NOT NULL IDENTITY,
    [PlatformUserId] [bigint] NOT NULL,
    [ToPlatformUserId] [bigint] NOT NULL,
    [FormPlatformUserId] [bigint] NOT NULL,
    [JournalTypeId] [bigint] NOT NULL,
    [IntegralTypeId] [bigint] NOT NULL,
    [ToIntegralTypeId] [bigint] NOT NULL,
    [Description] [nvarchar](100),
    [InIntegral] [bigint],
    [OutIntegral] [bigint],
    [Integral] [bigint],
    [Amount] [decimal](18, 2),
    [Tip] [nvarchar](100),
    [CreateTime] [datetime] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.T_Journals] PRIMARY KEY ([Id])
)
2018-05-09 20:20:35,214 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,214 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,215 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,215 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,215 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_PlatformUsers] (
    [Id] [bigint] NOT NULL IDENTITY,
    [Mobile] [nvarchar](50) NOT NULL,
    [Code] [nvarchar](100) NOT NULL,
    [Description] [nvarchar](100),
    [PlatformIntegral] [bigint] NOT NULL,
    [GivingIntegral] [bigint] NOT NULL,
    [UseIntegral] [bigint] NOT NULL,
    [Salt] [nvarchar](20) NOT NULL,
    [Password] [nvarchar](100) NOT NULL,
    [TradePassword] [nvarchar](100) NOT NULL,
    [ErrorCount] [int] NOT NULL,
    [ErrorTime] [datetime] NOT NULL,
    [IsEnabled] [bit] NOT NULL,
    [PlatformUserTypeId] [bigint] NOT NULL,
    [CreateTime] [datetime] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.T_PlatformUsers] PRIMARY KEY ([Id])
)
2018-05-09 20:20:35,215 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,215 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,216 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,216 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,216 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_PlatformUserTypes] (
    [Id] [bigint] NOT NULL IDENTITY,
    [Name] [nvarchar](30) NOT NULL,
    [Description] [nvarchar](100),
    [CreateTime] [datetime] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.T_PlatformUserTypes] PRIMARY KEY ([Id])
)
2018-05-09 20:20:35,216 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,216 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,216 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,216 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,216 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_JournalTypes] (
    [Id] [bigint] NOT NULL IDENTITY,
    [Name] [nvarchar](30) NOT NULL,
    [Platform] [nvarchar](30),
    [Merchant] [nvarchar](30),
    [Customer] [nvarchar](30),
    [Description] [nvarchar](100),
    [CreateTime] [datetime] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.T_JournalTypes] PRIMARY KEY ([Id])
)
2018-05-09 20:20:35,216 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,216 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,217 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,217 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,217 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_NavBars] (
    [Id] [bigint] NOT NULL IDENTITY,
    [MenuId] [bigint] NOT NULL,
    [MenuName] [nvarchar](50),
    [Url] [nvarchar](500),
    [ParentId] [bigint] NOT NULL,
    [Sort] [bigint] NOT NULL,
    [IsLock] [bit] NOT NULL,
    [CreateTime] [datetime] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.T_NavBars] PRIMARY KEY ([Id])
)
2018-05-09 20:20:35,217 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,217 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,217 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,217 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,217 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_Settings] (
    [Id] [bigint] NOT NULL IDENTITY,
    [Name] [nvarchar](30) NOT NULL,
    [Description] [nvarchar](100),
    [SettingTypeId] [bigint] NOT NULL,
    [CreateTime] [datetime] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.T_Settings] PRIMARY KEY ([Id])
)
2018-05-09 20:20:35,217 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,217 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,218 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,218 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,218 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_SettingTypes] (
    [Id] [bigint] NOT NULL IDENTITY,
    [Name] [nvarchar](30) NOT NULL,
    [Description] [nvarchar](100),
    [CreateTime] [datetime] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.T_SettingTypes] PRIMARY KEY ([Id])
)
2018-05-09 20:20:35,218 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,218 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,218 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,218 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,218 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_States] (
    [Id] [bigint] NOT NULL IDENTITY,
    [Name] [nvarchar](30) NOT NULL,
    [Description] [nvarchar](100),
    [CreateTime] [datetime] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.T_States] PRIMARY KEY ([Id])
)
2018-05-09 20:20:35,218 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,219 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,219 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,219 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,219 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_TakeCashes] (
    [Id] [bigint] NOT NULL IDENTITY,
    [PlatformUserId] [bigint] NOT NULL,
    [IntegralTypeId] [bigint] NOT NULL,
    [StateId] [bigint] NOT NULL,
    [Integral] [bigint] NOT NULL,
    [Amount] [decimal](18, 2),
    [Description] [nvarchar](100),
    [CreateTime] [datetime] NOT NULL,
    [IsDeleted] [bit] NOT NULL,
    CONSTRAINT [PK_dbo.T_TakeCashes] PRIMARY KEY ([Id])
)
2018-05-09 20:20:35,219 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,219 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[T_AdminPermissions] (
    [AdminId] [bigint] NOT NULL,
    [PermissionId] [bigint] NOT NULL,
    CONSTRAINT [PK_dbo.T_AdminPermissions] PRIMARY KEY ([AdminId], [PermissionId])
)
2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_PermissionTypeId] ON [dbo].[T_AdminLogs]([PermissionTypeId])
2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_AdminId] ON [dbo].[T_AdminLogs]([AdminId])
2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,220 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_PermissionTypeId] ON [dbo].[T_Permissions]([PermissionTypeId])
2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_PlatformUserId] ON [dbo].[T_Journals]([PlatformUserId])
2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_ToPlatformUserId] ON [dbo].[T_Journals]([ToPlatformUserId])
2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,221 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_FormPlatformUserId] ON [dbo].[T_Journals]([FormPlatformUserId])
2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_JournalTypeId] ON [dbo].[T_Journals]([JournalTypeId])
2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_IntegralTypeId] ON [dbo].[T_Journals]([IntegralTypeId])
2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_ToIntegralTypeId] ON [dbo].[T_Journals]([ToIntegralTypeId])
2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,222 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_PlatformUserTypeId] ON [dbo].[T_PlatformUsers]([PlatformUserTypeId])
2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_SettingTypeId] ON [dbo].[T_Settings]([SettingTypeId])
2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_PlatformUserId] ON [dbo].[T_TakeCashes]([PlatformUserId])
2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,223 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_IntegralTypeId] ON [dbo].[T_TakeCashes]([IntegralTypeId])
2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_StateId] ON [dbo].[T_TakeCashes]([StateId])
2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_AdminId] ON [dbo].[T_AdminPermissions]([AdminId])
2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,224 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,225 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,225 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,225 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE INDEX [IX_PermissionId] ON [dbo].[T_AdminPermissions]([PermissionId])
2018-05-09 20:20:35,225 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,225 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,225 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,225 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,225 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_AdminLogs] ADD CONSTRAINT [FK_dbo.T_AdminLogs_dbo.T_Admins_AdminId] FOREIGN KEY ([AdminId]) REFERENCES [dbo].[T_Admins] ([Id])
2018-05-09 20:20:35,225 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,225 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,226 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: -1

2018-05-09 20:20:35,226 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,226 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_AdminLogs] ADD CONSTRAINT [FK_dbo.T_AdminLogs_dbo.T_PermissionTypes_PermissionTypeId] FOREIGN KEY ([PermissionTypeId]) REFERENCES [dbo].[T_PermissionTypes] ([Id])
2018-05-09 20:20:35,226 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,226 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_Permissions] ADD CONSTRAINT [FK_dbo.T_Permissions_dbo.T_PermissionTypes_PermissionTypeId] FOREIGN KEY ([PermissionTypeId]) REFERENCES [dbo].[T_PermissionTypes] ([Id])
2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_Journals] ADD CONSTRAINT [FK_dbo.T_Journals_dbo.T_PlatformUsers_FormPlatformUserId] FOREIGN KEY ([FormPlatformUserId]) REFERENCES [dbo].[T_PlatformUsers] ([Id])
2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_Journals] ADD CONSTRAINT [FK_dbo.T_Journals_dbo.T_IntegralTypes_IntegralTypeId] FOREIGN KEY ([IntegralTypeId]) REFERENCES [dbo].[T_IntegralTypes] ([Id])
2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,227 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_Journals] ADD CONSTRAINT [FK_dbo.T_Journals_dbo.T_JournalTypes_JournalTypeId] FOREIGN KEY ([JournalTypeId]) REFERENCES [dbo].[T_JournalTypes] ([Id])
2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_Journals] ADD CONSTRAINT [FK_dbo.T_Journals_dbo.T_PlatformUsers_PlatformUserId] FOREIGN KEY ([PlatformUserId]) REFERENCES [dbo].[T_PlatformUsers] ([Id])
2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_Journals] ADD CONSTRAINT [FK_dbo.T_Journals_dbo.T_IntegralTypes_ToIntegralTypeId] FOREIGN KEY ([ToIntegralTypeId]) REFERENCES [dbo].[T_IntegralTypes] ([Id])
2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,228 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_Journals] ADD CONSTRAINT [FK_dbo.T_Journals_dbo.T_PlatformUsers_ToPlatformUserId] FOREIGN KEY ([ToPlatformUserId]) REFERENCES [dbo].[T_PlatformUsers] ([Id])
2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_PlatformUsers] ADD CONSTRAINT [FK_dbo.T_PlatformUsers_dbo.T_PlatformUserTypes_PlatformUserTypeId] FOREIGN KEY ([PlatformUserTypeId]) REFERENCES [dbo].[T_PlatformUserTypes] ([Id])
2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_Settings] ADD CONSTRAINT [FK_dbo.T_Settings_dbo.T_SettingTypes_SettingTypeId] FOREIGN KEY ([SettingTypeId]) REFERENCES [dbo].[T_SettingTypes] ([Id])
2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,229 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_TakeCashes] ADD CONSTRAINT [FK_dbo.T_TakeCashes_dbo.T_IntegralTypes_IntegralTypeId] FOREIGN KEY ([IntegralTypeId]) REFERENCES [dbo].[T_IntegralTypes] ([Id])
2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_TakeCashes] ADD CONSTRAINT [FK_dbo.T_TakeCashes_dbo.T_PlatformUsers_PlatformUserId] FOREIGN KEY ([PlatformUserId]) REFERENCES [dbo].[T_PlatformUsers] ([Id])
2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_TakeCashes] ADD CONSTRAINT [FK_dbo.T_TakeCashes_dbo.T_States_StateId] FOREIGN KEY ([StateId]) REFERENCES [dbo].[T_States] ([Id])
2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,230 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_AdminPermissions] ADD CONSTRAINT [FK_dbo.T_AdminPermissions_dbo.T_Permissions_AdminId] FOREIGN KEY ([AdminId]) REFERENCES [dbo].[T_Permissions] ([Id]) ON DELETE CASCADE
2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：ALTER TABLE [dbo].[T_AdminPermissions] ADD CONSTRAINT [FK_dbo.T_AdminPermissions_dbo.T_Admins_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [dbo].[T_Admins] ([Id]) ON DELETE CASCADE
2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId] [nvarchar](150) NOT NULL,
    [ContextKey] [nvarchar](300) NOT NULL,
    [Model] [varbinary](max) NOT NULL,
    [ProductVersion] [nvarchar](32) NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY ([MigrationId], [ContextKey])
)
2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,231 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,232 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: -1

2018-05-09 20:20:35,232 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,232 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'201805091220347_InitialCreate', N'IMS.Service.MyDbContext',  0x1F8B0800000000000400ED5DDB6EDCC8117D0F907F20E631F06A24391B38C668175AC95E68E38BE0D12EF26650332D99580E3921398E85205F96877C527E21CDE1ADEF5DCD6E5E66442CE0D590DDD5D5C553D5B7AAAEFFFDE7BF8B1FBF6D42EF2B4AD2208E2E666727A7330F45AB781D448F17B35DF6F0DDABD98F3FFCF10F8B37EBCD37EFB7AADCCBBC1CAE19A517B32F59B67D3D9FA7AB2F68E3A7279B6095C469FC909DACE2CDDC5FC7F3F3D3D3BFCECFCEE6089398615A9EB7F8B48BB26083F63FF0CFAB385AA16DB6F3C3F7F11A8569F91CBF59EEA97A1FFC0D4AB7FE0A5DCC6EDE2F4F9628F91AACD0CCBB0C031FB3B044E1C3CCF3A328CEFC0C33F8FAD7142DB3248E1E975BFCC00FEF9EB608977BF0C314958CBF6E8A43FB707A9EF761DE54AC48AD7669166F0C099EBD2C853267ABB712EDAC161A16DB1B2CDEEC29EFF55E7417B3CBF52688DEC58FC58B99C736F9FA2A4CF2E2947C4F8AD22774E5171E51E4458D090C9DFCBF17DED52ECC7609BA88D02E4BFCF08577BBBB0F83D5DFD0D35DFC3B8A2EA25D1892CC6276F13BEA017E749BC45B94644F9FD043D9859BF5CC9BD3F5E66CC5BA1A51A7EC5694FDE5CF33EF036EDCBF0F518D054204CB2C4ED0CF2842899FA1F5AD9F652889721AA814DA5CDDD6F672BD4E509A564D6204622D9A79EFFD6FEF50F4987DB9987D8FD5E66DF00DADAB072517BF4601D6395C274B7648D7D0354A5749B02D90A268CA455B77C1B6F3366E51B209D21C447943FA4FA6A6B607AB2D91AB04610CDC611355D1B9AE7F1B92BA49AF518830A02A4A3FC57188FC484FE883FF3578DC4353D4C599F70985FBB7E997605BD84046533F9705DF26F1E6531C7266A078FF7919EF92DC98DEC58A42777EF28832388FF4478530CBD690724D17D4B1CF9416F563316FECA5DE8AB637A193FD54B5F53EBE0F42646F3C0DF513664DCF9C58BAA51F668A46CE3BE9E0AD9FA6FF8C93B583DE199BBE37515EDCDCF41D94396E2C4C2AB473CD7BD2A2A6A4859314A9AD5565DB64E52A1BD8CAAAB1440D4D1B5B7DB26FE2B6F27F8FDABAB99DC78D5BE72B1576ABEEEC544667161C4EC6B8A6E4D3314D517D2F5C4EC9685A9606AC213119B15646ECE5C11BB1E1CD0E18FAF86BA3C7A4D8DC6A057C9EC004FB09F66387FD2F787889FCB015E2A9BA13D8C56DDDE2C9C1439C6C7E4D51623B8BBB8B5D527B8BE9B8A457C2C1C57495B4A5F6427349AD4F337213559C333CABAB7DDC65ADEAB5AA74B9897751BD0D738D56C126A7709BE0BFCA53B057336FB9F273099FDB6D901F8B71562D2E58A5142E2F28C3FB99AFD2AC2ED425B9C585A6B8E94A89543C4047E8E2B24E90A5341DA08A9A324F983300EF546919EB44210DE76449E3F5A9197C60D031808D1564686B0D609FAD20EB005D4ED305A6B079270CBF015B41DE0983EFC014B6DB182028B5DB16E0084C1346715B039DDC5CE1AAFD1F6AF4BAA35A425032CF31E4FCE7E02B66D30D2DAC146E083DB323B1BBC45FA3E19A7F9324717245CE7FF1577B79DE8E8EA309A9A33342D25C1FFFF903DB5BF19E3E37827DE6EB11FBFAFAE2FCDE3EA08EB361BCFD0EBF90C8349C8BDB9A363B47B7D9D91AF95CFD09F423027D6597EC1BD64CD051B2FAE247AA89969376AEF6D0CC9783DDB633190BA1B1C0B3859FFC768B5DB2EA6422645A14ED6C6795390D378E409AF559122A9B70B23AF5132C385B892CE324B3A37093BE8B57BF1FBE8F2158CF9728CBF0276DA5E854DD49D3C56D1DFD0CB844C1F1AF93898E0A97C8943A7CA64A370B6369216E392C2F69B5082608D928FDB40A78F68A3FBCB6C2418F3F694BB8373527A04F401F3BD0EFFCDFD1959F7E698575BAF20477715B2E9DC65CFA66ED2D952B862CE3669DBA453D2F55B7F228A23558EA52A428C64D4355659DFBE6308DC9DC4214C574FC5BB9E7EC550CC2785950CAF1FEBD8ED5A290C964FF324DE355B0E78D0B69A10388E80EBF89D61E309AA8503F51940FD6463C22045B3C06E05F17B33F7172D53753C72836CD5071D2CA161673A2FF8662612294C07CCBC2953A129324DA49D81CB9C2A39B3CE39AC4A32FCA37E0023FBCC2B8C6E3791065FC501D44AB60EB8766DC316480637EFE39EB06D937D7688BA27CB836FB2C104E6EB9C0439EAFBA796696A293A2014085972FC860A2BE89815125E2E216381095D738C094D511E8549CF4803495A821CDD7378A8C015540A307BC32A3039C8DCADC8178EB1F82076FEA209E45D201D2C4CD88408DC09FD7605436F0539234DAFDD80CE7B18FF119FE9940C015B8E70D025D4D248A0C40D0B094063B4C9C221CABC0901623DD700451186B3DA013F639208C88620A47004C6A1B008614F1968073400A771388664461E93D8051C456EF40147D021013CC9EE20800488687C180218C15730E3F519C19DF4ACFE01330D53BF604E287F0C0C4408F00792DC6E39EC6E2918EC3A31883DB8EBF231C7B99004D183664D19ACE412889F41C7E041633D63B10C51F02C2067FEFC228C0D8C21ECAA26E3B00E3486DA298B101C0D8D62EF237A70C0246B9839C0C20006FB9061D8C2B2B1C867A4F3BBE95CEEDA196A91EF0A7153F8407C63F7410E4A9CEC565A8001D9237B8603D6FE0F0839CB00F312203F8EA018380CF7030AB62957B03101DBAB1D8190C47331603F8EA1F8607BD42113AAB0061C178AE74003CDAED851C794927DE3EA04671D23FC628518346DACA03B00754153CE23A19AE81922A24EDE9FA3E7F86BE6502DF530CFAD2FD342DBDF15848E434F17C8139AE4E675EF14A71C6CCA14B404A4A0748A439301551E21D7DC0E4F622519224077B0D5972A4131115CD1F3424CB7588881AB3F6D37599307FC20E0B0615039252394A8E5E61DD9651156C0F6B081691B1225A74B8AD864C39A316D161D6403042B20E0A963A3A82B9051292226DB7864865068584D86186A145582B91A29596B5B2064469CD85EBAC41857B4CD6BD63EC0767A3E1DE9104C9AA27ACC33C2D873632629C8320B252F913A93B28F12972213B890F919074A908D6C214A74EE225A8F7F2A3FAA6F4F36341518C9B0A49297DFABA8098264793563C6078C11CD66C053604B040B7300934D5D4C58A562903272BB2F7F458AFD25903872A4903AE04ACBB5B9697AD890F9062F35BEA054474B89986298409F4F8817E286B19D231283AF9C977E6149D146ECDD9C94DB80947906426D98E65465DA7AB1399D4B942D13D917B859DC044AE143CC56EC465A6A2ADD4B303D51C562DD98B837552539D639B9F64DB494E726ADD9B7AB2F715EB65D70A739283575BD9F58D3BC5B518BCE080478486878444EF9AB5B34264FA03419EA22BA82943387981814FB68CCFB6882E922B7285D82007591D2AA93278542B39A08A428E63AC25D7B78A8AA357B522131C1CC08F0EAC85449F13900A596E4281C55285D3D6BBD9F5BBC5BC481A5F3E58CC25D9E517EFFDED36372B4DCDF289B72C52CD5F7DB7344FC5BE2968CC57D40614BBF75EB794C589FF8898B7C5DDE66F8324CDAEFDCCBFF7F380F3ABF5862B46EEDD4B36E8AA96D8ED79FE9B55BB76558DFCEF727B9AB87782D9C4E7CF38CAEA6F71BF3628CAF65D448285BB8C002691DF32E02782FB22AEE270B789E407378ADA4D76768A48F3184E8BBADC80A446BD80D3DBE79021E9EC1FC0EBF3416124317DC8989C721DFA481294C643CAE990573490A4C8E706DFB2B9A581FA96CD639ED662CEE0923B6EE314803145AC46C1F5CD52D9EC34AD5F35AB52419014AA67C3295891648024543C3150B1FACA7E4AB5EAA726E0AD2FBCA7C15B3F9ED4AA792D512BF264A1AD6E7167BFE60AA627D18D96E5FFD2F58B27C369587743D084F1F224C21EE7C4A1B00DD655649E0BDE9F2D2AE90D80B69814F8B39823124264C2E391E3B1DE4E6D0B45DA19CA1C859AFADD00907549A5065B8DBBAA9C2A1F72422D4AB5012972CAA2207B923624085F4E9D096125096BA25B15DF87F13DA7BE95C62F5D2561155D7DFC999CB26B834266F2A5FBDE3C8753A312FC92E4A817E65F47FC5D8C7638CA6B2FA90D8EF2597F3B38CFD67CD3BBE2ADA7B8BC0B6A8B092E80C898374D8A7498147AF64F065C1472E92B45E3541BAD6553599274D97770AA54524B9224F5E230B79D98C49394ADA25FC16992D9244982E473436ABC09241E0FB3C926BAB94A36DF9AB6375A597ECB0D0E71A480DD08302D2A9F313629CF37CB85A515220134C60AC626B7A1C8581A4D8FEAEC85D404A97E6A00E83A3F2105E7FAE9A46ABDAB5A155ED556CBA8202C73055357EF68BA5FE611A4D15C3C33A3C26B69F3D460DA9BB0D3DDC4689ADBE401A427A9D5538309F33E17203561DE3F31417E910B90867DF16CD2C6E6B5441B6B4FCBB6EA48C7329AEBA3A6FE58073BE70E0BF4FD2B9446A8AF6691D37CEEA0B69BCDF171B5ADC17D88B3B969BEE30A8C85A36B6B181231D92D00A8AA3D41EFC8A147B86CB7851F13C96F8E401D81433A2EEDE688B0BE10861AF465B7C4E8B91BCB11D9A4C6A66A4CC73EC89CC30A1AF5F518305FC7BAB8CEA351E1429C477948BD00A966E4F72181745D917F8760A13D77D2CBA240DC3554CD5864635B780870212E6C911A80E593FA771DE252869750712FFB8EE5512CFB0EA565A80B1B6F5214C9F33FC65F83751E6BB27C4A33B439C90B9C2CFF115E8501CA2D4055E0BD1F050F28CD8A44A2B3F3D3D35733EF320CFCB408442A23695EB3374C81426BCE5EE6A13568BD99B3D5CD0374722A69BAA6F29CF2495955512A7DE444BD0F1E835CBCDAC4A7A6192E9B8097A2A1E8AB9F6FA4265462CEEF4F49C290249C82849F12CAC6A4F7BE146E49F20EC9B4D4B96BD06EA235FA7631FBD7BEFE6BEFE6EF9F59122FBC8F095683D7DEA9F76FF3E4AB95893366A3AC69D53A9F40758D7F674E12A8DE0799AB3CC9D2B1E890F5B1F2F3002B63DB4CDB42D267E6AA53B83028689E9BB3DB381FC07905C2B13EF087C2F160D5839DDE1C8F8E143B0607A321631B5C0E0EBFB20DD2A3C6F0CB5161F84030A30B019910332186468C225CE390C1C2EE629A8F381401ABF1860F1431E6862561C58F28B8C498239E88154F4C5C8A313B547D2B4ED89D6A6356680296C8B1E6862561C54F87E6928CA3A13B6946870AA0B121E4864A752E508E0068156C7292B709FE2BDDEFF69DBDC2D66FE5E704CF5DEF041DEFB0A50B4E39E4B1AB9B2D9022F8C5F17E4297AB462E1C46A687204ED928182B6254FC8B15A583DA3D6202631C5327A3640AD26D044A84C7589B2F077B65A26018ABB9E833DAFF00449F1CB2999FD6B31DAE6727C098D92703BA10B034C1284EC93691294EC94E5A230FFB386485A98248AC66684D048953FF807D4C89E343FC3AC2C46E4ABA0F31B1225145981CFD19A3223CE39015E7C0A6264C0888F1FC9AAAFF1CA6D69AC08B09BAD3FC80018C2C506282CA04151A2AAA88864346CB984E14C77446558762980FBB454D2792B09CB0767B4C331905D617CFD275551E01C197BD55C423E8EDCAB08EC834EFE61687A86EC087ECABF249D8D9CFAA8A6F51E437A532A4F32FD934E9EC37FF1815C0F52E574500051E7E563E7FD5DB3EF604CA1395535BC11E554E972FBE554277B51FAB04F59659DCC1FA2A695E11A2E43C8B3B1C96A2C0263637AAE0932B3EF1B303A3291006C6A1CAF80F0546DAAF1760248965BAF8E39305587CB25FDD9115766EDB647B11FDE0CA104CD5BC7B1040E9136EDBDA3439669828408E22F1EA18CC8F36B7D7D8463E836CE37D9A9AA16133949969819F911819E36CEB9254E83240498A188C5EBC03A0AC816EA105BD6CD5FD1806B9E45B0030C0F5BCBD40CC24E9BCCB0FAF42151D0D41D265DE748EA5FE70A44BF8C13708C94E310084E47983892F2C8890223FB3E8F5A1C00794446804F0D1DD0534007408AF31297278CF32C1073E44DC402E661E016C34A96B0640CD345E1DC67835C2B18A0ECB9A46ABF182479F846A10F84CB6E7306C8F3E4B5C2FF0A11C154987372976781F31F2130BDEC291437B4D0AC8768A1CC8CDC5CE81A3BB079C6F5073AF752FA8A17D7946B0C0629C8B48C2ECAB231AB4B4B7CC8E748DC5C067F8216B68F80C3368B580CF28C62C063E7B7731F9704578A852230AF9FC7090A2BED77C0C10915EC1DC01360AB6EA7B5F2BDF37F68E560E1C792D3C8E0A0FC7665EF17FC5595471E7EBC56C7D1F630414FE52779FAB52A9003E8206D5AD019AD2B7C31FD6738DF145C42D36E54C9A25077345D364315DF379593D0BA2D904C780A890B8793A99BBAE716699C3B5CBBC173759E7EBD64A5B30F2F1B2161492489A4A346BD2B8FA634B0AEA993092B992074119A5EC612D5321927CA3F46B717B556E2F5D53CC2A886B8B792F6EAC4E5D046C4D2952411965AB3091526333DF26F956D25A913C44D70E3B62734DB105C4AD11F9224C2DB27A245096568C0C2A634D5FA60EF3D7F5884A12D6D437D82BBDCB6A19895E729308A033A48228558E75BEA4C56321BAD2A7D44074E2EBF5653E5B4407151D3A048131CE481089A9FC97245DE6CD18D357B28081108DF0DB425C42AF3E818CF4DE7F4EB1249E3337248857AE45A0C78B81B75BC768E9534C10D72C9172997A7449B76564429314512999744ECB5174263E8DDB914072268E4A6EBBA73A6F2108316F1C8B88DAF5D58A47BE47ACDD25267A247A3D42D1906E235AC9487D4C445D91C845F07684623153A867A54CCCB9BF56382A3F81235428E65C1B209E23478FFCDC56201BE021AFEE9897E88EE0AD422CC27D0B411A637BB1A80E260582019F6376A852E24D08511248E7E2D1E914F89CAE43951A503CC5C1925E2E820328F91114097EF279CF22E072E6D5EF16F36267A97C807F72B9F116F34FBB28BF4BA0F8758DD2E0B121B1C03423B4A2CE6AEA3237D1435C9D19311C5545B87BD6327FED67FE6592050FFE2AC3AF5708AFC1A2C799F79B1FEE7091379B7BB4BE893EEEB2ED2EC35D469BFB9012467EF4A46A7F31E7785E7CDCDFCB90BAE8026633C8AF5FF818FDB40BC275CDF75B418CBD84447EA6555E5A927FCB2CBFBCE4F1A9A6F4218E80844AF1D547717768B30DF3DDD28FD1D2FF8ADAF08635F91D7AF4574FB7658A433911FD87A0C5BEB80E7C6C4B376949A3A98F7F620CAF37DF7EF83FFFCE626C9E230100 , N'6.2.0-61023')

2018-05-09 20:20:35,232 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,235 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: 1

2018-05-09 20:20:35,235 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,238 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Committed transaction at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,330 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,754 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 20:20:35,754 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,756 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '213' (Type = String, Size = 4000)

2018-05-09 20:20:35,756 [5] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:20:35 +08:00

2018-05-09 20:20:35,761 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 4 ms with result: SqlDataReader

2018-05-09 20:20:35,761 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:20:35,768 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:20:35 +08:00

2018-05-09 20:22:48,212 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:22:48 +08:00

2018-05-09 20:22:48,221 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-09 20:22:48,221 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:48,221 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:22:48 +08:00

2018-05-09 20:22:48,229 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: 15

2018-05-09 20:22:48,229 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:48,229 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:48 +08:00

2018-05-09 20:22:48,412 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:22:48 +08:00

2018-05-09 20:22:49,078 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-09 20:22:49,078 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,079 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-09 20:22:49,079 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,082 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 2 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-09 20:22:49,082 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,083 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,084 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,085 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-09 20:22:49,085 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,085 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,086 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-09 20:22:49,086 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,086 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,187 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,283 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 20:22:49,283 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,283 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615616' (Type = String, Size = 4000)

2018-05-09 20:22:49,283 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,293 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 9 ms with result: SqlDataReader

2018-05-09 20:22:49,293 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,345 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,352 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,375 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:22:49,375 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,375 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:22:49,375 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,376 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:22:49,376 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,392 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,523 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,525 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 20:22:49,525 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,525 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:22:49,525 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,527 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:22:49,527 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,528 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,529 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,529 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:22:49,529 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,529 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:22:49,529 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,532 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:22:49,532 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,532 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,539 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,545 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:22:49,546 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,546 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,547 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:22:49,547 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,548 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,548 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,549 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:22:49,549 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,549 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,550 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:22:49,550 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,550 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,560 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,569 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-09 20:22:49,569 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,569 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 20:22:49,569 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,573 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 20:22:49,573 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,578 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,578 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,579 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:22:49,579 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,579 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,580 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:22:49,580 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,581 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,590 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,600 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-09 20:22:49,601 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,601 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 20:22:49,601 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:22:49,601 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:22:49,601 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,603 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:22:49,603 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,608 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,609 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,609 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-09 20:22:49,609 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,609 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 20:22:49,609 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:22:49,609 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:22:49,609 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,610 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:22:49,610 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,610 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,616 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,639 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:22:49,639 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,639 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 20:22:49,639 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,641 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:22:49,641 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,647 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,649 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,655 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:22:49,655 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,655 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:22:49,655 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,656 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:22:49,656 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,659 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,660 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,661 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:22:49,661 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,661 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:22:49,661 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,662 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:22:49,662 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,662 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,662 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,662 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:22:49,662 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,662 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:22:49,662 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,663 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:22:49,663 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,663 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,663 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,663 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:22:49,663 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,663 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-09 20:22:49,663 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:22:49 +08:00

2018-05-09 20:22:49,663 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:22:49,663 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:22:49,663 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:22:49 +08:00

2018-05-09 20:23:02,966 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,974 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:02,974 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,974 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:02,974 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,975 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:23:02,975 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,975 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,976 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,976 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:02,976 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,976 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,976 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:02,977 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,977 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,977 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,977 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:02,977 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,977 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,977 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:02,977 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,978 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,978 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,979 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:02,979 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,979 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:02,979 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:02,979 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,981 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:23:02,981 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,982 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,982 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,982 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:02,983 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,983 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,983 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:02,983 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,983 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,983 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,985 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:02,985 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,985 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:02,985 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:02,985 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:02,985 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:02,985 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,987 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:23:02,987 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,988 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,988 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,988 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:02,988 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,988 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:02,988 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:02,988 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:02,988 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:02,988 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,989 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:02,989 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,989 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,989 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,991 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:02,991 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,991 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:02,991 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:02,991 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,993 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:23:02,993 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,994 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,994 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,994 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:02,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:02,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:02,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:02,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:02,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:02,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:02,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:02,997 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:02 +08:00

2018-05-09 20:23:13,614 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,615 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:13,615 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,615 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:13,615 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,617 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:23:13,617 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,617 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,619 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,620 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:13,620 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,620 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,622 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:23:13,622 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,622 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,622 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,622 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:13,622 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,623 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,624 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:23:13,624 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,624 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,624 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,627 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:13,627 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,627 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:13,627 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:13,627 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,627 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:13,627 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,627 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,628 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,628 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:13,628 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,628 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,628 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:13,628 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,631 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,631 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,632 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:13,632 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,632 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:13,632 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:13,632 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:13,632 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:13,632 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,634 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:23:13,634 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,634 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,635 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,635 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:13,635 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,635 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:13,635 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:13,635 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:13,635 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:13,635 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,636 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:13,636 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,636 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,636 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,639 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:13,639 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,639 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:13,639 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:13,639 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,642 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 20:23:13,642 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,643 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,643 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,643 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:13,643 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,643 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:13,643 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,643 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:13,643 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:13,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:13,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:13,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:13,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,644 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:13,645 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:13,645 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:13,645 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:13,645 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:13 +08:00

2018-05-09 20:23:15,024 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,025 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:15,025 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,025 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:15,025 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,026 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,026 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,026 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,027 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,027 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:15,027 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,027 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,027 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,027 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,028 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,028 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,028 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:15,028 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,028 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,028 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,028 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,028 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,029 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,029 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:15,029 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,029 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:15,029 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:15,029 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,030 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,030 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,030 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,030 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,030 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:15,030 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,030 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,032 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:23:15,032 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,032 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,032 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,032 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:15,032 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,032 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:15,032 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:15,032 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,032 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,032 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,033 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,033 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,033 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,033 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,033 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:15,033 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,033 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:15,033 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:15,033 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,033 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,033 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,034 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,034 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,034 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,034 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,034 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:15,034 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,034 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:15,034 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:15,034 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,035 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,035 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,035 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,035 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,035 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:15,035 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,035 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,035 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,035 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,035 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,036 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,036 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,036 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:15,036 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,036 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,036 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,036 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,036 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,036 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,036 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,036 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:15,036 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,036 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,036 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,037 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,037 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,037 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,037 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,037 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:15,037 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,037 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,037 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,038 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,038 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,038 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,784 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,784 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:15,784 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,784 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:15,784 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,785 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,785 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,785 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,786 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,786 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:15,786 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,786 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,786 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,786 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,787 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,787 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,787 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:15,787 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,787 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,788 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,788 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,788 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,788 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,788 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:15,789 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,789 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:15,789 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:15,789 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,789 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,789 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,789 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,790 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,790 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:15,790 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,790 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,792 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:23:15,792 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,792 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,793 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,793 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:15,793 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,793 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:15,793 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:15,793 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,793 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,793 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,794 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,794 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,794 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,794 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,795 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:15,795 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,795 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:15,795 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:15,795 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,795 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,795 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,796 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,796 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,796 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,796 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,797 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:15,797 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,797 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:15,797 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:15,797 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,797 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,797 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:15,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,799 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,799 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,799 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,799 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,799 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:15,799 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,799 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,799 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,800 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,800 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,800 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,800 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,800 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:15,800 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,800 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:15,800 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:15,801 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:15,801 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:15,801 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:15 +08:00

2018-05-09 20:23:17,212 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:17,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:17,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,215 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:23:17,215 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,215 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,217 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,217 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:17,218 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,218 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,218 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:17,218 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,218 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,219 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,219 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:17,219 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,220 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,220 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:17,221 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,221 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,221 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,222 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:17,222 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,222 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:17,222 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:17,222 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,222 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:17,222 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,223 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,223 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,223 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:17,223 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,223 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,224 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:17,224 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,224 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,224 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,225 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:17,225 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,225 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:17,225 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:17,225 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:17,225 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:17,225 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,226 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:17,226 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,226 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,226 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,226 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:17,226 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,226 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:17,227 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:17,227 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:17,227 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:17,227 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,228 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:23:17,228 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,229 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,229 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,229 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:17,229 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,229 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:17,229 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:17,229 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,231 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:23:17,231 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,231 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,232 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,232 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:17,232 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,232 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:17,232 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,232 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:17,232 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,232 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,232 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,232 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:17,233 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,233 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:17,233 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,233 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:17,233 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,233 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,233 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,233 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:17,233 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,233 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:23:17,233 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,233 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:17,234 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,234 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,234 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,234 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:17,234 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,234 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:17,234 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:17,234 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:17,234 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:17,234 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:17 +08:00

2018-05-09 20:23:18,989 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,990 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:18,990 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:18,990 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:18,990 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,991 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:18,991 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:18,992 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,993 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,993 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:18,993 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:18,993 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,994 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:18,994 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:18,994 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,994 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:18,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:18,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:18,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:18,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,995 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:18,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:18,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:18,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:18,996 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,997 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:18,997 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:18,997 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,997 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,998 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:18,998 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:18,998 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,998 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:18,998 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:18,999 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:18,999 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:18 +08:00

2018-05-09 20:23:19,000 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:19,000 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:19,000 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:19,000 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:19,000 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:19,000 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:19,000 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:19,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:19,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,002 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,002 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:19,002 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:19,002 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:19,002 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:19,002 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:19,002 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:19,003 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,003 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:19,006 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:19,006 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,007 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,008 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:19,008 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:19,008 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:19,008 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:19,008 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,009 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:19,009 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:19,010 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,010 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,010 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:19,010 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:19,010 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:19,010 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,011 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:19,011 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:19,011 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,011 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,011 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:19,011 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:19,011 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:19,011 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,012 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:19,012 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:19,012 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,012 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,013 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:19,013 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:19,013 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:19,013 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:19,013 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:19,013 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:19,013 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:19 +08:00

2018-05-09 20:23:21,907 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,908 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:21,908 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,908 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:21,908 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,909 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:21,909 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,909 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,910 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,910 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:21,910 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,910 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,917 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 20:23:21,917 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,917 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,918 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,918 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:21,918 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,918 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,918 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:21,919 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,919 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,919 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,920 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:21,920 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,920 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:21,920 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:21,920 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,924 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 20:23:21,924 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,924 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,924 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,925 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:21,925 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,925 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,925 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:21,926 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,926 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,927 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,932 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:21,932 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,932 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:21,932 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:21,932 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:21,932 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:21,932 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,933 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:21,933 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,933 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,933 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,934 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:21,934 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,934 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:21,934 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:21,934 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:21,934 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:21,934 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,934 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:21,934 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,934 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,934 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,935 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:21,935 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,935 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:21,935 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:21,935 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,935 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:21,935 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,936 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,936 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,936 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:21,936 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,936 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:21,936 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,936 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:21,936 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,937 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,937 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,937 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:21,937 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,937 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:21,937 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,937 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:21,937 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,937 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,937 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,938 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:21,938 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,938 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:23:21,938 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,938 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:21,938 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,938 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,938 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,938 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:21,938 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,938 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:21,938 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:21,939 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:21,939 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:21,939 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:21 +08:00

2018-05-09 20:23:23,046 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,047 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:23,047 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,047 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:23,047 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,047 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:23,047 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,047 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,048 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,048 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:23,048 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,049 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,049 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:23,049 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,049 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,049 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,049 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:23,049 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,049 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,050 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:23,050 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,050 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,050 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,050 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:23,050 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,050 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:23,051 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:23,051 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,051 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:23,051 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,051 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,052 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,052 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:23,052 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,052 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,053 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:23,053 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,053 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,053 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,054 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:23,054 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,054 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:23,054 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:23,054 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:23,054 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:23,054 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,054 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:23,054 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,055 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,055 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,055 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:23,055 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,055 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:23,055 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:23,056 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:23,056 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:23,056 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,056 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:23,056 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,056 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,056 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,057 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:23,057 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,057 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:23,057 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:23,057 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,058 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:23,058 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,058 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,058 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,058 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:23,058 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,058 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:23,058 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,059 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:23,059 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,059 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,059 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,059 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:23,059 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,059 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:23,059 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,060 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:23,060 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,060 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,060 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,060 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:23,060 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,060 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:23,060 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:23,060 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:23,060 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:23,061 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:23 +08:00

2018-05-09 20:23:24,991 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,992 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:24,992 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:24,992 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:24,992 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,992 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:24,992 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:24,993 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,993 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,994 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:24,994 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:24,994 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,995 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:23:24,995 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:24,996 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,996 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,996 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:24,996 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:24,996 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,996 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:24,996 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:24,997 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,997 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,997 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:24,997 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:24,997 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:24,997 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:24,997 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,998 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:24,998 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:24,998 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,998 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,998 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:24,998 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:24,998 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,999 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:24,999 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:24,999 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:24,999 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:24 +08:00

2018-05-09 20:23:25,000 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:25,000 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:25,000 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:25,000 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:25,000 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:25,000 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:25,000 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,000 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:25,000 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:25,000 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:25,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:25,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:25,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:25,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:25,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:25,001 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,002 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:25,002 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:25,002 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,002 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,002 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:25,003 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:25,003 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:25,003 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:25,003 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,003 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:25,003 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:25,004 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,004 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,004 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:25,004 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:25,004 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:25,004 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,004 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:25,004 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:25,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:25,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:25,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:25,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:25,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:25,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,006 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,006 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:25,006 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:25,006 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:23:25,006 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,006 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:25,006 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:25,006 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,006 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,006 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:25,006 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:25,006 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:25,007 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:25,007 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:25,007 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:25,007 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:25 +08:00

2018-05-09 20:23:28,041 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,042 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:28,042 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,042 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:28,042 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,043 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:28,043 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,044 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,045 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,046 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:28,046 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,046 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,046 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:28,046 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,046 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,047 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,047 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:28,047 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,047 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,048 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:28,048 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,048 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,049 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,049 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:28,049 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,049 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:28,050 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:28,050 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,050 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:28,050 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,051 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,051 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,052 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:28,052 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,052 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,053 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:28,053 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,053 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,053 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,054 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:28,054 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,054 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:28,054 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:28,054 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:28,054 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:28,054 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,054 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:28,054 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,055 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,055 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,056 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:28,056 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,056 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:28,056 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:28,056 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:28,056 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:28,056 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,056 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:28,056 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,056 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,057 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,057 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:28,057 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,057 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:28,057 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:28,057 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,058 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:28,058 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,058 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,058 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,058 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:28,058 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,058 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:28,058 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,058 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:28,058 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:28,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:28,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:28,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:28,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:28,059 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:28,060 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:28,060 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:28,060 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:28 +08:00

2018-05-09 20:23:29,376 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,377 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:29,377 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,377 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:29,377 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,377 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:29,378 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,378 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,379 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,379 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:29,379 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,379 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,380 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:29,380 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,380 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,381 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,381 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:29,381 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,381 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,382 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:29,382 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,382 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,382 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,383 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:29,383 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,383 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:29,383 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:29,383 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,384 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:29,384 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,384 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,385 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,385 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:29,385 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,385 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,386 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:29,386 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,386 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,387 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,387 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:29,388 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,388 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:29,388 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:29,388 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:29,388 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:29,388 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,388 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:29,388 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,389 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,389 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,390 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:29,390 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,390 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:29,390 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:29,390 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:29,390 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:29,390 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,391 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:29,391 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,391 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,391 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,392 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:29,392 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,392 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:29,392 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:29,392 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,393 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:29,393 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,393 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,394 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,394 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:29,394 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,394 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:29,394 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,395 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:29,395 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,395 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,396 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,396 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:29,396 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,396 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:29,396 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,396 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:29,396 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,397 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,397 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,397 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:29,397 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,397 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:23:29,397 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,398 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:29,398 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,398 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,399 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,399 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:29,399 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,399 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:29,399 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:29,400 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:29,400 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:29,400 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:29 +08:00

2018-05-09 20:23:30,765 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,768 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:30,768 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,768 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:30,768 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,769 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:30,769 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,770 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,771 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,771 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:30,771 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,771 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,771 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:30,772 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,772 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,772 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,772 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:30,772 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,772 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,773 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:30,773 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,773 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,773 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,774 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:30,774 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,774 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:30,774 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:30,774 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,774 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:30,774 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,774 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,775 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,775 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:30,775 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,775 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,775 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:30,776 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,776 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,776 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,777 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:30,777 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,777 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:30,777 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:30,777 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:30,777 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:30,777 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,777 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:30,777 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,777 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,778 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,778 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:30,778 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,778 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:30,778 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:30,779 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:30,779 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:30,779 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,779 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:30,779 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,779 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,780 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,780 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:30,780 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,780 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:30,780 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:30,780 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,781 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:30,781 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,781 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,782 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,782 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:30,782 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,782 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:30,782 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,782 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:30,782 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,782 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:30,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:30,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:30,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:30,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:30,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:30 +08:00

2018-05-09 20:23:31,795 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,795 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:31,796 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,796 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:31,796 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,796 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:31,796 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,796 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,797 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,797 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:31,797 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,797 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,797 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:31,797 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,797 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,797 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,797 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:31,797 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,797 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:31,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:31,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:31,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:31,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,798 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:31,798 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,798 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,799 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,799 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:31,799 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,799 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,799 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:31,799 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,799 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,799 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,800 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:31,800 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,800 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:31,800 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:31,800 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:31,800 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:31,800 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,800 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:31,800 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,800 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,800 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,801 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:31,801 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,801 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:31,801 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:31,801 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:31,801 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:31,801 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,801 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:31,801 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,801 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,801 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,802 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:31,802 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,802 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:31,802 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:31,802 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,802 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:31,802 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,802 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:31,803 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:31,804 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:31,805 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:31 +08:00

2018-05-09 20:23:32,794 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,794 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:32,794 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,794 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:32,794 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,795 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:32,795 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,795 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,795 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,795 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:32,795 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,795 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,796 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:32,796 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,796 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,796 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,796 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:32,796 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,796 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,796 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:32,796 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,796 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,796 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,797 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:32,797 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,797 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:32,797 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:32,797 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,797 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:32,797 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,797 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,797 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,797 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:32,798 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,798 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:32,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:32,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:32,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:32,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:32,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:32,798 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,800 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:23:32,800 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,800 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,800 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,800 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:32,800 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,800 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:32,800 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:32,800 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:32,800 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:32,800 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,801 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:32,801 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,801 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,801 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,801 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:32,801 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,801 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:32,801 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:32,801 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,802 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:32,802 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,802 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,802 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,802 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:32,802 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,802 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:32,802 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,803 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:32,803 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,803 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,803 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,803 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:32,803 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,803 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:32,803 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,803 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:32,803 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,803 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,804 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,804 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:32,804 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,804 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:32,804 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:32,804 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:32,804 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:32,804 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:32 +08:00

2018-05-09 20:23:36,129 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,129 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:36,129 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,129 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:36,130 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,132 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:23:36,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,133 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,134 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,135 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:36,135 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,135 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,138 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 20:23:36,138 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,139 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,139 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,139 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:36,139 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,139 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,140 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,140 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,140 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,140 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,141 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:36,141 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,141 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:36,141 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:36,141 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,142 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,142 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,142 [9] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,143 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,143 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:36,143 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,143 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,144 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,144 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,144 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,144 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,145 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:36,145 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,145 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:36,145 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:36,145 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,145 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,145 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,146 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,146 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,146 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,146 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,147 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:36,147 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,147 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:36,147 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:36,147 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,147 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,147 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,148 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,148 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,148 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,148 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,149 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:36,149 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,149 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:36,149 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:36,149 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,150 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,150 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,151 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,151 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,151 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:36,151 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,151 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,151 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:36,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,152 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,153 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,153 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,153 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,153 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,153 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:36,153 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,153 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,153 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:36,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,155 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,155 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,777 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,777 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:23:36,777 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,777 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:23:36,777 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,778 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,778 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,778 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,779 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,780 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:23:36,780 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,780 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,780 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,780 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,780 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,781 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,781 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:23:36,781 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,781 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,781 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,781 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,782 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,782 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,782 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:23:36,782 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,782 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:36,783 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:36,783 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:23:36,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,785 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,785 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,785 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,785 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,786 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:36,786 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,786 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:36,786 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:36,786 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,786 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,787 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,787 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,787 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,788 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,788 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,789 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:23:36,789 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,789 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:36,789 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:36,789 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,789 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,789 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,790 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,790 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,790 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,790 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,791 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:23:36,791 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,791 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:23:36,791 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:23:36,791 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,792 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,792 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,792 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,793 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,793 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:36,793 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,793 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,793 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,793 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,793 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,794 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,794 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,794 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:36,794 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,794 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,794 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,794 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,794 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,795 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,795 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,795 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:23:36,795 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,795 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:23:36,795 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:23:36 +08:00

2018-05-09 20:23:36,795 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:23:36,795 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:23:36,796 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:23:36 +08:00

2018-05-09 20:24:03,501 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,503 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:03,503 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,503 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:03,503 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,505 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:03,505 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,505 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,506 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,507 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:03,507 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,507 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,509 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:03,509 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,509 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,509 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,510 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:03,510 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,510 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,512 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:03,512 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,512 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,512 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,513 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:03,513 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,513 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:03,513 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:03,513 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,513 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:03,513 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,514 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,514 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,514 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:03,514 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,514 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,515 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:03,515 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,515 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,516 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,516 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:03,516 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,516 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:03,516 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:03,516 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:03,516 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:03,516 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,517 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:03,517 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,517 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,517 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,518 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:03,518 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,518 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:03,518 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:03,518 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:03,518 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:03,518 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,518 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:03,518 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,519 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,519 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,520 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:03,520 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,520 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:03,520 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:03,520 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,521 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:03,521 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,521 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,521 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,521 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:03,521 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,521 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:03,522 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,522 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:03,522 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,522 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,522 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,522 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:03,522 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,522 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:03,522 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,523 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:03,523 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,523 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,523 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,523 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:03,523 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,523 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:03,523 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,523 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:03,523 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,524 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,524 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,524 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:03,524 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,524 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:03,524 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:03,524 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:03,524 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:03,524 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:03 +08:00

2018-05-09 20:24:11,701 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,701 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 20:24:11,701 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,701 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615666' (Type = String, Size = 4000)

2018-05-09 20:24:11,701 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,702 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:11,702 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,702 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,702 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,702 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:11,702 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,702 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:11,702 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,703 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:11,703 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,703 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,704 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,704 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 20:24:11,704 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,704 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:11,704 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,705 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:11,705 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,705 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,706 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,706 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:11,706 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,706 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:11,706 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,707 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:11,707 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,707 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,720 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,723 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 20:24:11,723 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,723 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 20:24:11,723 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,725 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:11,725 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,726 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,726 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,726 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 20:24:11,726 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,726 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 20:24:11,726 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,727 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:11,727 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,727 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,727 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,728 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 20:24:11,728 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,728 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:11,728 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,728 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:11,728 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,728 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,729 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,729 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 20:24:11,729 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,729 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:11,729 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,729 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:11,729 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,730 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,730 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,730 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:11,730 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,730 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:11,730 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,730 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:11,730 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,731 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,731 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,731 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:11,731 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,731 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:11,731 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,732 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:11,732 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,732 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,733 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,733 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:11,733 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,733 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:11,733 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,733 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:11,733 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,733 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,762 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,763 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:11,763 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,763 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:11,763 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,763 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:11,763 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,763 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,793 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,796 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,886 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 20:24:11,887 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '19' (Type = Int64)

2018-05-09 20:24:11,887 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 20:24:11,887 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,891 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: 1

2018-05-09 20:24:11,891 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,892 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 20:24:11,892 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '6' (Type = Int64)

2018-05-09 20:24:11,892 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 20:24:11,892 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,893 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2018-05-09 20:24:11,893 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '1' (Type = Int64)

2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '19' (Type = Int64)

2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '1' (Type = String, Size = 100)

2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 20:24:11' (Type = DateTime2)

2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 20:24:11,897 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,901 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 20:24:11,901 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, @7, NULL, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '1' (Type = Int64)

2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '6' (Type = Int64)

2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '1' (Type = String, Size = 100)

2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 20:24:11' (Type = DateTime2)

2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 20:24:11,903 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,906 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:24:11,906 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:11,913 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Committed transaction at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:11,913 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:11 +08:00

2018-05-09 20:24:13,153 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,153 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:13,153 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,153 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:13,153 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,154 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:13,154 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,154 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,154 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,155 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:13,155 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,155 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,155 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:13,155 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,155 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,156 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,156 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:13,156 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,156 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,156 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:13,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:13,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,157 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:13,158 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:13,158 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,158 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:13,158 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,159 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,159 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,160 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:13,160 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,160 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,161 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:13,161 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,162 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,162 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,162 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:13,163 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,163 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:13,163 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:13,163 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:13,163 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:13,163 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,164 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:13,164 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,164 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,164 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,164 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:13,165 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,165 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:13,165 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:13,165 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:13,165 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:13,165 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,165 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:13,165 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,165 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,165 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,166 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:13,166 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,166 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:13,166 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:13,166 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,166 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:13,166 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,166 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:13,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:13,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:13,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:13,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:13,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:13,168 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:13,169 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:13,169 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:13,169 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:13 +08:00

2018-05-09 20:24:19,638 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,638 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 20:24:19,638 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,638 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615666' (Type = String, Size = 4000)

2018-05-09 20:24:19,638 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,639 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:19,639 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,639 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,639 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,639 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:19,639 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,639 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:19,639 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,641 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:19,641 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,641 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,642 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,642 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 20:24:19,642 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,642 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:19,642 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,643 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:19,643 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,643 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,643 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,643 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:19,643 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,644 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:19,644 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,644 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:19,644 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,645 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,645 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,645 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 20:24:19,645 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,645 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 20:24:19,645 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,646 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:19,646 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,646 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,646 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,646 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 20:24:19,646 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,646 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 20:24:19,646 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,647 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:19,647 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,647 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,647 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,647 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 20:24:19,647 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,648 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:19,648 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,648 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:19,648 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,649 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,649 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,649 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 20:24:19,649 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,649 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:19,649 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:19,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:19,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:19,650 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,652 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:19,652 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:19,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:19,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:19,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,653 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,654 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,654 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:19,654 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,654 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:19,654 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,654 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:19,654 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,654 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,655 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,655 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:19,655 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,655 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:19,655 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,655 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:19,655 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,655 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,656 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,656 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,657 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 20:24:19,657 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '18' (Type = Int64)

2018-05-09 20:24:19,657 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 20:24:19,657 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,657 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2018-05-09 20:24:19,657 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,657 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 20:24:19,657 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '7' (Type = Int64)

2018-05-09 20:24:19,657 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 20:24:19,657 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '1' (Type = Int64)

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '18' (Type = Int64)

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '1' (Type = String, Size = 100)

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 20:24:19' (Type = DateTime2)

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 20:24:19,658 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,658 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:19,658 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,658 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, @7, NULL, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 20:24:19,658 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,658 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2018-05-09 20:24:19,658 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 20:24:19,658 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 20:24:19,659 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 20:24:19,659 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 20:24:19,659 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 20:24:19,659 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 20:24:19,659 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '1' (Type = Int64)

2018-05-09 20:24:19,659 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '7' (Type = Int64)

2018-05-09 20:24:19,659 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '1' (Type = String, Size = 100)

2018-05-09 20:24:19,659 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 20:24:19' (Type = DateTime2)

2018-05-09 20:24:19,659 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 20:24:19,659 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,659 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:19,659 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:19,660 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Committed transaction at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:19,660 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:19 +08:00

2018-05-09 20:24:20,774 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,774 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:20,774 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,774 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:20,774 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,774 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:20,774 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,775 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,776 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,776 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:20,776 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,776 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,776 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:20,777 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,777 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,777 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,777 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:20,777 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,777 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,778 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:20,778 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,778 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,778 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,779 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:20,779 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,779 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:20,779 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:20,779 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,779 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:20,779 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,780 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,780 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,780 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:20,780 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,780 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,781 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:20,781 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,781 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,781 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,782 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:20,782 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,782 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:20,782 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:20,782 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:20,782 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:20,782 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:20,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,783 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,783 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,783 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:20,783 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,784 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:20,784 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:20,784 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:20,784 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:20,784 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,784 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:20,784 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,784 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,784 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,785 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:20,785 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,785 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:20,785 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:20,785 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,786 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:20,786 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,786 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,786 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,787 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:20,787 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,787 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:20,787 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,787 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:20,787 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,787 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,787 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,787 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:20,787 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,787 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:20,787 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,788 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:20,788 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,788 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,788 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,788 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:20,788 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,788 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:20,788 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:20,788 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:20,788 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:20,788 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:20 +08:00

2018-05-09 20:24:26,090 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,090 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 20:24:26,090 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,090 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615666' (Type = String, Size = 4000)

2018-05-09 20:24:26,090 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,092 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:26,092 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,092 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,092 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,092 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:26,092 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,092 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:26,092 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,092 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:26,092 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,092 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,093 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,093 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 20:24:26,093 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,093 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:26,093 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,093 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:26,093 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,093 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,094 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,094 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:26,094 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,094 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:26,094 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,094 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:26,094 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,094 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,094 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,095 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 20:24:26,095 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,095 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 20:24:26,095 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,095 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:26,095 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,095 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,095 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,096 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 20:24:26,096 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,096 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 20:24:26,096 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,096 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:26,096 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,096 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,096 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,096 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 20:24:26,096 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,096 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:26,096 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,097 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:26,097 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,097 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,097 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,098 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 20:24:26,098 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,098 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:26,098 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,098 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:26,098 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,099 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,099 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,099 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:26,099 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,099 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:26,099 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,099 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:26,099 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,100 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,100 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,100 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:26,100 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,100 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:26,100 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,101 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:26,101 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,101 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,101 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,101 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:26,101 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,101 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:26,101 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,101 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:26,101 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,102 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:26,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:26,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:26,103 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,104 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,104 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,104 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,105 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 20:24:26,105 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '17' (Type = Int64)

2018-05-09 20:24:26,105 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 20:24:26,105 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,105 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2018-05-09 20:24:26,105 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,105 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 20:24:26,105 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '8' (Type = Int64)

2018-05-09 20:24:26,105 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 20:24:26,106 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '1' (Type = Int64)

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '17' (Type = Int64)

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '1' (Type = String, Size = 100)

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 20:24:26' (Type = DateTime2)

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 20:24:26,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, @7, NULL, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '5' (Type = Int64)

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '5' (Type = Int64)

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '1' (Type = Int64)

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '8' (Type = Int64)

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '1' (Type = String, Size = 100)

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 20:24:26' (Type = DateTime2)

2018-05-09 20:24:26,106 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 20:24:26,107 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,107 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:26,107 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:26,108 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Committed transaction at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:26,108 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:26 +08:00

2018-05-09 20:24:27,200 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,201 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:27,201 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,201 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:27,201 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,201 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:27,201 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,201 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,202 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,203 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:27,203 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,203 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,203 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:27,203 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,203 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,204 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,204 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:27,204 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,204 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,205 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:27,205 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,205 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,205 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:27,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:27,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:27,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:27,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,207 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,207 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:27,207 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,207 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,207 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:27,207 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,207 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,208 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,208 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:27,208 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,208 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:27,208 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:27,208 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:27,208 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:27,208 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,209 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:27,210 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,210 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,210 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,210 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:27,210 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,211 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:27,211 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:27,211 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:27,211 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:27,211 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,211 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:27,211 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,211 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,212 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,212 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:27,212 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,212 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:27,212 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:27,212 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,216 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 20:24:27,216 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,216 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,217 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,217 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:27,217 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,217 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:27,217 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,219 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:27,219 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,219 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,219 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,219 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:27,219 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,219 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:27,219 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,220 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:27,220 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,220 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,220 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,220 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:27,220 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,220 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:27,220 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:27,220 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:27,220 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:27,220 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:27 +08:00

2018-05-09 20:24:29,855 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,855 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:29,855 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,855 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:29,856 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,859 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:24:29,859 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,859 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,860 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,860 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:29,860 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,861 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,861 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:29,861 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,861 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,861 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,862 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:29,862 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,862 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,862 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:29,862 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,862 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,863 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,863 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:29,863 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,863 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:29,863 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:29,863 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,864 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:29,864 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,864 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,864 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,865 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:29,865 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,865 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,865 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:29,865 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,865 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,866 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,866 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:29,866 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,866 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:29,866 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:29,866 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:29,866 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:29,866 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,867 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:29,867 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,867 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,867 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,868 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:29,868 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,868 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:29,868 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:29,868 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:29,868 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:29,868 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,869 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:29,869 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,869 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,869 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,870 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:29,870 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,870 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:29,870 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:29,870 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,871 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:29,871 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,871 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,871 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,871 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:29,872 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,872 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:29,872 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,872 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:29,872 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,873 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,873 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,873 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:29,873 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,873 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:29,873 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,873 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:29,873 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,874 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,874 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,874 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:29,874 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,874 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:29,874 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,875 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:29,875 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,875 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,875 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,875 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:29,875 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,875 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:29,875 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:29,875 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:29,875 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:29,876 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:29 +08:00

2018-05-09 20:24:31,198 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,199 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:31,199 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,199 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:31,199 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,200 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:31,200 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,200 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,202 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,202 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:31,202 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,202 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,202 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:31,202 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,202 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,203 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,203 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:31,203 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,203 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,203 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:31,203 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,203 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,203 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,204 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:31,204 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,204 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:31,204 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:31,204 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,204 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:31,204 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,204 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,204 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,204 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:31,204 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,205 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,205 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:31,205 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,205 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,205 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:31,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:31,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:31,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:31,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:31,206 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,206 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:31,206 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,206 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,206 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,207 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:31,207 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,207 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:31,207 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:31,207 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:31,207 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:31,207 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,207 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:31,207 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,207 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,208 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,210 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:31,210 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,210 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:31,210 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:31,210 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,212 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:24:31,213 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,213 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,213 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,213 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:31,213 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,213 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:31,213 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,214 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:31,214 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,214 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,214 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,214 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:31,214 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,214 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:31,214 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,214 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:31,214 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,214 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,215 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,215 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:31,215 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,215 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:31,215 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:31,215 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:31,215 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:31,215 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:31 +08:00

2018-05-09 20:24:32,558 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,558 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:32,559 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,559 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:32,559 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,559 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:32,559 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,560 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,561 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,561 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:32,561 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,561 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,561 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:32,561 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,562 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,562 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,562 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:32,562 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,562 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,563 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:32,563 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,563 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,563 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,564 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:32,564 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,564 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:32,564 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:32,564 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,565 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:32,565 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,565 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,565 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,566 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:32,566 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,566 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,566 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:32,566 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,567 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,567 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:32,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:32,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:32,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:32,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:32,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,568 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:32,568 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,569 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,569 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,570 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:32,570 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,570 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:32,570 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:32,570 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:32,570 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:32,570 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,570 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:32,570 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,571 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,571 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,571 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:32,572 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,572 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:32,572 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:32,572 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,572 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:32,572 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,573 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,573 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,573 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:32,573 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,573 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:32,573 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,574 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:32,574 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,574 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,574 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,574 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:32,575 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,575 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:32,575 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,577 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:32,577 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,577 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,577 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,578 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:32,578 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,578 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:32,578 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,578 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:32,578 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,578 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,579 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,579 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:32,579 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,579 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:32,579 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:32,579 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:32,579 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:32,580 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:32 +08:00

2018-05-09 20:24:33,555 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,556 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:33,556 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,556 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:33,556 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,556 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:33,556 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,556 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,557 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,557 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:33,557 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,557 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,557 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:33,558 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,558 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,558 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,558 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:33,558 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,558 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,559 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:33,559 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,559 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,559 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,560 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:33,560 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,560 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:33,560 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:33,560 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,560 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:33,560 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,560 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,561 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,561 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:33,561 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,561 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,562 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:33,562 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,562 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,562 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,563 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:33,563 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,563 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:33,563 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:33,563 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:33,563 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:33,563 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,563 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:33,563 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,563 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,564 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,564 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:33,564 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,564 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:33,564 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:33,564 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:33,564 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:33,564 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,565 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:33,565 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,565 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,565 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,565 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:33,565 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,565 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:33,565 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:33,565 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,566 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:33,566 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,566 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,566 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,567 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:33,567 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,567 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:33,567 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,567 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:33,567 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,567 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,567 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,567 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:33,567 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,567 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:33,567 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:33,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:33,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:33,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:33,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:33,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:33,568 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:33 +08:00

2018-05-09 20:24:34,428 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,428 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:34,429 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,429 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:34,429 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,429 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:34,429 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,430 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,431 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,431 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:34,431 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,431 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,432 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:34,433 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,433 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,433 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,433 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:34,433 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,433 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,434 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:34,434 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,434 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,434 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,435 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:34,435 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,435 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:34,435 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:34,435 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,436 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:34,436 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,436 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,436 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,437 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:34,437 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,437 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,437 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:34,437 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,438 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,438 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,439 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:34,439 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,439 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:34,439 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:34,439 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:34,439 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:34,439 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,439 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:34,439 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,439 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,440 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,440 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:34,440 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,441 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:34,441 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:34,441 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:34,441 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:34,441 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,441 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:34,441 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,441 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,442 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,442 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:34,442 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,442 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:34,442 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:34,442 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,442 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:34,442 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,443 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,443 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,443 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:34,443 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,443 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:34,443 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,443 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:34,443 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,443 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,443 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,443 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:34,443 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,443 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:34,444 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,444 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:34,444 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,444 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,444 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,444 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:34,444 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,444 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:34,444 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,444 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:34,444 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,444 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,445 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,445 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:34,445 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,445 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:34,445 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,445 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:34,445 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,445 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,991 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,991 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:34,991 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,991 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:34,991 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,994 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:24:34,994 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,994 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,995 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,996 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:34,996 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,996 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,996 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:34,996 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,997 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,997 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,998 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:34,998 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,998 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,998 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:34,998 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,998 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,999 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:34,999 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:34,999 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:34,999 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:34,999 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:34,999 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:34 +08:00

2018-05-09 20:24:35,000 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:35,000 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,001 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,001 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,002 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:35,002 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,002 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,003 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:35,003 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,003 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,004 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,004 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:35,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:35,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:35,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:35,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:35,005 [6] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,005 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:35,005 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,006 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,006 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,007 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:35,007 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,007 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:35,007 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:35,007 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:35,007 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:35,007 [18] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,008 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:35,008 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,008 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,009 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,009 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:35,009 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,010 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:35,010 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:35,010 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,011 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:35,011 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,012 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,012 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,012 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:35,012 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,012 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:35,012 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,012 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:35,012 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,012 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,012 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:35,013 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:35 +08:00

2018-05-09 20:24:36,108 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,108 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:36,108 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,108 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:36,108 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,109 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,109 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,109 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,110 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,110 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:36,110 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,110 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,111 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,111 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,111 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,111 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,111 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:36,111 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,111 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,112 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,112 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,112 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,112 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,112 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:36,112 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,112 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:36,112 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:36,112 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,113 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,113 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,113 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,113 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,114 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:36,114 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,114 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,116 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:24:36,116 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,117 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,118 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,118 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:36,118 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,118 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:36,118 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:36,118 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,118 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,119 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,119 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,119 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,119 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,119 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,120 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:36,120 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,120 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:36,120 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:36,120 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,120 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,120 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,121 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,121 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,121 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,122 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,122 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:36,122 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,122 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:36,122 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:36,122 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,122 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,122 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,123 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,123 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,123 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:36,123 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,123 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,123 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,123 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,123 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,123 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,123 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,124 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,125 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:36,125 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,125 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,125 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,125 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,125 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,125 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,986 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,987 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:36,987 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,987 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:36,987 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,988 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,988 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,988 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,989 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,989 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:36,989 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,989 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,990 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,990 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,990 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,991 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,991 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:36,991 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,991 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,991 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,991 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,992 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,992 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,992 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:36,992 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,992 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:36,992 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:36,992 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,992 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,992 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,992 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,993 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,993 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:36,993 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,993 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,993 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,993 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,993 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,993 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,994 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:36,994 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,994 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:36,994 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:36,994 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,994 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,994 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,994 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,994 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,994 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,994 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,995 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:36,995 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,995 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:36,995 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:36,995 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,995 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,995 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,995 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,995 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,995 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,995 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,995 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:36,996 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,996 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:36,996 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:36,996 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,996 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,996 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,996 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,996 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,996 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:36,996 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,996 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,996 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:36,997 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:36,998 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:36,998 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:36,998 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:36 +08:00

2018-05-09 20:24:37,456 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,457 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:37,457 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,457 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:37,457 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,460 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:24:37,460 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,460 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,461 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,461 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:37,461 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,461 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,462 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,462 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,462 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,463 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,463 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:37,463 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,463 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,463 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,463 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,464 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,464 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,464 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:37,465 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,465 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:37,465 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:37,465 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,465 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,465 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,465 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,466 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,466 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:37,466 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,466 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,467 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,467 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,467 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,468 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,469 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:37,469 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,469 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:37,469 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:37,469 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,469 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,469 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,469 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,470 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,470 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,470 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,471 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:37,471 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,471 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:37,471 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:37,471 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,471 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,471 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,472 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,472 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,472 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,472 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,473 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:37,473 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,473 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:37,473 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:37,473 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,473 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,473 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,474 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,474 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,474 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:37,474 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,474 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,474 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,474 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,475 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,475 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,475 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,475 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:37,475 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,475 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,475 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,475 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,475 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,476 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,476 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,476 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:37,476 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,476 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,476 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,476 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,476 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,476 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,476 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,477 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:37,477 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,477 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,477 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,477 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,477 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,477 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,882 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,883 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:37,883 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,883 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:37,883 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,883 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,883 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,884 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,884 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,884 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:37,884 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,884 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,884 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,884 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,885 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,885 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,885 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:37,885 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,885 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,885 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,885 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,885 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,885 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,886 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:37,886 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,886 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:37,886 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:37,886 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,886 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,886 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,886 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,886 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,886 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:37,887 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,887 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,887 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,887 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,887 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,887 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,887 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:37,887 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,887 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:37,887 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:37,887 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,887 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,888 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,888 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,888 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,888 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,888 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,888 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:37,888 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,888 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:37,888 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:37,888 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,888 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,888 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,889 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,889 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,889 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,889 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,889 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:37,889 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,889 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:37,889 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:37,889 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,890 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,890 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,890 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,890 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,890 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:37,890 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,890 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,890 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,890 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,891 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,891 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,891 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,891 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:37,891 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,891 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,891 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,891 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,891 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,891 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,892 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,892 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:37,892 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,892 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:37,892 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:37,892 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:37,892 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:37,892 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:37 +08:00

2018-05-09 20:24:38,601 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,602 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:38,602 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,602 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:38,602 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,604 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:24:38,604 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,605 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,606 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,607 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:38,607 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,607 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,607 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:38,607 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,607 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,608 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,608 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:38,608 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,608 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,609 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:38,609 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,609 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,609 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,610 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:38,610 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,610 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:38,610 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:38,610 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,612 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:38,612 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,612 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,612 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,612 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:38,612 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,612 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,613 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:38,613 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,613 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,613 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,613 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:38,613 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,613 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:38,613 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:38,613 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:38,613 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:38,613 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,614 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:38,614 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,614 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:38,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:38,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:38,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:38,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:38,614 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,615 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:38,615 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,615 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,615 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,615 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:38,615 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,615 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:38,615 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:38,615 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,616 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:38,616 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,616 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,616 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,616 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:38,616 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,616 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:38,616 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:38,617 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,618 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:38,618 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,618 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,618 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,618 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:38,618 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,618 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:38,618 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:38,618 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:38,618 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:38,618 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:38 +08:00

2018-05-09 20:24:39,338 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,339 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:39,339 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,339 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:39,339 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,339 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,339 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,340 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,340 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,342 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:39,342 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,342 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,343 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,343 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,343 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,344 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,344 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:39,344 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,344 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,344 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,344 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,345 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,345 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,346 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:39,346 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,346 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:39,346 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:39,346 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,346 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:39,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,347 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,348 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,348 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,348 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,348 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,349 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:39,349 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,349 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:39,349 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:39,349 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,349 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,349 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,350 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,350 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,350 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,350 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,351 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:39,351 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,351 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:39,351 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:39,351 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,351 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,351 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,353 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:39,353 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,353 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,353 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,354 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:39,354 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,354 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:39,354 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:39,354 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,354 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,354 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,355 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,355 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,355 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:39,355 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,355 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,355 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,356 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,356 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,356 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,356 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,356 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:39,356 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,356 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,356 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,357 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,357 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,357 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,357 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,357 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:39,357 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,357 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,357 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,358 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,358 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,358 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,845 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,846 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:39,846 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,846 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:39,846 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,847 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:39,848 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,848 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,849 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,849 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:39,849 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,849 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,850 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:39,851 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,851 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,851 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,851 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:39,851 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,851 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,852 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,852 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,852 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,853 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,853 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:39,853 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,853 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:39,853 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:39,853 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,854 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,854 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,854 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,854 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,855 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:39,855 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,855 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,855 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,855 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,856 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,856 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,857 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:39,857 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,857 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:39,857 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:39,857 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,857 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,857 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,857 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,857 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,858 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,858 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,858 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:39,858 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,858 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:39,859 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:39,859 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,859 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,859 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,859 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,859 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,860 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,860 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,860 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:39,861 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,861 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:39,861 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:39,861 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,861 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,861 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,862 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,862 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,862 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:39,862 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,862 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,862 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,863 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,863 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,863 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,863 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,863 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:39,863 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,863 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,863 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,864 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,864 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,864 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,864 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,864 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:39,864 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,864 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,864 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,865 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,865 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,865 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,865 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,865 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:39,865 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,865 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:39,865 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:39,865 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:39,866 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:39,866 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:39 +08:00

2018-05-09 20:24:40,300 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,300 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:24:40,300 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,300 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:24:40,301 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,301 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:40,301 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,301 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,302 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:24:40,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:40,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,303 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:24:40,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:40,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,304 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,305 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:24:40,305 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,305 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:40,305 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:40,305 [14] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,306 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:40,306 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,306 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,306 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,306 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:24:40,307 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,307 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,307 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:40,307 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,307 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,308 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,308 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:40,308 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,308 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:40,308 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:40,308 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:40,308 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:40,308 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,309 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:40,309 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,309 [16] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,309 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,310 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:24:40,310 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,310 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:40,310 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:40,310 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:40,310 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:24:40,310 [12] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,313 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:24:40,313 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,313 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,314 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,314 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (3) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:24:40,314 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,314 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:24:40,314 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:24:40,314 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,315 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:40,315 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,315 [8] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,315 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,315 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:40,315 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,315 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:24:40,315 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,316 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:40,316 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,316 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,316 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,316 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:40,316 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,316 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:40,316 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,316 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:24:40,316 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,317 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,317 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,317 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:24:40,317 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,317 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:24:40,317 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:24:40 +08:00

2018-05-09 20:24:40,318 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:24:40,318 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:24:40,319 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:24:40 +08:00

2018-05-09 20:25:26,100 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:26 +08:00

2018-05-09 20:25:26,108 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：
SELECT Count(*)
FROM INFORMATION_SCHEMA.TABLES AS t
WHERE t.TABLE_SCHEMA + '.' + t.TABLE_NAME IN ('dbo.T_AdminLogs','dbo.T_Admins','dbo.T_Permissions','dbo.T_PermissionTypes','dbo.T_IntegralTypes','dbo.T_Journals','dbo.T_PlatformUsers','dbo.T_PlatformUserTypes','dbo.T_JournalTypes','dbo.T_NavBars','dbo.T_Settings','dbo.T_SettingTypes','dbo.T_States','dbo.T_TakeCashes','dbo.T_AdminPermissions')
    OR t.TABLE_NAME = 'EdmMetadata'
2018-05-09 20:25:26,109 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:26,109 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:26 +08:00

2018-05-09 20:25:26,110 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 15

2018-05-09 20:25:26,110 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:26,110 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:26 +08:00

2018-05-09 20:25:26,181 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:26 +08:00

2018-05-09 20:25:26,843 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
        WHERE [Extent1].[ContextKey] = @p__linq__0
    )  AS [GroupBy1]
2018-05-09 20:25:26,843 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:26,844 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: 'IMS.Service.MyDbContext' (Type = String, Size = 4000)

2018-05-09 20:25:26,844 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:26 +08:00

2018-05-09 20:25:26,845 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-09 20:25:26,845 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:26,846 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:26 +08:00

2018-05-09 20:25:26,847 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:26 +08:00

2018-05-09 20:25:26,849 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT(1) AS [A1]
        FROM [dbo].[__MigrationHistory] AS [Extent1]
    )  AS [GroupBy1]
2018-05-09 20:25:26,849 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:26,849 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:26 +08:00

2018-05-09 20:25:26,850 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Failed in 0 ms with error: 对象名 'dbo.__MigrationHistory' 无效。

2018-05-09 20:25:26,850 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:26,850 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:26 +08:00

2018-05-09 20:25:26,951 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:26 +08:00

2018-05-09 20:25:27,057 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 20:25:27,057 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,057 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615616' (Type = String, Size = 4000)

2018-05-09 20:25:27,057 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,060 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:25:27,060 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,123 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,149 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:27,149 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,149 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:27,149 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,150 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:27,150 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,167 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,282 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,284 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 20:25:27,284 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,284 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:27,284 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,286 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:27,286 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,286 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,288 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,289 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:27,289 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,289 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:27,289 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,290 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:27,290 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,290 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,296 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,302 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:25:27,302 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,302 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,302 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:27,303 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,305 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,305 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,306 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:25:27,306 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,306 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,307 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:27,307 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,307 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,315 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,324 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
    )  AS [GroupBy1]
2018-05-09 20:25:27,324 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,324 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 20:25:27,324 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,325 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:27,325 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,331 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,331 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,332 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:25:27,332 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,332 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,333 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:27,333 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,333 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,343 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,354 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-09 20:25:27,354 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,354 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 20:25:27,354 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:27,354 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:27,354 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,355 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:27,355 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,360 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,360 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,361 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[ToIntegralTypeId] = @p__linq__1) AND ([Extent1].[PlatformUserId] = @p__linq__2)
    )  AS [GroupBy1]
2018-05-09 20:25:27,361 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,361 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 20:25:27,361 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:27,361 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:27,361 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,361 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:27,361 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,362 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,367 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,391 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (10) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:25:27,391 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,391 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '1' (Type = Int64)

2018-05-09 20:25:27,391 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:27,392 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,398 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,400 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,406 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:27,406 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,406 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:27,406 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,407 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:27,407 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,409 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,410 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,411 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:27,412 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,412 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:27,412 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,412 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:27,412 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,412 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '6' (Type = Int64, IsNullable = false)

2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:27,413 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:27 +08:00

2018-05-09 20:25:30,016 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,025 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:25:30,025 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,025 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:25:30,025 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,025 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:30,025 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,026 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,027 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,027 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:25:30,027 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,027 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,027 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:30,027 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,027 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,027 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,028 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:25:30,028 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,028 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,028 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:30,028 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,028 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,028 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,029 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:25:30,030 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,030 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:30,030 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:30,030 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,030 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:30,030 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,030 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,030 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,030 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:25:30,030 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,030 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,031 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:30,031 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,031 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,031 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,033 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:30,033 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,033 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:30,033 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:30,033 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:30,033 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:30,033 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,034 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:30,034 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,034 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,034 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,035 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:30,035 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,035 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:30,035 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:30,035 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:30,035 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:30,035 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:30,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,035 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,036 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,037 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:25:30,037 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,037 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:30,037 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:30,037 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,040 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:25:30,040 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,041 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,041 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,041 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:30,041 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,041 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:30,041 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,041 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:30,041 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:30,042 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:30,043 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:30 +08:00

2018-05-09 20:25:33,100 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,100 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:25:33,100 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,100 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:25:33,100 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,102 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:33,102 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,102 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:25:33,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:25:33,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:25:33,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:33,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:33,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,106 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,106 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,106 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,106 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,107 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:25:33,107 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,107 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,107 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,107 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,108 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,108 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,108 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:33,108 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,108 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:33,108 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:33,109 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:33,109 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:33,109 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,109 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,109 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,109 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,109 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,110 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:33,110 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,110 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:33,110 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:33,110 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:33,110 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:33,110 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,111 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,111 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,111 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,111 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,112 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:25:33,112 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,112 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:33,112 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:33,112 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,112 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,112 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,113 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,113 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,113 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:33,113 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,113 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:33,113 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:33,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:33,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,114 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:33,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:25:33,115 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,126 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 10 ms with result: SqlDataReader

2018-05-09 20:25:33,126 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,126 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,880 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,881 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:25:33,881 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,881 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:25:33,881 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,882 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,882 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,882 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,884 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,885 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:25:33,885 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,885 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,885 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,886 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,886 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,886 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,887 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:25:33,887 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,887 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,888 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,888 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,888 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,888 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,889 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:25:33,889 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,889 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:33,889 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:33,890 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,890 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,890 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,891 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,891 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,892 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:25:33,892 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,892 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,893 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,893 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,893 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,894 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,895 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:33,895 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,895 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:33,895 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:33,895 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:33,895 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:33,895 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,896 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,896 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,896 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,897 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,897 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:33,898 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,898 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:33,898 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:33,898 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:33,898 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:33,898 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,898 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,899 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,899 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,900 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,903 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:25:33,903 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,903 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:33,903 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:33,903 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,906 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:25:33,906 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,906 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,906 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,907 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:33,907 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,907 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:33,907 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,907 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,907 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,907 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,907 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,907 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:33,907 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,907 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:33,907 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,908 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,908 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,908 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,908 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,908 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:33,908 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,908 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:25:33,908 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:33,908 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:33,908 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:33,908 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:33 +08:00

2018-05-09 20:25:34,658 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,658 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:25:34,658 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,658 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:25:34,658 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,659 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:34,659 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,659 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,660 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,660 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:25:34,661 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,661 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,661 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:34,661 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,661 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,661 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,662 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:25:34,662 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,662 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,662 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:34,662 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,662 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,663 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,663 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:25:34,663 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,663 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:34,663 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:34,663 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,664 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:34,664 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,664 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,664 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,664 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:25:34,664 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,665 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,665 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:34,665 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,665 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,666 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,666 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:34,666 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,666 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:34,666 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:34,666 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:34,666 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:34,666 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,667 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:34,667 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,667 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,668 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,668 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:34,668 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,668 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:34,668 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:34,668 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:34,669 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:34,669 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,669 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:34,669 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,669 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,670 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,672 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 2
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:25:34,672 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,672 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:34,672 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:34,672 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,676 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 20:25:34,676 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,677 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,677 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,677 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:34,677 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,677 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:34,677 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,677 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:34,677 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,678 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,678 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,678 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:34,678 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,678 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:34,678 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,679 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:34,679 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,679 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,679 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,680 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:34,680 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,680 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:25:34,680 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:34,680 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:34,680 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:34,680 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:34 +08:00

2018-05-09 20:25:35,197 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,197 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:25:35,197 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,197 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:25:35,197 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,198 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,198 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,198 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,199 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,199 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:25:35,199 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,199 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,199 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,199 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,199 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,200 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,200 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:25:35,200 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,200 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,200 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,200 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,200 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,201 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,201 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:25:35,201 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,201 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:35,201 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:35,201 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,202 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,202 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,202 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,202 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,202 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:25:35,202 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,202 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,203 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,203 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,203 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,203 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,204 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:35,204 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,204 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:35,204 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:35,204 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:35,204 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:35,204 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,204 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,204 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,204 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,205 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,205 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:35,205 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,205 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:35,205 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:35,205 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:35,205 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:35,205 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,206 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,206 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,206 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,206 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,208 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 3
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:25:35,208 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,208 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:35,208 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:35,208 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,211 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 20:25:35,211 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,212 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,212 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,212 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:35,212 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,212 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:35,212 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,212 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,212 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,212 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:35,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:35,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,213 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,214 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:35,214 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,214 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:25:35,214 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,214 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,214 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,214 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,703 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,704 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:25:35,704 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,704 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:25:35,704 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,707 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:25:35,707 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,707 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,708 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,709 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:25:35,709 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,709 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,710 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:35,710 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,710 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,710 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,711 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:25:35,711 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,711 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,712 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:35,712 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,713 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,713 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,713 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:25:35,713 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,713 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:35,713 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:35,713 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,714 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,714 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,714 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,715 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,715 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:25:35,715 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,715 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,717 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:25:35,717 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,718 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,718 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,719 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:35,719 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,719 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:35,719 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:35,719 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:35,719 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:35,719 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,720 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,720 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,720 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,720 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,721 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:35,721 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,721 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:35,721 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:35,721 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:35,721 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:35,721 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,722 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:35,722 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,722 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,723 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,725 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 4
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:25:35,725 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,725 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:35,725 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:35,725 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,732 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 6 ms with result: SqlDataReader

2018-05-09 20:25:35,732 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,732 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,732 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,732 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:35,732 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,732 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:35,732 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,732 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,732 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,732 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:35,733 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:35,734 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:35 +08:00

2018-05-09 20:25:36,242 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,242 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:25:36,242 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,242 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:25:36,243 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,244 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,244 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,244 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,245 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,245 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:25:36,245 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,245 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,245 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,245 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,246 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,246 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,246 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:25:36,246 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,246 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,246 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,246 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,246 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,246 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,247 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:25:36,247 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,247 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:36,247 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:36,247 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,247 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,247 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,247 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,248 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,248 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:25:36,248 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,248 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,249 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,249 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,249 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,250 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,250 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:36,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:36,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:36,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:36,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:36,251 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,251 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,251 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,251 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,252 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,252 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:36,252 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,252 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:36,252 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:36,252 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:36,252 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:36,252 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,253 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,253 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,253 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,253 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,256 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 5
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:25:36,256 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,256 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:36,256 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:36,256 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,259 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:25:36,259 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,259 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,260 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,260 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:36,260 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,260 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:36,260 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,260 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,260 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,260 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,261 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,261 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:36,261 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,261 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:36,261 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,261 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,261 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,261 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,261 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,261 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:36,261 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,261 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:36,261 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,262 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,262 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,262 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,681 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,681 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:25:36,681 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,681 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:25:36,681 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,683 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:36,683 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,683 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,684 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,685 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:25:36,685 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,685 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,685 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,685 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,685 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,685 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,686 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:25:36,686 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,686 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,686 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,686 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,686 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,687 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,687 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:25:36,687 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,687 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:36,687 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:36,687 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,688 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,688 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,688 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,688 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,689 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:25:36,689 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,689 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,689 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,689 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,690 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,690 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,691 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:36,691 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,691 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:36,691 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:36,691 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:36,691 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:36,691 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,691 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,691 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,691 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,692 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,693 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:36,693 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,693 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:36,693 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:36,693 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:36,693 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:36,693 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,693 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,694 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,694 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,694 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,696 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:25:36,696 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,696 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:36,696 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:36,696 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,700 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 20:25:36,700 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,701 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,701 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,701 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:36,701 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,701 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:36,701 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,701 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,702 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,702 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,702 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,702 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:36,702 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,702 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:36,702 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,703 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,703 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,703 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,703 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,703 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:36,703 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,703 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:36,703 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:36,704 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:36,704 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:36,704 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:36 +08:00

2018-05-09 20:25:38,693 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,693 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:25:38,693 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,693 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:25:38,693 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,695 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:38,695 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,695 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,696 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,696 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:25:38,696 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,696 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,697 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:38,697 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,697 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,697 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,697 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:25:38,697 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,697 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,698 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:38,698 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,698 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,698 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,698 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:25:38,698 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,698 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:38,699 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:38,699 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,699 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:38,699 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,699 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,700 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,700 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:25:38,700 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,700 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,701 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:38,701 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,701 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,701 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:38,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:38,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:38,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:38,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:38,702 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,703 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:38,703 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,703 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,703 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,704 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:38,704 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,704 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:38,704 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:38,704 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:38,704 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:38,704 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,705 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:38,705 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,705 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,705 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,706 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:25:38,706 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,706 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:38,706 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:38,706 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:38,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:38,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:38,707 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:38,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:38,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:38,708 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,709 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:38,709 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,709 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,709 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,709 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:38,709 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,709 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:38,709 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:38,710 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:38,710 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:38,710 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:38 +08:00

2018-05-09 20:25:44,907 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,907 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:25:44,908 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,908 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:25:44,908 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,909 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:44,909 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,910 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,912 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,912 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:25:44,912 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,912 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,912 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:44,913 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,913 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,913 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,913 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:25:44,913 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,913 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,914 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:44,914 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,914 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,914 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,915 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:25:44,915 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,915 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:44,915 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:44,915 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,915 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:44,915 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,916 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,916 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,916 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:25:44,917 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,917 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,919 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:25:44,919 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,920 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,920 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,921 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:44,921 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,921 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:44,921 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:44,921 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:44,921 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:44,921 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,923 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:44,923 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,923 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,924 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,924 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:44,924 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,925 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:44,925 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:44,925 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:44,925 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:44,925 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,926 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:44,926 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,926 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,926 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,927 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 1
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:25:44,927 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,927 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:44,927 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:44,927 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,930 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:25:44,930 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,930 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,931 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,931 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:44,931 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,931 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:44,931 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,933 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:44,933 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,933 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,933 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,933 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:44,933 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,934 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:44,934 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:25:44,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:44,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '5' (Type = Int64, IsNullable = false)

2018-05-09 20:25:44,937 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:44,938 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:44,938 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:44,938 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:44 +08:00

2018-05-09 20:25:46,092 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,092 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:25:46,092 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,092 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:25:46,092 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,094 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:46,094 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,094 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,094 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:25:46,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,095 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:46,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,096 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:25:46,097 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,097 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,098 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:46,098 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,098 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,098 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,098 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:25:46,098 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,098 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:46,098 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:46,098 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,100 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:46,100 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,100 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,100 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,100 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:25:46,100 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,100 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,101 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,101 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,101 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,101 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,102 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:46,102 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,102 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:46,102 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:46,102 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:46,102 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:46,102 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,102 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,102 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,102 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,103 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,103 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:46,103 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,103 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:46,103 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:46,103 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:46,103 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:46,103 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,103 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,104 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,104 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,104 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 5
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:25:46,104 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,104 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:46,104 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:46,104 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,105 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,105 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,105 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:46,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:46,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,105 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:46,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:46,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:46,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:46,106 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,107 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,107 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,107 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,615 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,615 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:25:46,615 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,615 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:25:46,616 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,619 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 20:25:46,619 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,619 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,620 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,620 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:25:46,620 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,620 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,622 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:46,622 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,622 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,622 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,623 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:25:46,623 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,623 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,623 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,623 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,623 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,624 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,624 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:25:46,624 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,624 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:46,624 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:46,624 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,625 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,626 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:25:46,626 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,626 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,628 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:25:46,628 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,628 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,629 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,629 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:46,629 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,629 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:46,630 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:46,630 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:46,630 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:46,630 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,631 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,631 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,631 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,631 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:25:46,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:46,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:46,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:46,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:25:46,632 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,632 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,633 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,633 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,633 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,634 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 6
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:25:46,634 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,634 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:25:46,634 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:25:46,634 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,635 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,635 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,635 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:46,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:25:46,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,636 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,637 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,637 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:46,637 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,637 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:46,637 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,637 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,637 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,637 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,638 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,638 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:25:46,638 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,638 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:25:46,638 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:25:46 +08:00

2018-05-09 20:25:46,638 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:25:46,638 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:25:46,639 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:25:46 +08:00

2018-05-09 20:26:46,816 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,816 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Mobile] = @p__linq__0)
2018-05-09 20:26:46,816 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,816 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '15615615661' (Type = String, Size = 4000)

2018-05-09 20:26:46,816 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,828 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 11 ms with result: SqlDataReader

2018-05-09 20:26:46,828 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,828 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,829 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,829 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:26:46,829 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,829 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:26:46,829 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,829 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:46,829 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,829 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,830 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,830 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 20:26:46,830 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,830 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:26:46,830 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,831 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:46,831 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,831 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,831 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,831 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:26:46,832 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,832 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:26:46,832 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,832 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:46,832 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,832 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,842 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,843 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 20:26:46,843 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,843 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '商家积分' (Type = String, Size = 4000)

2018-05-09 20:26:46,843 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,843 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:46,843 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,843 [24] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,844 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,844 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Name] = @p__linq__0)
2018-05-09 20:26:46,844 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,844 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '消费积分' (Type = String, Size = 4000)

2018-05-09 20:26:46,844 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,844 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:46,844 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,844 [13] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,845 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,845 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 20:26:46,845 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,845 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:26:46,845 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,845 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:46,845 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,845 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,846 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,846 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[Id] = @p__linq__0)
2018-05-09 20:26:46,846 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,846 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:26:46,846 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,846 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:46,846 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,846 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,847 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,847 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:26:46,847 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,847 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:26:46,847 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,847 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:46,847 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,847 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,847 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,847 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUserTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:26:46,847 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,847 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:26:46,847 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,848 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:46,848 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,848 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,849 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,849 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:26:46,849 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,849 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:26:46,849 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,852 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 20:26:46,852 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,853 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,883 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,884 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:26:46,884 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,884 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:26:46,884 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,884 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:46,884 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:46,884 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,913 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:46,916 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Started transaction at 2018/5/9 20:26:46 +08:00

2018-05-09 20:26:47,006 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [GivingIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 20:26:47,007 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '16' (Type = Int64)

2018-05-09 20:26:47,007 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '2' (Type = Int64)

2018-05-09 20:26:47,007 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:47 +08:00

2018-05-09 20:26:47,010 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: 1

2018-05-09 20:26:47,010 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:47,010 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：UPDATE [dbo].[T_PlatformUsers]
SET [UseIntegral] = @0
WHERE ([Id] = @1)

2018-05-09 20:26:47,011 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '171' (Type = Int64)

2018-05-09 20:26:47,011 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '3' (Type = Int64)

2018-05-09 20:26:47,011 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:47 +08:00

2018-05-09 20:26:47,011 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: 1

2018-05-09 20:26:47,011 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, NULL, @7, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '2' (Type = Int64)

2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '3' (Type = Int64)

2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '1' (Type = Int64)

2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '16' (Type = Int64)

2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '1' (Type = String, Size = 100)

2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 20:26:46' (Type = DateTime2)

2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 20:26:47,016 [15] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:47 +08:00

2018-05-09 20:26:47,019 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 3 ms with result: SqlDataReader

2018-05-09 20:26:47,020 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：INSERT [dbo].[T_Journals]([PlatformUserId], [ToPlatformUserId], [FormPlatformUserId], [JournalTypeId], [IntegralTypeId], [ToIntegralTypeId], [Description], [InIntegral], [OutIntegral], [Integral], [Amount], [Tip], [CreateTime], [IsDeleted])
VALUES (@0, @1, @2, @3, @4, @5, @6, @7, NULL, @8, NULL, @9, @10, @11)
SELECT [Id]
FROM [dbo].[T_Journals]
WHERE @@ROWCOUNT > 0 AND [Id] = scope_identity()
2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @0: '3' (Type = Int64)

2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @1: '3' (Type = Int64)

2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @2: '2' (Type = Int64)

2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @3: '3' (Type = Int64)

2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @4: '2' (Type = Int64)

2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @5: '3' (Type = Int64)

2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @6: '赠送' (Type = String, Size = 100)

2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @7: '1' (Type = Int64)

2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @8: '171' (Type = Int64)

2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @9: '1' (Type = String, Size = 100)

2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @10: '2018/5/9 20:26:46' (Type = DateTime2)

2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- @11: 'False' (Type = Boolean)

2018-05-09 20:26:47,022 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:47 +08:00

2018-05-09 20:26:47,025 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:26:47,025 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:47,037 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Committed transaction at 2018/5/9 20:26:47 +08:00

2018-05-09 20:26:47,038 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:47 +08:00

2018-05-09 20:26:48,007 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,008 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (([Extent1].[Description] = @p__linq__0) OR (([Extent1].[Description] IS NULL) AND (@p__linq__0 IS NULL)))
2018-05-09 20:26:48,008 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,008 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '赠送' (Type = String, Size = 4000)

2018-05-09 20:26:48,008 [23] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,008 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:48,008 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,008 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,009 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,009 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'商家积分' = [Extent1].[Name])
2018-05-09 20:26:48,009 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,010 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,010 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:48,010 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,010 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,010 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,011 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_IntegralTypes] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'消费积分' = [Extent1].[Name])
2018-05-09 20:26:48,011 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,011 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,011 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:48,011 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,011 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,011 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,012 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        COUNT_BIG(1) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
    )  AS [GroupBy1]
2018-05-09 20:26:48,012 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,012 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:26:48,012 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:26:48,012 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,013 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:48,013 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,013 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,013 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,014 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (2) 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE (0 = [Extent1].[IsDeleted]) AND (N'PlatformUser201805051709360001' = [Extent1].[Mobile])
2018-05-09 20:26:48,014 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,014 [7] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,016 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 2 ms with result: SqlDataReader

2018-05-09 20:26:48,016 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,017 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,017 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,017 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:26:48,017 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,018 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:26:48,018 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:26:48,018 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:26:48,018 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:26:48,018 [17] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,018 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:48,018 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,019 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,019 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,020 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [GroupBy1].[A1] AS [C1]
    FROM ( SELECT 
        SUM([Extent1].[OutIntegral]) AS [A1]
        FROM [dbo].[T_Journals] AS [Extent1]
        WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1) AND ([Extent1].[ToIntegralTypeId] = @p__linq__2) AND ([Extent1].[PlatformUserId] = @p__linq__3)
    )  AS [GroupBy1]
2018-05-09 20:26:48,020 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,020 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:26:48,020 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:26:48,020 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__2: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:26:48,020 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__3: '1' (Type = Int64, IsNullable = false)

2018-05-09 20:26:48,020 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,020 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:48,020 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,021 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,021 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection asynchronously at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,021 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT TOP (1) 
    [Project1].[Id] AS [Id], 
    [Project1].[PlatformUserId] AS [PlatformUserId], 
    [Project1].[ToPlatformUserId] AS [ToPlatformUserId], 
    [Project1].[FormPlatformUserId] AS [FormPlatformUserId], 
    [Project1].[JournalTypeId] AS [JournalTypeId], 
    [Project1].[IntegralTypeId] AS [IntegralTypeId], 
    [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
    [Project1].[Description] AS [Description], 
    [Project1].[InIntegral] AS [InIntegral], 
    [Project1].[OutIntegral] AS [OutIntegral], 
    [Project1].[Integral] AS [Integral], 
    [Project1].[Amount] AS [Amount], 
    [Project1].[Tip] AS [Tip], 
    [Project1].[CreateTime] AS [CreateTime], 
    [Project1].[IsDeleted] AS [IsDeleted]
    FROM ( SELECT [Project1].[Id] AS [Id], [Project1].[PlatformUserId] AS [PlatformUserId], [Project1].[ToPlatformUserId] AS [ToPlatformUserId], [Project1].[FormPlatformUserId] AS [FormPlatformUserId], [Project1].[JournalTypeId] AS [JournalTypeId], [Project1].[IntegralTypeId] AS [IntegralTypeId], [Project1].[ToIntegralTypeId] AS [ToIntegralTypeId], [Project1].[Description] AS [Description], [Project1].[InIntegral] AS [InIntegral], [Project1].[OutIntegral] AS [OutIntegral], [Project1].[Integral] AS [Integral], [Project1].[Amount] AS [Amount], [Project1].[Tip] AS [Tip], [Project1].[CreateTime] AS [CreateTime], [Project1].[IsDeleted] AS [IsDeleted], row_number() OVER (ORDER BY [Project1].[CreateTime] DESC) AS [row_number]
        FROM ( SELECT 
            [Extent1].[Id] AS [Id], 
            [Extent1].[PlatformUserId] AS [PlatformUserId], 
            [Extent1].[ToPlatformUserId] AS [ToPlatformUserId], 
            [Extent1].[FormPlatformUserId] AS [FormPlatformUserId], 
            [Extent1].[JournalTypeId] AS [JournalTypeId], 
            [Extent1].[IntegralTypeId] AS [IntegralTypeId], 
            [Extent1].[ToIntegralTypeId] AS [ToIntegralTypeId], 
            [Extent1].[Description] AS [Description], 
            [Extent1].[InIntegral] AS [InIntegral], 
            [Extent1].[OutIntegral] AS [OutIntegral], 
            [Extent1].[Integral] AS [Integral], 
            [Extent1].[Amount] AS [Amount], 
            [Extent1].[Tip] AS [Tip], 
            [Extent1].[CreateTime] AS [CreateTime], 
            [Extent1].[IsDeleted] AS [IsDeleted]
            FROM [dbo].[T_Journals] AS [Extent1]
            WHERE (0 = [Extent1].[IsDeleted]) AND ([Extent1].[PlatformUserId] = @p__linq__0) AND ([Extent1].[JournalTypeId] = @p__linq__1)
        )  AS [Project1]
    )  AS [Project1]
    WHERE [Project1].[row_number] > 0
    ORDER BY [Project1].[CreateTime] DESC
2018-05-09 20:26:48,021 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,021 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__0: '2' (Type = Int64)

2018-05-09 20:26:48,021 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- p__linq__1: '3' (Type = Int64)

2018-05-09 20:26:48,021 [11] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing asynchronously at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,023 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 1 ms with result: SqlDataReader

2018-05-09 20:26:48,023 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,023 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,023 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,023 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Mobile] AS [Mobile], 
    [Extent1].[Code] AS [Code], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[PlatformIntegral] AS [PlatformIntegral], 
    [Extent1].[GivingIntegral] AS [GivingIntegral], 
    [Extent1].[UseIntegral] AS [UseIntegral], 
    [Extent1].[Salt] AS [Salt], 
    [Extent1].[Password] AS [Password], 
    [Extent1].[TradePassword] AS [TradePassword], 
    [Extent1].[ErrorCount] AS [ErrorCount], 
    [Extent1].[ErrorTime] AS [ErrorTime], 
    [Extent1].[IsEnabled] AS [IsEnabled], 
    [Extent1].[PlatformUserTypeId] AS [PlatformUserTypeId], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_PlatformUsers] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:26:48,023 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,023 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '2' (Type = Int64, IsNullable = false)

2018-05-09 20:26:48,023 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,024 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

2018-05-09 20:26:48,024 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,024 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Closed connection at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,025 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：Opened connection at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,025 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：SELECT 
    [Extent1].[Id] AS [Id], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Platform] AS [Platform], 
    [Extent1].[Merchant] AS [Merchant], 
    [Extent1].[Customer] AS [Customer], 
    [Extent1].[Description] AS [Description], 
    [Extent1].[CreateTime] AS [CreateTime], 
    [Extent1].[IsDeleted] AS [IsDeleted]
    FROM [dbo].[T_JournalTypes] AS [Extent1]
    WHERE [Extent1].[Id] = @EntityKeyValue1
2018-05-09 20:26:48,025 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：

2018-05-09 20:26:48,025 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- EntityKeyValue1: '3' (Type = Int64, IsNullable = false)

2018-05-09 20:26:48,025 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Executing at 2018/5/9 20:26:48 +08:00

2018-05-09 20:26:48,025 [22] DEBUG IMS.Service.MyDbContext - EF执行SQL：-- Completed in 0 ms with result: SqlDataReader

